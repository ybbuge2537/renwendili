{"ast":null,"code":"// JSON file imports using require (CommonJS compatible)\nimport apiService from '../services/apiService.js';\nconst fs = require('fs');\nconst path = require('path');\nclass DataManager {\n  constructor() {\n    // Initialize with empty arrays\n    this.locations = [];\n    this.locationsMetadata = {};\n\n    // 文章数据\n    this.articles = [];\n    this.articlesMetadata = {};\n\n    // 媒体数据\n    this.media = [];\n    this.mediaFolders = [];\n    this.mediaMetadata = {};\n\n    // 分类与标签\n    this.categories = [];\n    this.categoriesMetadata = {};\n    this.tags = [];\n    this.tagsMetadata = {};\n\n    // 用户与权限\n    this.users = [];\n    this.roles = [];\n    this.permissions = [];\n    this.rolePermissions = [];\n    this.usersMetadata = {};\n\n    // 用户贡献数据\n    this.userContributions = [];\n    this.userContributionsMetadata = {\n      total_contributions: 0,\n      last_updated: new Date().toISOString()\n    };\n\n    // 系统设置\n    this.websiteSettings = {};\n    this.emailSettings = {};\n    this.seoSettings = {};\n    this.securitySettings = {};\n    this.operationLogs = [];\n    this.errorLogs = [];\n    this.settingsMetadata = {};\n\n    // Initialize data from API\n    this.init();\n  }\n  async init() {\n    try {\n      // Load all data from API services\n      const locationsData = await apiService.getAllRegions();\n      const articlesData = await apiService.getAllTopics();\n      const mediaData = await apiService.getAllMedia();\n      const categoriesData = await apiService.getAllCategories();\n      const tagsData = await apiService.getAllTags();\n      const usersData = await apiService.getAllUsers();\n      const rolesData = await apiService.getAllRoles();\n\n      // Map API data to internal structure\n      this.locations = locationsData.map(this.convertDbRegionToFrontend.bind(this));\n      this.articles = articlesData.map(this.convertDbTopicToFrontend.bind(this));\n      this.media = mediaData;\n      this.categories = categoriesData;\n      this.tags = tagsData;\n      this.users = usersData;\n      this.roles = rolesData;\n      console.log('Data initialized successfully from API');\n    } catch (error) {\n      console.error('Failed to initialize data from API, using local JSON as fallback:', error);\n      // Fallback to local JSON if API fails\n      await this.loadLocalData();\n    }\n  }\n  async loadLocalData() {\n    try {\n      // Dynamic imports with type attribute\n      const locationsModule = await import('./locations.json', {\n        type: 'json'\n      });\n      const articlesModule = await import('./articles.json', {\n        type: 'json'\n      });\n      const mediaModule = await import('./media.json', {\n        type: 'json'\n      });\n      const categoriesModule = await import('./categories.json', {\n        type: 'json'\n      });\n      const tagsModule = await import('./tags.json', {\n        type: 'json'\n      });\n      const usersModule = await import('./users.json', {\n        type: 'json'\n      });\n      const settingsModule = await import('./settings.json', {\n        type: 'json'\n      });\n      const locationsData = locationsModule.default;\n      const articlesData = articlesModule.default;\n      const mediaData = mediaModule.default;\n      const categoriesData = categoriesModule.default;\n      const tagsData = tagsModule.default;\n      const usersData = usersModule.default;\n      const settingsData = settingsModule.default;\n      this.locations = locationsData.locations;\n      this.locationsMetadata = locationsData.metadata;\n      this.articles = articlesData.articles;\n      this.articlesMetadata = articlesData.metadata;\n      this.media = mediaData.media;\n      this.mediaFolders = mediaData.folders;\n      this.mediaMetadata = mediaData.metadata;\n      this.categories = categoriesData.categories;\n      this.categoriesMetadata = categoriesData.metadata;\n      this.tags = tagsData.tags;\n      this.tagsMetadata = tagsData.metadata;\n      this.users = usersData.users;\n      this.roles = usersData.roles;\n      this.permissions = usersData.permissions;\n      this.rolePermissions = usersData.role_permissions;\n      this.usersMetadata = usersData.metadata;\n      this.websiteSettings = settingsData.website_settings;\n      this.emailSettings = settingsData.email_settings;\n      this.seoSettings = settingsData.seo_settings;\n      this.securitySettings = settingsData.security_settings;\n      this.operationLogs = settingsData.logs.operation_logs;\n      this.errorLogs = settingsData.logs.error_logs;\n      this.settingsMetadata = settingsData.metadata;\n      console.log('Local data loaded successfully as fallback');\n    } catch (error) {\n      console.error('Failed to load local data:', error);\n    }\n  }\n\n  // 辅助方法：将数据库格式的地域转换为前端格式\n  convertDbRegionToFrontend(region) {\n    if (!region) return null;\n\n    // 解析经纬度\n    let coordinates = {\n      lng: 0,\n      lat: 0\n    };\n    if (region.location) {\n      const match = region.location.match(/POINT\\((\\d+\\.?\\d*) (\\d+\\.?\\d*)\\)/);\n      if (match) {\n        coordinates = {\n          lng: parseFloat(match[1]),\n          lat: parseFloat(match[2])\n        };\n      }\n    }\n    return {\n      id: region.region_id,\n      name: {\n        zh: region.region_name\n      },\n      description: {\n        zh: region.description || ''\n      },\n      coordinates: coordinates,\n      population: region.population || null,\n      language: region.language || null,\n      layer: 'country',\n      // 默认值，可根据需要扩展\n      type: 'country',\n      // 默认值，可根据需要扩展\n      tags: [],\n      // 默认值，可根据需要扩展\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n  }\n\n  // 辅助方法：将前端格式的地域转换为数据库格式\n  convertFrontendRegionToDb(location) {\n    return {\n      region_name: location.name.zh,\n      parent_id: location.parent_id || null,\n      location: `POINT(${location.coordinates.lng} ${location.coordinates.lat})`,\n      population: location.population || null,\n      language: location.language || null,\n      description: location.description.zh || ''\n    };\n  }\n\n  // 获取所有地点\n  async getAllLocations() {\n    try {\n      const regions = await apiService.region.getAllRegions();\n      // 转换为前端需要的格式\n      const locations = regions.map(region => this.convertDbRegionToFrontend(region));\n      // 更新本地缓存\n      this.locations = locations;\n      this.locationsMetadata.total_locations = locations.length;\n      return locations;\n    } catch (error) {\n      console.error('获取所有地点失败:', error);\n      return this.locations;\n    }\n  }\n\n  // 根据图层获取地点\n  async getLocationsByLayer(layer) {\n    const locations = await this.getAllLocations();\n    if (!layer || layer === 'all') {\n      return locations;\n    }\n    return locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  async getLocationById(id) {\n    try {\n      const region = await apiService.region.getRegionById(id);\n      if (region) {\n        return this.convertDbRegionToFrontend(region);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取地点 ${id} 失败:`, error);\n      return this.locations.find(location => location.id === id);\n    }\n  }\n\n  // 根据标签获取地点\n  async getLocationsByTag(tag) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  async getLocationsByType(type) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  async searchLocations(query, language = 'zh') {\n    const locations = await this.getAllLocations();\n    const lowerQuery = query.toLowerCase();\n    return locations.filter(location => location.name[language].toLowerCase().includes(lowerQuery) || location.description[language].toLowerCase().includes(lowerQuery) || location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)));\n  }\n\n  // 添加地点\n  async addLocation(location) {\n    try {\n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(location);\n      const newRegion = await apiService.region.createRegion(regionData);\n      // 转换回前端格式\n      const newLocation = this.convertDbRegionToFrontend(newRegion);\n      // 更新本地缓存\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    } catch (error) {\n      console.error('添加地点失败:', error);\n      // 降级到本地处理\n      const newLocation = {\n        ...location,\n        id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    }\n  }\n\n  // 更新地点\n  async updateLocation(id, updates) {\n    try {\n      // 获取当前地点\n      const currentLocation = await this.getLocationById(id);\n      if (!currentLocation) return null;\n\n      // 合并更新\n      const updatedLocation = {\n        ...currentLocation,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n\n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(updatedLocation);\n      const updatedRegion = await apiService.region.updateRegion(id, regionData);\n\n      // 转换回前端格式\n      const finalLocation = this.convertDbRegionToFrontend(updatedRegion);\n\n      // 更新本地缓存\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index !== -1) {\n        this.locations[index] = finalLocation;\n      }\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return finalLocation;\n    } catch (error) {\n      console.error(`更新地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return null;\n      this.locations[index] = {\n        ...this.locations[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return this.locations[index];\n    }\n  }\n\n  // 删除地点\n  async deleteLocation(id) {\n    try {\n      const success = await apiService.region.deleteRegion(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.locations.findIndex(location => location.id === id);\n        if (index !== -1) {\n          this.locations.splice(index, 1);\n        }\n        this.locationsMetadata.total_locations = this.locations.length;\n        this.locationsMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return false;\n      this.locations.splice(index, 1);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.locationsMetadata;\n  }\n\n  // 获取所有图层类型\n  async getLayers() {\n    const locations = await this.getAllLocations();\n    const layers = [...new Set(locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  async getTypes() {\n    const locations = await this.getAllLocations();\n    const types = [...new Set(locations.map(location => location.type))];\n    return types.sort();\n  }\n\n  // 辅助方法：将数据库格式的专题转换为前端格式\n  convertDbTopicToFrontend(topic) {\n    if (!topic) return null;\n    return {\n      id: topic.topic_id,\n      title: {\n        zh: topic.title\n      },\n      cover_image: topic.cover_url || '',\n      content: {\n        zh: topic.content\n      },\n      location_id: topic.region_id,\n      author_id: topic.author_id,\n      status: topic.status || '草稿',\n      created_at: topic.create_time || new Date().toISOString(),\n      updated_at: topic.update_time || new Date().toISOString(),\n      tags: [],\n      // 默认值，可根据需要扩展\n      category_id: null // 默认值，可根据需要扩展\n    };\n  }\n\n  // 辅助方法：将前端格式的文章转换为数据库格式\n  convertFrontendArticleToDb(article) {\n    return {\n      title: article.title.zh,\n      cover_url: article.cover_image || '',\n      content: article.content.zh || '',\n      region_id: article.location_id || null,\n      author_id: article.author_id,\n      status: article.status || 'draft'\n    };\n  }\n\n  // 辅助方法：将数据库格式的用户贡献转换为前端格式\n  convertDbContributionToFrontend(contribution) {\n    if (!contribution) return null;\n    return {\n      id: contribution.contribution_id,\n      user_id: contribution.user_id,\n      location_id: contribution.region_id,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || '',\n      status: contribution.status || '待审核',\n      created_at: contribution.create_time || new Date().toISOString(),\n      audit_time: contribution.audit_time || null,\n      auditor_id: contribution.auditor_id || null\n    };\n  }\n\n  // 辅助方法：将前端格式的用户贡献转换为数据库格式\n  convertFrontendContributionToDb(contribution) {\n    return {\n      user_id: contribution.user_id,\n      region_id: contribution.location_id || null,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || ''\n    };\n  }\n\n  // 文章管理相关方法\n  async getAllArticles() {\n    try {\n      const topics = await apiService.topic.getAllTopics();\n      // 转换为前端需要的格式\n      const articles = topics.map(topic => this.convertDbTopicToFrontend(topic));\n      // 更新本地缓存\n      this.articles = articles;\n      this.articlesMetadata.total_articles = articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return articles;\n    } catch (error) {\n      console.error('获取所有文章失败:', error);\n      return this.articles;\n    }\n  }\n  async getArticleById(id) {\n    try {\n      const topic = await apiService.topic.getTopicById(id);\n      if (topic) {\n        return this.convertDbTopicToFrontend(topic);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取文章 ${id} 失败:`, error);\n      return this.articles.find(article => article.id === id);\n    }\n  }\n  async getArticlesByStatus(status) {\n    const articles = await this.getAllArticles();\n    if (!status) return articles;\n    return articles.filter(article => article.status === status);\n  }\n  async getArticlesByAuthor(authorId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.author_id === authorId);\n  }\n  async getArticlesByCategory(categoryId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.category_id === categoryId);\n  }\n  async getArticlesByTag(tagId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.tags && article.tags.includes(tagId));\n  }\n  async searchArticles(query, language = 'zh') {\n    const articles = await this.getAllArticles();\n    const lowerQuery = query.toLowerCase();\n    return articles.filter(article => article.title[language].toLowerCase().includes(lowerQuery) || article.content[language].toLowerCase().includes(lowerQuery));\n  }\n  async addArticle(article) {\n    try {\n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(article);\n      const newTopic = await apiService.topic.createTopic(topicData);\n      // 转换回前端格式\n      const newArticle = this.convertDbTopicToFrontend(newTopic);\n      // 更新本地缓存\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    } catch (error) {\n      console.error('添加文章失败:', error);\n      // 降级到本地处理\n      const newArticle = {\n        ...article,\n        id: `article_${(this.articles.length + 1).toString().padStart(4, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        status: 'draft'\n      };\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    }\n  }\n  async updateArticle(id, updates) {\n    try {\n      // 获取当前文章\n      const currentArticle = await this.getArticleById(id);\n      if (!currentArticle) return null;\n\n      // 合并更新\n      const updatedArticle = {\n        ...currentArticle,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n\n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(updatedArticle);\n      const updatedTopic = await apiService.topic.updateTopic(id, topicData);\n\n      // 转换回前端格式\n      const finalArticle = this.convertDbTopicToFrontend(updatedTopic);\n\n      // 更新本地缓存\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index !== -1) {\n        this.articles[index] = finalArticle;\n      }\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return finalArticle;\n    } catch (error) {\n      console.error(`更新文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return null;\n      this.articles[index] = {\n        ...this.articles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return this.articles[index];\n    }\n  }\n  async deleteArticle(id) {\n    try {\n      const success = await apiService.topic.deleteTopic(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.articles.findIndex(article => article.id === id);\n        if (index !== -1) {\n          this.articles.splice(index, 1);\n        }\n        this.articlesMetadata.total_articles = this.articles.length;\n        this.articlesMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return false;\n      this.articles.splice(index, 1);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 用户贡献管理相关方法\n  async getAllUserContributions() {\n    try {\n      const contributions = await apiService.userContribution.getAllContributions();\n      // 转换为前端格式\n      const frontendContributions = contributions.map(contribution => this.convertDbContributionToFrontend(contribution));\n      // 更新本地缓存\n      this.userContributions = frontendContributions;\n      this.userContributionsMetadata.total_contributions = frontendContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContributions;\n    } catch (error) {\n      console.error('获取用户贡献列表失败:', error);\n      return this.userContributions;\n    }\n  }\n  async addUserContribution(contribution) {\n    try {\n      // 转换为数据库格式\n      const contributionData = this.convertFrontendContributionToDb(contribution);\n      const newContribution = await apiService.userContribution.createContribution(contributionData);\n      // 转换回前端格式\n      const frontendContribution = this.convertDbContributionToFrontend(newContribution);\n      // 更新本地缓存\n      this.userContributions.push(frontendContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContribution;\n    } catch (error) {\n      console.error('创建用户贡献失败:', error);\n      // 降级到本地处理\n      const newContribution = {\n        ...contribution,\n        id: `contrib_${(this.userContributions.length + 1).toString().padStart(5, '0')}`,\n        created_at: new Date().toISOString(),\n        status: '待审核',\n        audit_time: null,\n        auditor_id: null\n      };\n      this.userContributions.push(newContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return newContribution;\n    }\n  }\n  async updateUserContributionStatus(id, status, auditorId) {\n    try {\n      await apiService.userContribution.updateContributionStatus(id, status, auditorId);\n      // 更新本地缓存\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index !== -1) {\n        this.userContributions[index] = {\n          ...this.userContributions[index],\n          status,\n          audit_time: new Date().toISOString(),\n          auditor_id: auditorId\n        };\n        this.userContributionsMetadata.last_updated = new Date().toISOString();\n      }\n      return true;\n    } catch (error) {\n      console.error(`更新贡献状态失败:`, error);\n      // 降级到本地处理\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index === -1) return false;\n      this.userContributions[index] = {\n        ...this.userContributions[index],\n        status,\n        audit_time: new Date().toISOString(),\n        auditor_id: auditorId\n      };\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n  async getUserContributionsByStatus(status) {\n    const contributions = await this.getAllUserContributions();\n    if (!status) return contributions;\n    return contributions.filter(contribution => contribution.status === status);\n  }\n  async getUserContributionsByUser(userId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.user_id === userId);\n  }\n  async getUserContributionsByLocation(locationId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.location_id === locationId);\n  }\n\n  // 媒体管理相关方法\n  getAllMedia() {\n    return this.media;\n  }\n  getMediaById(id) {\n    return this.media.find(media => media.id === id);\n  }\n  getMediaByType(type) {\n    if (!type) return this.media;\n    return this.media.filter(media => media.type === type);\n  }\n  getMediaByFolder(folderId) {\n    return this.media.filter(media => media.folder_id === folderId);\n  }\n  addMedia(media) {\n    const newMedia = {\n      ...media,\n      id: `media_${(this.media.length + 1).toString().padStart(4, '0')}`,\n      uploaded_at: new Date().toISOString(),\n      size: media.size || 0\n    };\n    this.media.push(newMedia);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return newMedia;\n  }\n  deleteMedia(id) {\n    const index = this.media.findIndex(media => media.id === id);\n    if (index === -1) return false;\n    this.media.splice(index, 1);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return true;\n  }\n  getAllMediaFolders() {\n    return this.mediaFolders;\n  }\n  addMediaFolder(folder) {\n    const newFolder = {\n      ...folder,\n      id: `folder_${(this.mediaFolders.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString()\n    };\n    this.mediaFolders.push(newFolder);\n    return newFolder;\n  }\n  deleteMediaFolder(id) {\n    // 检查文件夹是否为空\n    const hasMedia = this.media.some(media => media.folder_id === id);\n    if (hasMedia) return false;\n    const index = this.mediaFolders.findIndex(folder => folder.id === id);\n    if (index === -1) return false;\n    this.mediaFolders.splice(index, 1);\n    return true;\n  }\n\n  // 分类管理相关方法\n  getAllCategories() {\n    return this.categories;\n  }\n  getCategoryById(id) {\n    return this.categories.find(category => category.id === id);\n  }\n  getCategoriesByParent(parentId) {\n    return this.categories.filter(category => category.parent_id === parentId);\n  }\n  addCategory(category) {\n    const newCategory = {\n      ...category,\n      id: `cat_${(this.categories.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.categories.push(newCategory);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return newCategory;\n  }\n  updateCategory(id, updates) {\n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return null;\n    this.categories[index] = {\n      ...this.categories[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    return this.categories[index];\n  }\n  deleteCategory(id) {\n    // 检查是否有文章属于该分类\n    const hasArticles = this.articles.some(article => article.category_id === id);\n    if (hasArticles) return false;\n\n    // 检查是否有子分类\n    const hasChildren = this.categories.some(category => category.parent_id === id);\n    if (hasChildren) return false;\n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return false;\n    this.categories.splice(index, 1);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return true;\n  }\n\n  // 标签管理相关方法\n  getAllTags() {\n    return this.tags;\n  }\n  getTagById(id) {\n    return this.tags.find(tag => tag.id === id);\n  }\n  addTag(tag) {\n    const newTag = {\n      ...tag,\n      id: `tag_${(this.tags.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      article_count: 0\n    };\n    this.tags.push(newTag);\n    return newTag;\n  }\n  updateTag(id, updates) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return null;\n    this.tags[index] = {\n      ...this.tags[index],\n      ...updates\n    };\n    return this.tags[index];\n  }\n  deleteTag(id) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return false;\n\n    // 从所有文章中移除该标签\n    this.articles.forEach(article => {\n      if (article.tags && article.tags.includes(id)) {\n        article.tags = article.tags.filter(tagId => tagId !== id);\n      }\n    });\n    this.tags.splice(index, 1);\n    return true;\n  }\n\n  // 用户管理相关方法\n  async getAllUsers() {\n    try {\n      const users = await apiService.user.getAllUsers();\n      // 更新本地缓存\n      this.users = users;\n      this.usersMetadata.total_users = users.length;\n      return users;\n    } catch (error) {\n      console.error('获取用户列表失败:', error);\n      return this.users;\n    }\n  }\n  async getUserById(id) {\n    try {\n      const user = await apiService.user.getUserById(id);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${id} 失败:`, error);\n      return this.users.find(user => user.id === id);\n    }\n  }\n  async getUserByUsername(username) {\n    try {\n      const user = await apiService.user.getUserByUsername(username);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${username} 失败:`, error);\n      return this.users.find(user => user.username === username);\n    }\n  }\n  async addUser(user) {\n    try {\n      const newUser = await apiService.user.createUser(user);\n      // 更新本地缓存\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    } catch (error) {\n      console.error('创建用户失败:', error);\n      // 降级到本地处理\n      const newUser = {\n        ...user,\n        id: `user_${(this.users.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        status: 'active'\n      };\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    }\n  }\n  async updateUser(id, updates) {\n    try {\n      const updatedUser = await apiService.user.updateUser(id, updates);\n      // 更新本地缓存\n      const index = this.users.findIndex(user => user.id === id);\n      if (index !== -1) {\n        this.users[index] = updatedUser;\n      }\n      return updatedUser;\n    } catch (error) {\n      console.error(`更新用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return null;\n      this.users[index] = {\n        ...this.users[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      return this.users[index];\n    }\n  }\n  async deleteUser(id) {\n    try {\n      const success = await apiService.user.deleteUser(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.users.findIndex(user => user.id === id);\n        if (index !== -1) {\n          this.users.splice(index, 1);\n          this.usersMetadata.total_users = this.users.length;\n        }\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return false;\n      this.users.splice(index, 1);\n      this.usersMetadata.total_users = this.users.length;\n      return true;\n    }\n  }\n\n  // 权限管理相关方法\n  async getAllRoles() {\n    try {\n      const roles = await apiService.rolePermission.getAllRoles();\n      // 更新本地缓存\n      this.roles = roles;\n      return roles;\n    } catch (error) {\n      console.error('获取角色列表失败:', error);\n      return this.roles;\n    }\n  }\n  async getRoleById(id) {\n    try {\n      // 先从本地缓存查找\n      const role = this.roles.find(role => role.id === id);\n      if (role) return role;\n\n      // 如果本地没有，从API获取\n      return await apiService.rolePermission.getRoleById(id);\n    } catch (error) {\n      console.error(`获取角色 ${id} 失败:`, error);\n      return this.roles.find(role => role.id === id);\n    }\n  }\n  async addRole(role) {\n    try {\n      const newRole = await apiService.rolePermission.createRole(role);\n      // 更新本地缓存\n      this.roles.push(newRole);\n      return newRole;\n    } catch (error) {\n      console.error('创建角色失败:', error);\n      // 降级到本地处理\n      const newRole = {\n        ...role,\n        id: `role_${(this.roles.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString()\n      };\n      this.roles.push(newRole);\n      return newRole;\n    }\n  }\n  async deleteRole(id) {\n    try {\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n\n      // 检查是否有用户关联到该角色\n      const users = await this.getAllUsers();\n      const hasUsers = users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      const success = await apiService.rolePermission.deleteRole(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.roles.findIndex(role => role.id === id);\n        if (index !== -1) {\n          this.roles.splice(index, 1);\n        }\n        // 删除相关的权限关联\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n\n      // 检查是否有用户关联到该角色\n      const hasUsers = this.users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return false;\n\n      // 删除相关的权限关联\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      this.roles.splice(index, 1);\n      return true;\n    }\n  }\n  async updateRole(id, updates) {\n    try {\n      const updatedRole = await apiService.rolePermission.updateRole(id, updates);\n      // 更新本地缓存\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index !== -1) {\n        this.roles[index] = updatedRole;\n      }\n      return updatedRole;\n    } catch (error) {\n      console.error(`更新角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return null;\n      this.roles[index] = {\n        ...this.roles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      return this.roles[index];\n    }\n  }\n  async getAllRolePermissions() {\n    return this.rolePermissions;\n  }\n  async updateRolePermissions(roleId, permissionIds) {\n    try {\n      const success = await apiService.rolePermission.updateRolePermissions(roleId, permissionIds);\n      // 更新本地缓存\n      if (success) {\n        // 删除该角色的所有现有权限\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n\n        // 添加新的权限关联\n        permissionIds.forEach(permissionId => {\n          this.rolePermissions.push({\n            role_id: roleId,\n            permission_id: permissionId\n          });\n        });\n      }\n      return success;\n    } catch (error) {\n      console.error(`更新角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      // 删除该角色的所有现有权限\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n\n      // 添加新的权限关联\n      permissionIds.forEach(permissionId => {\n        this.rolePermissions.push({\n          role_id: roleId,\n          permission_id: permissionId\n        });\n      });\n      return true;\n    }\n  }\n  async getAllPermissions() {\n    try {\n      const permissions = await apiService.rolePermission.getAllPermissions();\n      // 更新本地缓存\n      this.permissions = permissions;\n      return permissions;\n    } catch (error) {\n      console.error('获取权限列表失败:', error);\n      return this.permissions;\n    }\n  }\n  async getPermissionsByRole(roleId) {\n    try {\n      const permissionIds = await apiService.rolePermission.getRolePermissions(roleId);\n      const allPermissions = await this.getAllPermissions();\n      return allPermissions.filter(permission => permissionIds.includes(permission.id));\n    } catch (error) {\n      console.error(`获取角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      const rolePermissionIds = this.rolePermissions.filter(rp => rp.role_id === roleId).map(rp => rp.permission_id);\n      return this.permissions.filter(permission => rolePermissionIds.includes(permission.id));\n    }\n  }\n  async assignPermission(roleId, permissionId) {\n    try {\n      // 检查是否已存在该关联\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      const exists = existingPermissions.some(permission => permission.id === permissionId);\n      if (exists) return false;\n\n      // 更新权限列表\n      const newPermissions = [...existingPermissions.map(p => p.id), permissionId];\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`分配权限失败:`, error);\n      // 降级到本地处理\n      // 检查是否已存在该关联\n      const exists = this.rolePermissions.some(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (exists) return false;\n      this.rolePermissions.push({\n        role_id: roleId,\n        permission_id: permissionId\n      });\n      return true;\n    }\n  }\n  async removePermission(roleId, permissionId) {\n    try {\n      // 获取当前权限列表\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      // 过滤掉要移除的权限\n      const newPermissions = existingPermissions.map(p => p.id).filter(id => id !== permissionId);\n      // 更新权限列表\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`移除权限失败:`, error);\n      // 降级到本地处理\n      const index = this.rolePermissions.findIndex(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (index === -1) return false;\n      this.rolePermissions.splice(index, 1);\n      return true;\n    }\n  }\n\n  // 系统设置相关方法\n  getWebsiteSettings() {\n    return this.websiteSettings;\n  }\n  updateWebsiteSettings(updates) {\n    this.websiteSettings = {\n      ...this.websiteSettings,\n      ...updates\n    };\n    return this.websiteSettings;\n  }\n  getEmailSettings() {\n    return this.emailSettings;\n  }\n  updateEmailSettings(updates) {\n    this.emailSettings = {\n      ...this.emailSettings,\n      ...updates\n    };\n    return this.emailSettings;\n  }\n  getSEOSettings() {\n    return this.seoSettings;\n  }\n  updateSEOSettings(updates) {\n    this.seoSettings = {\n      ...this.seoSettings,\n      ...updates\n    };\n    return this.seoSettings;\n  }\n  getSecuritySettings() {\n    return this.securitySettings;\n  }\n  updateSecuritySettings(updates) {\n    this.securitySettings = {\n      ...this.securitySettings,\n      ...updates\n    };\n    return this.securitySettings;\n  }\n\n  // 日志管理相关方法\n  getAllOperationLogs() {\n    return this.operationLogs;\n  }\n  addOperationLog(log) {\n    const newLog = {\n      ...log,\n      id: `log_${(this.operationLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.operationLogs.push(newLog);\n    return newLog;\n  }\n  getAllErrorLogs() {\n    return this.errorLogs;\n  }\n  addErrorLog(log) {\n    const newLog = {\n      ...log,\n      id: `error_${(this.errorLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.errorLogs.push(newLog);\n    return newLog;\n  }\n\n  // 更新日志（清空日志）\n  clearOperationLogs() {\n    this.operationLogs = [];\n    return true;\n  }\n  clearErrorLogs() {\n    this.errorLogs = [];\n    return true;\n  }\n}\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;","map":{"version":3,"names":["apiService","fs","require","path","DataManager","constructor","locations","locationsMetadata","articles","articlesMetadata","media","mediaFolders","mediaMetadata","categories","categoriesMetadata","tags","tagsMetadata","users","roles","permissions","rolePermissions","usersMetadata","userContributions","userContributionsMetadata","total_contributions","last_updated","Date","toISOString","websiteSettings","emailSettings","seoSettings","securitySettings","operationLogs","errorLogs","settingsMetadata","init","locationsData","getAllRegions","articlesData","getAllTopics","mediaData","getAllMedia","categoriesData","getAllCategories","tagsData","getAllTags","usersData","getAllUsers","rolesData","getAllRoles","map","convertDbRegionToFrontend","bind","convertDbTopicToFrontend","console","log","error","loadLocalData","locationsModule","type","articlesModule","mediaModule","categoriesModule","tagsModule","usersModule","settingsModule","default","settingsData","metadata","folders","role_permissions","website_settings","email_settings","seo_settings","security_settings","logs","operation_logs","error_logs","region","coordinates","lng","lat","location","match","parseFloat","id","region_id","name","zh","region_name","description","population","language","layer","created_at","updated_at","convertFrontendRegionToDb","parent_id","getAllLocations","regions","total_locations","length","getLocationsByLayer","filter","getLocationById","getRegionById","find","getLocationsByTag","tag","includes","getLocationsByType","searchLocations","query","lowerQuery","toLowerCase","some","addLocation","regionData","newRegion","createRegion","newLocation","push","toString","padStart","updateLocation","updates","currentLocation","updatedLocation","updatedRegion","updateRegion","finalLocation","index","findIndex","deleteLocation","success","deleteRegion","splice","getMetadata","getLayers","layers","Set","sort","getTypes","types","topic","topic_id","title","cover_image","cover_url","content","location_id","author_id","status","create_time","update_time","category_id","convertFrontendArticleToDb","article","convertDbContributionToFrontend","contribution","contribution_id","user_id","content_type","media_url","audit_time","auditor_id","convertFrontendContributionToDb","getAllArticles","topics","total_articles","getArticleById","getTopicById","getArticlesByStatus","getArticlesByAuthor","authorId","getArticlesByCategory","categoryId","getArticlesByTag","tagId","searchArticles","addArticle","topicData","newTopic","createTopic","newArticle","updateArticle","currentArticle","updatedArticle","updatedTopic","updateTopic","finalArticle","deleteArticle","deleteTopic","getAllUserContributions","contributions","userContribution","getAllContributions","frontendContributions","addUserContribution","contributionData","newContribution","createContribution","frontendContribution","updateUserContributionStatus","auditorId","updateContributionStatus","getUserContributionsByStatus","getUserContributionsByUser","userId","getUserContributionsByLocation","locationId","getMediaById","getMediaByType","getMediaByFolder","folderId","folder_id","addMedia","newMedia","uploaded_at","size","total_files","deleteMedia","getAllMediaFolders","addMediaFolder","folder","newFolder","deleteMediaFolder","hasMedia","getCategoryById","category","getCategoriesByParent","parentId","addCategory","newCategory","total_categories","updateCategory","deleteCategory","hasArticles","hasChildren","getTagById","addTag","newTag","article_count","updateTag","deleteTag","forEach","user","total_users","getUserById","getUserByUsername","username","addUser","newUser","createUser","updateUser","updatedUser","deleteUser","rolePermission","getRoleById","role","addRole","newRole","createRole","deleteRole","hasUsers","role_id","rp","updateRole","updatedRole","getAllRolePermissions","updateRolePermissions","roleId","permissionIds","permissionId","permission_id","getAllPermissions","getPermissionsByRole","getRolePermissions","allPermissions","permission","rolePermissionIds","assignPermission","existingPermissions","exists","newPermissions","p","removePermission","getWebsiteSettings","updateWebsiteSettings","getEmailSettings","updateEmailSettings","getSEOSettings","updateSEOSettings","getSecuritySettings","updateSecuritySettings","getAllOperationLogs","addOperationLog","newLog","timestamp","getAllErrorLogs","addErrorLog","clearOperationLogs","clearErrorLogs","dataManager"],"sources":["/Volumes/ZHITTAI/xiangmu/renwendil/src/data/dataManager.js"],"sourcesContent":["// JSON file imports using require (CommonJS compatible)\nimport apiService from '../services/apiService.js';\nconst fs = require('fs');\nconst path = require('path');\n\nclass DataManager {\n  constructor() {\n    // Initialize with empty arrays\n    this.locations = [];\n    this.locationsMetadata = {};\n    \n    // 文章数据\n    this.articles = [];\n    this.articlesMetadata = {};\n    \n    // 媒体数据\n    this.media = [];\n    this.mediaFolders = [];\n    this.mediaMetadata = {};\n    \n    // 分类与标签\n    this.categories = [];\n    this.categoriesMetadata = {};\n    this.tags = [];\n    this.tagsMetadata = {};\n    \n    // 用户与权限\n    this.users = [];\n    this.roles = [];\n    this.permissions = [];\n    this.rolePermissions = [];\n    this.usersMetadata = {};\n    \n    // 用户贡献数据\n    this.userContributions = [];\n    this.userContributionsMetadata = { total_contributions: 0, last_updated: new Date().toISOString() };\n    \n    // 系统设置\n    this.websiteSettings = {};\n    this.emailSettings = {};\n    this.seoSettings = {};\n    this.securitySettings = {};\n    this.operationLogs = [];\n    this.errorLogs = [];\n    this.settingsMetadata = {};\n    \n    // Initialize data from API\n    this.init();\n  }\n  \n  async init() {\n    try {\n      // Load all data from API services\n      const locationsData = await apiService.getAllRegions();\n      const articlesData = await apiService.getAllTopics();\n      const mediaData = await apiService.getAllMedia();\n      const categoriesData = await apiService.getAllCategories();\n      const tagsData = await apiService.getAllTags();\n      const usersData = await apiService.getAllUsers();\n      const rolesData = await apiService.getAllRoles();\n      \n      // Map API data to internal structure\n      this.locations = locationsData.map(this.convertDbRegionToFrontend.bind(this));\n      this.articles = articlesData.map(this.convertDbTopicToFrontend.bind(this));\n      this.media = mediaData;\n      this.categories = categoriesData;\n      this.tags = tagsData;\n      this.users = usersData;\n      this.roles = rolesData;\n      \n      console.log('Data initialized successfully from API');\n    } catch (error) {\n      console.error('Failed to initialize data from API, using local JSON as fallback:', error);\n      // Fallback to local JSON if API fails\n      await this.loadLocalData();\n    }\n  }\n  \n  async loadLocalData() {\n    try {\n      // Dynamic imports with type attribute\n      const locationsModule = await import('./locations.json', { type: 'json' });\n      const articlesModule = await import('./articles.json', { type: 'json' });\n      const mediaModule = await import('./media.json', { type: 'json' });\n      const categoriesModule = await import('./categories.json', { type: 'json' });\n      const tagsModule = await import('./tags.json', { type: 'json' });\n      const usersModule = await import('./users.json', { type: 'json' });\n      const settingsModule = await import('./settings.json', { type: 'json' });\n      \n      const locationsData = locationsModule.default;\n      const articlesData = articlesModule.default;\n      const mediaData = mediaModule.default;\n      const categoriesData = categoriesModule.default;\n      const tagsData = tagsModule.default;\n      const usersData = usersModule.default;\n      const settingsData = settingsModule.default;\n      \n      this.locations = locationsData.locations;\n      this.locationsMetadata = locationsData.metadata;\n      \n      this.articles = articlesData.articles;\n      this.articlesMetadata = articlesData.metadata;\n      \n      this.media = mediaData.media;\n      this.mediaFolders = mediaData.folders;\n      this.mediaMetadata = mediaData.metadata;\n      \n      this.categories = categoriesData.categories;\n      this.categoriesMetadata = categoriesData.metadata;\n      this.tags = tagsData.tags;\n      this.tagsMetadata = tagsData.metadata;\n      \n      this.users = usersData.users;\n      this.roles = usersData.roles;\n      this.permissions = usersData.permissions;\n      this.rolePermissions = usersData.role_permissions;\n      this.usersMetadata = usersData.metadata;\n      \n      this.websiteSettings = settingsData.website_settings;\n      this.emailSettings = settingsData.email_settings;\n      this.seoSettings = settingsData.seo_settings;\n      this.securitySettings = settingsData.security_settings;\n      this.operationLogs = settingsData.logs.operation_logs;\n      this.errorLogs = settingsData.logs.error_logs;\n      this.settingsMetadata = settingsData.metadata;\n      \n      console.log('Local data loaded successfully as fallback');\n    } catch (error) {\n      console.error('Failed to load local data:', error);\n    }\n  }\n\n  // 辅助方法：将数据库格式的地域转换为前端格式\n  convertDbRegionToFrontend(region) {\n    if (!region) return null;\n    \n    // 解析经纬度\n    let coordinates = { lng: 0, lat: 0 };\n    if (region.location) {\n      const match = region.location.match(/POINT\\((\\d+\\.?\\d*) (\\d+\\.?\\d*)\\)/);\n      if (match) {\n        coordinates = { lng: parseFloat(match[1]), lat: parseFloat(match[2]) };\n      }\n    }\n    \n    return {\n      id: region.region_id,\n      name: { zh: region.region_name },\n      description: { zh: region.description || '' },\n      coordinates: coordinates,\n      population: region.population || null,\n      language: region.language || null,\n      layer: 'country', // 默认值，可根据需要扩展\n      type: 'country', // 默认值，可根据需要扩展\n      tags: [], // 默认值，可根据需要扩展\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n  }\n\n  // 辅助方法：将前端格式的地域转换为数据库格式\n  convertFrontendRegionToDb(location) {\n    return {\n      region_name: location.name.zh,\n      parent_id: location.parent_id || null,\n      location: `POINT(${location.coordinates.lng} ${location.coordinates.lat})`,\n      population: location.population || null,\n      language: location.language || null,\n      description: location.description.zh || ''\n    };\n  }\n\n  // 获取所有地点\n  async getAllLocations() {\n    try {\n      const regions = await apiService.region.getAllRegions();\n      // 转换为前端需要的格式\n      const locations = regions.map(region => this.convertDbRegionToFrontend(region));\n      // 更新本地缓存\n      this.locations = locations;\n      this.locationsMetadata.total_locations = locations.length;\n      return locations;\n    } catch (error) {\n      console.error('获取所有地点失败:', error);\n      return this.locations;\n    }\n  }\n\n  // 根据图层获取地点\n  async getLocationsByLayer(layer) {\n    const locations = await this.getAllLocations();\n    if (!layer || layer === 'all') {\n      return locations;\n    }\n    return locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  async getLocationById(id) {\n    try {\n      const region = await apiService.region.getRegionById(id);\n      if (region) {\n        return this.convertDbRegionToFrontend(region);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取地点 ${id} 失败:`, error);\n      return this.locations.find(location => location.id === id);\n    }\n  }\n\n  // 根据标签获取地点\n  async getLocationsByTag(tag) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  async getLocationsByType(type) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  async searchLocations(query, language = 'zh') {\n    const locations = await this.getAllLocations();\n    const lowerQuery = query.toLowerCase();\n    return locations.filter(location => \n      location.name[language].toLowerCase().includes(lowerQuery) ||\n      location.description[language].toLowerCase().includes(lowerQuery) ||\n      (location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)))\n    );\n  }\n\n  // 添加地点\n  async addLocation(location) {\n    try {\n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(location);\n      const newRegion = await apiService.region.createRegion(regionData);\n      // 转换回前端格式\n      const newLocation = this.convertDbRegionToFrontend(newRegion);\n      // 更新本地缓存\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    } catch (error) {\n      console.error('添加地点失败:', error);\n      // 降级到本地处理\n      const newLocation = {\n        ...location,\n        id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    }\n  }\n\n  // 更新地点\n  async updateLocation(id, updates) {\n    try {\n      // 获取当前地点\n      const currentLocation = await this.getLocationById(id);\n      if (!currentLocation) return null;\n      \n      // 合并更新\n      const updatedLocation = {\n        ...currentLocation,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(updatedLocation);\n      const updatedRegion = await apiService.region.updateRegion(id, regionData);\n      \n      // 转换回前端格式\n      const finalLocation = this.convertDbRegionToFrontend(updatedRegion);\n      \n      // 更新本地缓存\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index !== -1) {\n        this.locations[index] = finalLocation;\n      }\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      \n      return finalLocation;\n    } catch (error) {\n      console.error(`更新地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return null;\n      \n      this.locations[index] = {\n        ...this.locations[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return this.locations[index];\n    }\n  }\n\n  // 删除地点\n  async deleteLocation(id) {\n    try {\n      const success = await apiService.region.deleteRegion(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.locations.findIndex(location => location.id === id);\n        if (index !== -1) {\n          this.locations.splice(index, 1);\n        }\n        this.locationsMetadata.total_locations = this.locations.length;\n        this.locationsMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return false;\n      \n      this.locations.splice(index, 1);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.locationsMetadata;\n  }\n\n  // 获取所有图层类型\n  async getLayers() {\n    const locations = await this.getAllLocations();\n    const layers = [...new Set(locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  async getTypes() {\n    const locations = await this.getAllLocations();\n    const types = [...new Set(locations.map(location => location.type))];\n    return types.sort();\n  }\n\n\n\n  // 辅助方法：将数据库格式的专题转换为前端格式\n  convertDbTopicToFrontend(topic) {\n    if (!topic) return null;\n    \n    return {\n      id: topic.topic_id,\n      title: { zh: topic.title },\n      cover_image: topic.cover_url || '',\n      content: { zh: topic.content },\n      location_id: topic.region_id,\n      author_id: topic.author_id,\n      status: topic.status || '草稿',\n      created_at: topic.create_time || new Date().toISOString(),\n      updated_at: topic.update_time || new Date().toISOString(),\n      tags: [], // 默认值，可根据需要扩展\n      category_id: null // 默认值，可根据需要扩展\n    };\n  }\n\n  // 辅助方法：将前端格式的文章转换为数据库格式\n  convertFrontendArticleToDb(article) {\n    return {\n      title: article.title.zh,\n      cover_url: article.cover_image || '',\n      content: article.content.zh || '',\n      region_id: article.location_id || null,\n      author_id: article.author_id,\n      status: article.status || 'draft'\n    };\n  }\n\n  // 辅助方法：将数据库格式的用户贡献转换为前端格式\n  convertDbContributionToFrontend(contribution) {\n    if (!contribution) return null;\n    \n    return {\n      id: contribution.contribution_id,\n      user_id: contribution.user_id,\n      location_id: contribution.region_id,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || '',\n      status: contribution.status || '待审核',\n      created_at: contribution.create_time || new Date().toISOString(),\n      audit_time: contribution.audit_time || null,\n      auditor_id: contribution.auditor_id || null\n    };\n  }\n\n  // 辅助方法：将前端格式的用户贡献转换为数据库格式\n  convertFrontendContributionToDb(contribution) {\n    return {\n      user_id: contribution.user_id,\n      region_id: contribution.location_id || null,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || ''\n    };\n  }\n\n  // 文章管理相关方法\n  async getAllArticles() {\n    try {\n      const topics = await apiService.topic.getAllTopics();\n      // 转换为前端需要的格式\n      const articles = topics.map(topic => this.convertDbTopicToFrontend(topic));\n      // 更新本地缓存\n      this.articles = articles;\n      this.articlesMetadata.total_articles = articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return articles;\n    } catch (error) {\n      console.error('获取所有文章失败:', error);\n      return this.articles;\n    }\n  }\n\n  async getArticleById(id) {\n    try {\n      const topic = await apiService.topic.getTopicById(id);\n      if (topic) {\n        return this.convertDbTopicToFrontend(topic);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取文章 ${id} 失败:`, error);\n      return this.articles.find(article => article.id === id);\n    }\n  }\n\n  async getArticlesByStatus(status) {\n    const articles = await this.getAllArticles();\n    if (!status) return articles;\n    return articles.filter(article => article.status === status);\n  }\n\n  async getArticlesByAuthor(authorId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.author_id === authorId);\n  }\n\n  async getArticlesByCategory(categoryId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.category_id === categoryId);\n  }\n\n  async getArticlesByTag(tagId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.tags && article.tags.includes(tagId));\n  }\n\n  async searchArticles(query, language = 'zh') {\n    const articles = await this.getAllArticles();\n    const lowerQuery = query.toLowerCase();\n    return articles.filter(article => \n      article.title[language].toLowerCase().includes(lowerQuery) ||\n      article.content[language].toLowerCase().includes(lowerQuery)\n    );\n  }\n\n  async addArticle(article) {\n    try {\n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(article);\n      const newTopic = await apiService.topic.createTopic(topicData);\n      // 转换回前端格式\n      const newArticle = this.convertDbTopicToFrontend(newTopic);\n      // 更新本地缓存\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    } catch (error) {\n      console.error('添加文章失败:', error);\n      // 降级到本地处理\n      const newArticle = {\n        ...article,\n        id: `article_${(this.articles.length + 1).toString().padStart(4, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        status: 'draft'\n      };\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    }\n  }\n\n  async updateArticle(id, updates) {\n    try {\n      // 获取当前文章\n      const currentArticle = await this.getArticleById(id);\n      if (!currentArticle) return null;\n      \n      // 合并更新\n      const updatedArticle = {\n        ...currentArticle,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(updatedArticle);\n      const updatedTopic = await apiService.topic.updateTopic(id, topicData);\n      \n      // 转换回前端格式\n      const finalArticle = this.convertDbTopicToFrontend(updatedTopic);\n      \n      // 更新本地缓存\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index !== -1) {\n        this.articles[index] = finalArticle;\n      }\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      \n      return finalArticle;\n    } catch (error) {\n      console.error(`更新文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return null;\n      \n      this.articles[index] = {\n        ...this.articles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return this.articles[index];\n    }\n  }\n\n  async deleteArticle(id) {\n    try {\n      const success = await apiService.topic.deleteTopic(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.articles.findIndex(article => article.id === id);\n        if (index !== -1) {\n          this.articles.splice(index, 1);\n        }\n        this.articlesMetadata.total_articles = this.articles.length;\n        this.articlesMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return false;\n      \n      this.articles.splice(index, 1);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 用户贡献管理相关方法\n  async getAllUserContributions() {\n    try {\n      const contributions = await apiService.userContribution.getAllContributions();\n      // 转换为前端格式\n      const frontendContributions = contributions.map(contribution => this.convertDbContributionToFrontend(contribution));\n      // 更新本地缓存\n      this.userContributions = frontendContributions;\n      this.userContributionsMetadata.total_contributions = frontendContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContributions;\n    } catch (error) {\n      console.error('获取用户贡献列表失败:', error);\n      return this.userContributions;\n    }\n  }\n\n  async addUserContribution(contribution) {\n    try {\n      // 转换为数据库格式\n      const contributionData = this.convertFrontendContributionToDb(contribution);\n      const newContribution = await apiService.userContribution.createContribution(contributionData);\n      // 转换回前端格式\n      const frontendContribution = this.convertDbContributionToFrontend(newContribution);\n      // 更新本地缓存\n      this.userContributions.push(frontendContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContribution;\n    } catch (error) {\n      console.error('创建用户贡献失败:', error);\n      // 降级到本地处理\n      const newContribution = {\n        ...contribution,\n        id: `contrib_${(this.userContributions.length + 1).toString().padStart(5, '0')}`,\n        created_at: new Date().toISOString(),\n        status: '待审核',\n        audit_time: null,\n        auditor_id: null\n      };\n      this.userContributions.push(newContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return newContribution;\n    }\n  }\n\n  async updateUserContributionStatus(id, status, auditorId) {\n    try {\n      await apiService.userContribution.updateContributionStatus(id, status, auditorId);\n      // 更新本地缓存\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index !== -1) {\n        this.userContributions[index] = {\n          ...this.userContributions[index],\n          status,\n          audit_time: new Date().toISOString(),\n          auditor_id: auditorId\n        };\n        this.userContributionsMetadata.last_updated = new Date().toISOString();\n      }\n      return true;\n    } catch (error) {\n      console.error(`更新贡献状态失败:`, error);\n      // 降级到本地处理\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index === -1) return false;\n      \n      this.userContributions[index] = {\n        ...this.userContributions[index],\n        status,\n        audit_time: new Date().toISOString(),\n        auditor_id: auditorId\n      };\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  async getUserContributionsByStatus(status) {\n    const contributions = await this.getAllUserContributions();\n    if (!status) return contributions;\n    return contributions.filter(contribution => contribution.status === status);\n  }\n\n  async getUserContributionsByUser(userId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.user_id === userId);\n  }\n\n  async getUserContributionsByLocation(locationId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.location_id === locationId);\n  }\n\n  // 媒体管理相关方法\n  getAllMedia() {\n    return this.media;\n  }\n\n  getMediaById(id) {\n    return this.media.find(media => media.id === id);\n  }\n\n  getMediaByType(type) {\n    if (!type) return this.media;\n    return this.media.filter(media => media.type === type);\n  }\n\n  getMediaByFolder(folderId) {\n    return this.media.filter(media => media.folder_id === folderId);\n  }\n\n  addMedia(media) {\n    const newMedia = {\n      ...media,\n      id: `media_${(this.media.length + 1).toString().padStart(4, '0')}`,\n      uploaded_at: new Date().toISOString(),\n      size: media.size || 0\n    };\n    this.media.push(newMedia);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return newMedia;\n  }\n\n  deleteMedia(id) {\n    const index = this.media.findIndex(media => media.id === id);\n    if (index === -1) return false;\n    \n    this.media.splice(index, 1);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return true;\n  }\n\n  getAllMediaFolders() {\n    return this.mediaFolders;\n  }\n\n  addMediaFolder(folder) {\n    const newFolder = {\n      ...folder,\n      id: `folder_${(this.mediaFolders.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString()\n    };\n    this.mediaFolders.push(newFolder);\n    return newFolder;\n  }\n\n  deleteMediaFolder(id) {\n    // 检查文件夹是否为空\n    const hasMedia = this.media.some(media => media.folder_id === id);\n    if (hasMedia) return false;\n    \n    const index = this.mediaFolders.findIndex(folder => folder.id === id);\n    if (index === -1) return false;\n    \n    this.mediaFolders.splice(index, 1);\n    return true;\n  }\n\n  // 分类管理相关方法\n  getAllCategories() {\n    return this.categories;\n  }\n\n  getCategoryById(id) {\n    return this.categories.find(category => category.id === id);\n  }\n\n  getCategoriesByParent(parentId) {\n    return this.categories.filter(category => category.parent_id === parentId);\n  }\n\n  addCategory(category) {\n    const newCategory = {\n      ...category,\n      id: `cat_${(this.categories.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.categories.push(newCategory);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return newCategory;\n  }\n\n  updateCategory(id, updates) {\n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return null;\n    \n    this.categories[index] = {\n      ...this.categories[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    \n    return this.categories[index];\n  }\n\n  deleteCategory(id) {\n    // 检查是否有文章属于该分类\n    const hasArticles = this.articles.some(article => article.category_id === id);\n    if (hasArticles) return false;\n    \n    // 检查是否有子分类\n    const hasChildren = this.categories.some(category => category.parent_id === id);\n    if (hasChildren) return false;\n    \n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return false;\n    \n    this.categories.splice(index, 1);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return true;\n  }\n\n  // 标签管理相关方法\n  getAllTags() {\n    return this.tags;\n  }\n\n  getTagById(id) {\n    return this.tags.find(tag => tag.id === id);\n  }\n\n  addTag(tag) {\n    const newTag = {\n      ...tag,\n      id: `tag_${(this.tags.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      article_count: 0\n    };\n    this.tags.push(newTag);\n    return newTag;\n  }\n\n  updateTag(id, updates) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return null;\n    \n    this.tags[index] = {\n      ...this.tags[index],\n      ...updates\n    };\n    \n    return this.tags[index];\n  }\n\n  deleteTag(id) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return false;\n    \n    // 从所有文章中移除该标签\n    this.articles.forEach(article => {\n      if (article.tags && article.tags.includes(id)) {\n        article.tags = article.tags.filter(tagId => tagId !== id);\n      }\n    });\n    \n    this.tags.splice(index, 1);\n    return true;\n  }\n\n  // 用户管理相关方法\n  async getAllUsers() {\n    try {\n      const users = await apiService.user.getAllUsers();\n      // 更新本地缓存\n      this.users = users;\n      this.usersMetadata.total_users = users.length;\n      return users;\n    } catch (error) {\n      console.error('获取用户列表失败:', error);\n      return this.users;\n    }\n  }\n\n  async getUserById(id) {\n    try {\n      const user = await apiService.user.getUserById(id);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${id} 失败:`, error);\n      return this.users.find(user => user.id === id);\n    }\n  }\n\n  async getUserByUsername(username) {\n    try {\n      const user = await apiService.user.getUserByUsername(username);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${username} 失败:`, error);\n      return this.users.find(user => user.username === username);\n    }\n  }\n\n  async addUser(user) {\n    try {\n      const newUser = await apiService.user.createUser(user);\n      // 更新本地缓存\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    } catch (error) {\n      console.error('创建用户失败:', error);\n      // 降级到本地处理\n      const newUser = {\n        ...user,\n        id: `user_${(this.users.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        status: 'active'\n      };\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    }\n  }\n\n  async updateUser(id, updates) {\n    try {\n      const updatedUser = await apiService.user.updateUser(id, updates);\n      // 更新本地缓存\n      const index = this.users.findIndex(user => user.id === id);\n      if (index !== -1) {\n        this.users[index] = updatedUser;\n      }\n      return updatedUser;\n    } catch (error) {\n      console.error(`更新用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return null;\n      \n      this.users[index] = {\n        ...this.users[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      return this.users[index];\n    }\n  }\n\n  async deleteUser(id) {\n    try {\n      const success = await apiService.user.deleteUser(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.users.findIndex(user => user.id === id);\n        if (index !== -1) {\n          this.users.splice(index, 1);\n          this.usersMetadata.total_users = this.users.length;\n        }\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return false;\n      \n      this.users.splice(index, 1);\n      this.usersMetadata.total_users = this.users.length;\n      return true;\n    }\n  }\n\n  // 权限管理相关方法\n  async getAllRoles() {\n    try {\n      const roles = await apiService.rolePermission.getAllRoles();\n      // 更新本地缓存\n      this.roles = roles;\n      return roles;\n    } catch (error) {\n      console.error('获取角色列表失败:', error);\n      return this.roles;\n    }\n  }\n\n  async getRoleById(id) {\n    try {\n      // 先从本地缓存查找\n      const role = this.roles.find(role => role.id === id);\n      if (role) return role;\n      \n      // 如果本地没有，从API获取\n      return await apiService.rolePermission.getRoleById(id);\n    } catch (error) {\n      console.error(`获取角色 ${id} 失败:`, error);\n      return this.roles.find(role => role.id === id);\n    }\n  }\n\n  async addRole(role) {\n    try {\n      const newRole = await apiService.rolePermission.createRole(role);\n      // 更新本地缓存\n      this.roles.push(newRole);\n      return newRole;\n    } catch (error) {\n      console.error('创建角色失败:', error);\n      // 降级到本地处理\n      const newRole = {\n        ...role,\n        id: `role_${(this.roles.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString()\n      };\n      this.roles.push(newRole);\n      return newRole;\n    }\n  }\n\n  async deleteRole(id) {\n    try {\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n      \n      // 检查是否有用户关联到该角色\n      const users = await this.getAllUsers();\n      const hasUsers = users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      \n      const success = await apiService.rolePermission.deleteRole(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.roles.findIndex(role => role.id === id);\n        if (index !== -1) {\n          this.roles.splice(index, 1);\n        }\n        // 删除相关的权限关联\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n      \n      // 检查是否有用户关联到该角色\n      const hasUsers = this.users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      \n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return false;\n      \n      // 删除相关的权限关联\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      \n      this.roles.splice(index, 1);\n      return true;\n    }\n  }\n\n  async updateRole(id, updates) {\n    try {\n      const updatedRole = await apiService.rolePermission.updateRole(id, updates);\n      // 更新本地缓存\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index !== -1) {\n        this.roles[index] = updatedRole;\n      }\n      return updatedRole;\n    } catch (error) {\n      console.error(`更新角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return null;\n      \n      this.roles[index] = {\n        ...this.roles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      return this.roles[index];\n    }\n  }\n\n  async getAllRolePermissions() {\n    return this.rolePermissions;\n  }\n\n  async updateRolePermissions(roleId, permissionIds) {\n    try {\n      const success = await apiService.rolePermission.updateRolePermissions(roleId, permissionIds);\n      // 更新本地缓存\n      if (success) {\n        // 删除该角色的所有现有权限\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n        \n        // 添加新的权限关联\n        permissionIds.forEach(permissionId => {\n          this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n        });\n      }\n      return success;\n    } catch (error) {\n      console.error(`更新角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      // 删除该角色的所有现有权限\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n      \n      // 添加新的权限关联\n      permissionIds.forEach(permissionId => {\n        this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n      });\n      \n      return true;\n    }\n  }\n\n  async getAllPermissions() {\n    try {\n      const permissions = await apiService.rolePermission.getAllPermissions();\n      // 更新本地缓存\n      this.permissions = permissions;\n      return permissions;\n    } catch (error) {\n      console.error('获取权限列表失败:', error);\n      return this.permissions;\n    }\n  }\n\n  async getPermissionsByRole(roleId) {\n    try {\n      const permissionIds = await apiService.rolePermission.getRolePermissions(roleId);\n      const allPermissions = await this.getAllPermissions();\n      return allPermissions.filter(permission => permissionIds.includes(permission.id));\n    } catch (error) {\n      console.error(`获取角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      const rolePermissionIds = this.rolePermissions.filter(rp => rp.role_id === roleId).map(rp => rp.permission_id);\n      return this.permissions.filter(permission => rolePermissionIds.includes(permission.id));\n    }\n  }\n\n  async assignPermission(roleId, permissionId) {\n    try {\n      // 检查是否已存在该关联\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      const exists = existingPermissions.some(permission => permission.id === permissionId);\n      if (exists) return false;\n      \n      // 更新权限列表\n      const newPermissions = [...existingPermissions.map(p => p.id), permissionId];\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`分配权限失败:`, error);\n      // 降级到本地处理\n      // 检查是否已存在该关联\n      const exists = this.rolePermissions.some(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (exists) return false;\n      \n      this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n      return true;\n    }\n  }\n\n  async removePermission(roleId, permissionId) {\n    try {\n      // 获取当前权限列表\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      // 过滤掉要移除的权限\n      const newPermissions = existingPermissions.map(p => p.id).filter(id => id !== permissionId);\n      // 更新权限列表\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`移除权限失败:`, error);\n      // 降级到本地处理\n      const index = this.rolePermissions.findIndex(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (index === -1) return false;\n      \n      this.rolePermissions.splice(index, 1);\n      return true;\n    }\n  }\n\n  // 系统设置相关方法\n  getWebsiteSettings() {\n    return this.websiteSettings;\n  }\n\n  updateWebsiteSettings(updates) {\n    this.websiteSettings = {\n      ...this.websiteSettings,\n      ...updates\n    };\n    return this.websiteSettings;\n  }\n\n  getEmailSettings() {\n    return this.emailSettings;\n  }\n\n  updateEmailSettings(updates) {\n    this.emailSettings = {\n      ...this.emailSettings,\n      ...updates\n    };\n    return this.emailSettings;\n  }\n\n  getSEOSettings() {\n    return this.seoSettings;\n  }\n\n  updateSEOSettings(updates) {\n    this.seoSettings = {\n      ...this.seoSettings,\n      ...updates\n    };\n    return this.seoSettings;\n  }\n\n  getSecuritySettings() {\n    return this.securitySettings;\n  }\n\n  updateSecuritySettings(updates) {\n    this.securitySettings = {\n      ...this.securitySettings,\n      ...updates\n    };\n    return this.securitySettings;\n  }\n\n  // 日志管理相关方法\n  getAllOperationLogs() {\n    return this.operationLogs;\n  }\n\n  addOperationLog(log) {\n    const newLog = {\n      ...log,\n      id: `log_${(this.operationLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.operationLogs.push(newLog);\n    return newLog;\n  }\n\n  getAllErrorLogs() {\n    return this.errorLogs;\n  }\n\n  addErrorLog(log) {\n    const newLog = {\n      ...log,\n      id: `error_${(this.errorLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.errorLogs.push(newLog);\n    return newLog;\n  }\n\n  // 更新日志（清空日志）\n  clearOperationLogs() {\n    this.operationLogs = [];\n    return true;\n  }\n\n  clearErrorLogs() {\n    this.errorLogs = [];\n    return true;\n  }\n}\n\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}