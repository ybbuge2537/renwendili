{"ast":null,"code":"import locationsData from './locations.json';\nimport articlesData from './articles.json';\nimport mediaData from './media.json';\nimport categoriesData from './categories.json';\nimport tagsData from './tags.json';\nimport usersData from './users.json';\nimport settingsData from './settings.json';\nclass DataManager {\n  constructor() {\n    this.locations = locationsData.locations;\n    this.locationsMetadata = locationsData.metadata;\n\n    // 文章数据\n    this.articles = articlesData.articles;\n    this.articlesMetadata = articlesData.metadata;\n\n    // 媒体数据\n    this.media = mediaData.media;\n    this.mediaFolders = mediaData.folders;\n    this.mediaMetadata = mediaData.metadata;\n\n    // 分类与标签\n    this.categories = categoriesData.categories;\n    this.categoriesMetadata = categoriesData.metadata;\n    this.tags = tagsData.tags;\n    this.tagsMetadata = tagsData.metadata;\n\n    // 用户与权限\n    this.users = usersData.users;\n    this.roles = usersData.roles;\n    this.permissions = usersData.permissions;\n    this.rolePermissions = usersData.role_permissions;\n    this.usersMetadata = usersData.metadata;\n\n    // 系统设置\n    this.websiteSettings = settingsData.website_settings;\n    this.emailSettings = settingsData.email_settings;\n    this.seoSettings = settingsData.seo_settings;\n    this.securitySettings = settingsData.security_settings;\n    this.operationLogs = settingsData.logs.operation_logs;\n    this.errorLogs = settingsData.logs.error_logs;\n    this.settingsMetadata = settingsData.metadata;\n  }\n\n  // 获取所有地点\n  getAllLocations() {\n    return this.locations;\n  }\n\n  // 根据图层获取地点\n  getLocationsByLayer(layer) {\n    if (!layer || layer === 'all') {\n      return this.locations;\n    }\n    return this.locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  getLocationById(id) {\n    return this.locations.find(location => location.id === id);\n  }\n\n  // 根据标签获取地点\n  getLocationsByTag(tag) {\n    return this.locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  getLocationsByType(type) {\n    return this.locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  searchLocations(query, language = 'zh') {\n    const lowerQuery = query.toLowerCase();\n    return this.locations.filter(location => location.name[language].toLowerCase().includes(lowerQuery) || location.description[language].toLowerCase().includes(lowerQuery) || location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)));\n  }\n\n  // 添加地点\n  addLocation(location) {\n    const newLocation = {\n      ...location,\n      id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.locations.push(newLocation);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return newLocation;\n  }\n\n  // 更新地点\n  updateLocation(id, updates) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return null;\n    this.locations[index] = {\n      ...this.locations[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    this.metadata.last_updated = new Date().toISOString();\n    return this.locations[index];\n  }\n\n  // 删除地点\n  deleteLocation(id) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return false;\n    this.locations.splice(index, 1);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return true;\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.metadata;\n  }\n\n  // 获取所有图层类型\n  getLayers() {\n    const layers = [...new Set(this.locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  getTypes() {\n    const types = [...new Set(this.locations.map(location => location.type))];\n    return types.sort();\n  }\n\n  // 获取所有标签\n  getAllTags() {\n    const tags = new Set();\n    this.locations.forEach(location => {\n      if (location.tags) {\n        location.tags.forEach(tag => tags.add(tag));\n      }\n    });\n    return Array.from(tags).sort();\n  }\n}\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;","map":{"version":3,"names":["locationsData","articlesData","mediaData","categoriesData","tagsData","usersData","settingsData","DataManager","constructor","locations","locationsMetadata","metadata","articles","articlesMetadata","media","mediaFolders","folders","mediaMetadata","categories","categoriesMetadata","tags","tagsMetadata","users","roles","permissions","rolePermissions","role_permissions","usersMetadata","websiteSettings","website_settings","emailSettings","email_settings","seoSettings","seo_settings","securitySettings","security_settings","operationLogs","logs","operation_logs","errorLogs","error_logs","settingsMetadata","getAllLocations","getLocationsByLayer","layer","filter","location","getLocationById","id","find","getLocationsByTag","tag","includes","getLocationsByType","type","searchLocations","query","language","lowerQuery","toLowerCase","name","description","some","addLocation","newLocation","length","toString","padStart","created_at","Date","toISOString","updated_at","push","total_locations","last_updated","updateLocation","updates","index","findIndex","deleteLocation","splice","getMetadata","getLayers","layers","Set","map","sort","getTypes","types","getAllTags","forEach","add","Array","from","dataManager"],"sources":["/Volumes/ZHITTAI/xiangmu/renwendil/src/data/dataManager.js"],"sourcesContent":["import locationsData from './locations.json';\nimport articlesData from './articles.json';\nimport mediaData from './media.json';\nimport categoriesData from './categories.json';\nimport tagsData from './tags.json';\nimport usersData from './users.json';\nimport settingsData from './settings.json';\n\nclass DataManager {\n  constructor() {\n    this.locations = locationsData.locations;\n    this.locationsMetadata = locationsData.metadata;\n    \n    // 文章数据\n    this.articles = articlesData.articles;\n    this.articlesMetadata = articlesData.metadata;\n    \n    // 媒体数据\n    this.media = mediaData.media;\n    this.mediaFolders = mediaData.folders;\n    this.mediaMetadata = mediaData.metadata;\n    \n    // 分类与标签\n    this.categories = categoriesData.categories;\n    this.categoriesMetadata = categoriesData.metadata;\n    this.tags = tagsData.tags;\n    this.tagsMetadata = tagsData.metadata;\n    \n    // 用户与权限\n    this.users = usersData.users;\n    this.roles = usersData.roles;\n    this.permissions = usersData.permissions;\n    this.rolePermissions = usersData.role_permissions;\n    this.usersMetadata = usersData.metadata;\n    \n    // 系统设置\n    this.websiteSettings = settingsData.website_settings;\n    this.emailSettings = settingsData.email_settings;\n    this.seoSettings = settingsData.seo_settings;\n    this.securitySettings = settingsData.security_settings;\n    this.operationLogs = settingsData.logs.operation_logs;\n    this.errorLogs = settingsData.logs.error_logs;\n    this.settingsMetadata = settingsData.metadata;\n  }\n\n  // 获取所有地点\n  getAllLocations() {\n    return this.locations;\n  }\n\n  // 根据图层获取地点\n  getLocationsByLayer(layer) {\n    if (!layer || layer === 'all') {\n      return this.locations;\n    }\n    return this.locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  getLocationById(id) {\n    return this.locations.find(location => location.id === id);\n  }\n\n  // 根据标签获取地点\n  getLocationsByTag(tag) {\n    return this.locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  getLocationsByType(type) {\n    return this.locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  searchLocations(query, language = 'zh') {\n    const lowerQuery = query.toLowerCase();\n    return this.locations.filter(location => \n      location.name[language].toLowerCase().includes(lowerQuery) ||\n      location.description[language].toLowerCase().includes(lowerQuery) ||\n      (location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)))\n    );\n  }\n\n  // 添加地点\n  addLocation(location) {\n    const newLocation = {\n      ...location,\n      id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.locations.push(newLocation);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return newLocation;\n  }\n\n  // 更新地点\n  updateLocation(id, updates) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return null;\n    \n    this.locations[index] = {\n      ...this.locations[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    \n    this.metadata.last_updated = new Date().toISOString();\n    return this.locations[index];\n  }\n\n  // 删除地点\n  deleteLocation(id) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return false;\n    \n    this.locations.splice(index, 1);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return true;\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.metadata;\n  }\n\n  // 获取所有图层类型\n  getLayers() {\n    const layers = [...new Set(this.locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  getTypes() {\n    const types = [...new Set(this.locations.map(location => location.type))];\n    return types.sort();\n  }\n\n  // 获取所有标签\n  getAllTags() {\n    const tags = new Set();\n    this.locations.forEach(location => {\n      if (location.tags) {\n        location.tags.forEach(tag => tags.add(tag));\n      }\n    });\n    return Array.from(tags).sort();\n  }\n}\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}