{"ast":null,"code":"import _objectSpread from\"/Volumes/ZHITTAI/xiangmu/renwendil/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// JSON file imports using ES modules\nimport apiService from'../services/apiService.js';class DataManager{constructor(){// Initialize with empty arrays\nthis.locations=[];this.locationsMetadata={};// 文章数据\nthis.articles=[];this.articlesMetadata={};// 媒体数据\nthis.media=[];this.mediaFolders=[];this.mediaMetadata={};// 分类与标签\nthis.categories=[];this.categoriesMetadata={};this.tags=[];this.tagsMetadata={};// 用户与权限\nthis.users=[];this.roles=[];this.permissions=[];this.rolePermissions=[];this.usersMetadata={};// 用户贡献数据\nthis.userContributions=[];this.userContributionsMetadata={total_contributions:0,last_updated:new Date().toISOString()};// 系统设置\nthis.websiteSettings={};this.emailSettings={};this.seoSettings={};this.securitySettings={};this.operationLogs=[];this.errorLogs=[];this.settingsMetadata={};// Initialize data from API\nthis.init();}async init(){try{// Load all data from API services\nconst locationsData=await apiService.getAllRegions();const articlesData=await apiService.getAllTopics();const mediaData=await apiService.getAllMedia();const categoriesData=await apiService.getAllCategories();const tagsData=await apiService.getAllTags();const usersData=await apiService.getAllUsers();const rolesData=await apiService.getAllRoles();// Map API data to internal structure\nthis.locations=locationsData.map(this.convertDbRegionToFrontend.bind(this));this.articles=articlesData.map(this.convertDbTopicToFrontend.bind(this));this.media=mediaData;this.categories=categoriesData;this.tags=tagsData;this.users=usersData;this.roles=rolesData;console.log('Data initialized successfully from API');}catch(error){console.error('Failed to initialize data from API, using local JSON as fallback:',error);// Fallback to local JSON if API fails\nawait this.loadLocalData();}}async loadLocalData(){try{// Load JSON files using dynamic imports\nconst locationsData=(await import('./locations.json')).default;const articlesData=(await import('./articles.json')).default;const mediaData=(await import('./media.json')).default;const categoriesData=(await import('./categories.json')).default;const tagsData=(await import('./tags.json')).default;const usersData=(await import('./users.json')).default;const settingsData=(await import('./settings.json')).default;this.locations=locationsData.locations;this.locationsMetadata=locationsData.metadata;this.articles=articlesData.articles;this.articlesMetadata=articlesData.metadata;this.media=mediaData.media;this.mediaFolders=mediaData.folders;this.mediaMetadata=mediaData.metadata;this.categories=categoriesData.categories;this.categoriesMetadata=categoriesData.metadata;this.tags=tagsData.tags;this.tagsMetadata=tagsData.metadata;this.users=usersData.users;this.roles=usersData.roles;this.permissions=usersData.permissions;this.rolePermissions=usersData.role_permissions;this.usersMetadata=usersData.metadata;this.websiteSettings=settingsData.website_settings;this.emailSettings=settingsData.email_settings;this.seoSettings=settingsData.seo_settings;this.securitySettings=settingsData.security_settings;this.operationLogs=settingsData.logs.operation_logs;this.errorLogs=settingsData.logs.error_logs;this.settingsMetadata=settingsData.metadata;console.log('Local data loaded successfully as fallback');}catch(error){console.error('Failed to load local data:',error);}}// 辅助方法：将数据库格式的地域转换为前端格式\nconvertDbRegionToFrontend(region){if(!region)return null;// 解析经纬度\nlet coordinates={lng:0,lat:0};if(region.location){const match=region.location.match(/POINT\\((\\d+\\.?\\d*) (\\d+\\.?\\d*)\\)/);if(match){coordinates={lng:parseFloat(match[1]),lat:parseFloat(match[2])};}}return{id:region.region_id,name:{zh:region.region_name},description:{zh:region.description||''},coordinates:coordinates,population:region.population||null,language:region.language||null,layer:'country',// 默认值，可根据需要扩展\ntype:'country',// 默认值，可根据需要扩展\ntags:[],// 默认值，可根据需要扩展\ncreated_at:new Date().toISOString(),updated_at:new Date().toISOString()};}// 辅助方法：将前端格式的地域转换为数据库格式\nconvertFrontendRegionToDb(location){return{region_name:location.name.zh,parent_id:location.parent_id||null,location:\"POINT(\".concat(location.coordinates.lng,\" \").concat(location.coordinates.lat,\")\"),population:location.population||null,language:location.language||null,description:location.description.zh||''};}// 获取所有地点\nasync getAllLocations(){try{const regions=await apiService.region.getAllRegions();// 转换为前端需要的格式\nconst locations=regions.map(region=>this.convertDbRegionToFrontend(region));// 更新本地缓存\nthis.locations=locations;this.locationsMetadata.total_locations=locations.length;return locations;}catch(error){console.error('获取所有地点失败:',error);return this.locations;}}// 根据图层获取地点\nasync getLocationsByLayer(layer){const locations=await this.getAllLocations();if(!layer||layer==='all'){return locations;}return locations.filter(location=>location.layer===layer);}// 根据ID获取地点\nasync getLocationById(id){try{const region=await apiService.region.getRegionById(id);if(region){return this.convertDbRegionToFrontend(region);}return null;}catch(error){console.error(\"\\u83B7\\u53D6\\u5730\\u70B9 \".concat(id,\" \\u5931\\u8D25:\"),error);return this.locations.find(location=>location.id===id);}}// 根据标签获取地点\nasync getLocationsByTag(tag){const locations=await this.getAllLocations();return locations.filter(location=>location.tags&&location.tags.includes(tag));}// 根据类型获取地点\nasync getLocationsByType(type){const locations=await this.getAllLocations();return locations.filter(location=>location.type===type);}// 搜索地点\nasync searchLocations(query){let language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'zh';const locations=await this.getAllLocations();const lowerQuery=query.toLowerCase();return locations.filter(location=>location.name[language].toLowerCase().includes(lowerQuery)||location.description[language].toLowerCase().includes(lowerQuery)||location.tags&&location.tags.some(tag=>tag.toLowerCase().includes(lowerQuery)));}// 添加地点\nasync addLocation(location){try{// 转换为数据库格式\nconst regionData=this.convertFrontendRegionToDb(location);const newRegion=await apiService.region.createRegion(regionData);// 转换回前端格式\nconst newLocation=this.convertDbRegionToFrontend(newRegion);// 更新本地缓存\nthis.locations.push(newLocation);this.locationsMetadata.total_locations=this.locations.length;this.locationsMetadata.last_updated=new Date().toISOString();return newLocation;}catch(error){console.error('添加地点失败:',error);// 降级到本地处理\nconst newLocation=_objectSpread(_objectSpread({},location),{},{id:\"loc_\".concat((this.locations.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});this.locations.push(newLocation);this.locationsMetadata.total_locations=this.locations.length;this.locationsMetadata.last_updated=new Date().toISOString();return newLocation;}}// 更新地点\nasync updateLocation(id,updates){try{// 获取当前地点\nconst currentLocation=await this.getLocationById(id);if(!currentLocation)return null;// 合并更新\nconst updatedLocation=_objectSpread(_objectSpread(_objectSpread({},currentLocation),updates),{},{updated_at:new Date().toISOString()});// 转换为数据库格式\nconst regionData=this.convertFrontendRegionToDb(updatedLocation);const updatedRegion=await apiService.region.updateRegion(id,regionData);// 转换回前端格式\nconst finalLocation=this.convertDbRegionToFrontend(updatedRegion);// 更新本地缓存\nconst index=this.locations.findIndex(location=>location.id===id);if(index!==-1){this.locations[index]=finalLocation;}this.locationsMetadata.last_updated=new Date().toISOString();return finalLocation;}catch(error){console.error(\"\\u66F4\\u65B0\\u5730\\u70B9 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.locations.findIndex(location=>location.id===id);if(index===-1)return null;this.locations[index]=_objectSpread(_objectSpread(_objectSpread({},this.locations[index]),updates),{},{updated_at:new Date().toISOString()});this.locationsMetadata.last_updated=new Date().toISOString();return this.locations[index];}}// 删除地点\nasync deleteLocation(id){try{const success=await apiService.region.deleteRegion(id);if(success){// 更新本地缓存\nconst index=this.locations.findIndex(location=>location.id===id);if(index!==-1){this.locations.splice(index,1);}this.locationsMetadata.total_locations=this.locations.length;this.locationsMetadata.last_updated=new Date().toISOString();}return success;}catch(error){console.error(\"\\u5220\\u9664\\u5730\\u70B9 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.locations.findIndex(location=>location.id===id);if(index===-1)return false;this.locations.splice(index,1);this.locationsMetadata.total_locations=this.locations.length;this.locationsMetadata.last_updated=new Date().toISOString();return true;}}// 获取元数据\ngetMetadata(){return this.locationsMetadata;}// 获取所有图层类型\nasync getLayers(){const locations=await this.getAllLocations();const layers=[...new Set(locations.map(location=>location.layer))];return layers.sort();}// 获取所有地点类型\nasync getTypes(){const locations=await this.getAllLocations();const types=[...new Set(locations.map(location=>location.type))];return types.sort();}// 辅助方法：将数据库格式的专题转换为前端格式\nconvertDbTopicToFrontend(topic){if(!topic)return null;return{id:topic.topic_id,title:{zh:topic.title},cover_image:topic.cover_url||'',content:{zh:topic.content},location_id:topic.region_id,author_id:topic.author_id,status:topic.status||'草稿',created_at:topic.create_time||new Date().toISOString(),updated_at:topic.update_time||new Date().toISOString(),tags:[],// 默认值，可根据需要扩展\ncategory_id:null// 默认值，可根据需要扩展\n};}// 辅助方法：将前端格式的文章转换为数据库格式\nconvertFrontendArticleToDb(article){return{title:article.title.zh,cover_url:article.cover_image||'',content:article.content.zh||'',region_id:article.location_id||null,author_id:article.author_id,status:article.status||'draft'};}// 辅助方法：将数据库格式的用户贡献转换为前端格式\nconvertDbContributionToFrontend(contribution){if(!contribution)return null;return{id:contribution.contribution_id,user_id:contribution.user_id,location_id:contribution.region_id,content_type:contribution.content_type,content:contribution.content||'',media_url:contribution.media_url||'',status:contribution.status||'待审核',created_at:contribution.create_time||new Date().toISOString(),audit_time:contribution.audit_time||null,auditor_id:contribution.auditor_id||null};}// 辅助方法：将前端格式的用户贡献转换为数据库格式\nconvertFrontendContributionToDb(contribution){return{user_id:contribution.user_id,region_id:contribution.location_id||null,content_type:contribution.content_type,content:contribution.content||'',media_url:contribution.media_url||''};}// 文章管理相关方法\nasync getAllArticles(){try{const topics=await apiService.topic.getAllTopics();// 转换为前端需要的格式\nconst articles=topics.map(topic=>this.convertDbTopicToFrontend(topic));// 更新本地缓存\nthis.articles=articles;this.articlesMetadata.total_articles=articles.length;this.articlesMetadata.last_updated=new Date().toISOString();return articles;}catch(error){console.error('获取所有文章失败:',error);return this.articles;}}async getArticleById(id){try{const topic=await apiService.topic.getTopicById(id);if(topic){return this.convertDbTopicToFrontend(topic);}return null;}catch(error){console.error(\"\\u83B7\\u53D6\\u6587\\u7AE0 \".concat(id,\" \\u5931\\u8D25:\"),error);return this.articles.find(article=>article.id===id);}}async getArticlesByStatus(status){const articles=await this.getAllArticles();if(!status)return articles;return articles.filter(article=>article.status===status);}async getArticlesByAuthor(authorId){const articles=await this.getAllArticles();return articles.filter(article=>article.author_id===authorId);}async getArticlesByCategory(categoryId){const articles=await this.getAllArticles();return articles.filter(article=>article.category_id===categoryId);}async getArticlesByTag(tagId){const articles=await this.getAllArticles();return articles.filter(article=>article.tags&&article.tags.includes(tagId));}async searchArticles(query){let language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'zh';const articles=await this.getAllArticles();const lowerQuery=query.toLowerCase();return articles.filter(article=>article.title[language].toLowerCase().includes(lowerQuery)||article.content[language].toLowerCase().includes(lowerQuery));}async addArticle(article){try{// 转换为数据库格式\nconst topicData=this.convertFrontendArticleToDb(article);const newTopic=await apiService.topic.createTopic(topicData);// 转换回前端格式\nconst newArticle=this.convertDbTopicToFrontend(newTopic);// 更新本地缓存\nthis.articles.push(newArticle);this.articlesMetadata.total_articles=this.articles.length;this.articlesMetadata.last_updated=new Date().toISOString();return newArticle;}catch(error){console.error('添加文章失败:',error);// 降级到本地处理\nconst newArticle=_objectSpread(_objectSpread({},article),{},{id:\"article_\".concat((this.articles.length+1).toString().padStart(4,'0')),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),status:'draft'});this.articles.push(newArticle);this.articlesMetadata.total_articles=this.articles.length;this.articlesMetadata.last_updated=new Date().toISOString();return newArticle;}}async updateArticle(id,updates){try{// 获取当前文章\nconst currentArticle=await this.getArticleById(id);if(!currentArticle)return null;// 合并更新\nconst updatedArticle=_objectSpread(_objectSpread(_objectSpread({},currentArticle),updates),{},{updated_at:new Date().toISOString()});// 转换为数据库格式\nconst topicData=this.convertFrontendArticleToDb(updatedArticle);const updatedTopic=await apiService.topic.updateTopic(id,topicData);// 转换回前端格式\nconst finalArticle=this.convertDbTopicToFrontend(updatedTopic);// 更新本地缓存\nconst index=this.articles.findIndex(article=>article.id===id);if(index!==-1){this.articles[index]=finalArticle;}this.articlesMetadata.last_updated=new Date().toISOString();return finalArticle;}catch(error){console.error(\"\\u66F4\\u65B0\\u6587\\u7AE0 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.articles.findIndex(article=>article.id===id);if(index===-1)return null;this.articles[index]=_objectSpread(_objectSpread(_objectSpread({},this.articles[index]),updates),{},{updated_at:new Date().toISOString()});this.articlesMetadata.last_updated=new Date().toISOString();return this.articles[index];}}async deleteArticle(id){try{const success=await apiService.topic.deleteTopic(id);if(success){// 更新本地缓存\nconst index=this.articles.findIndex(article=>article.id===id);if(index!==-1){this.articles.splice(index,1);}this.articlesMetadata.total_articles=this.articles.length;this.articlesMetadata.last_updated=new Date().toISOString();}return success;}catch(error){console.error(\"\\u5220\\u9664\\u6587\\u7AE0 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.articles.findIndex(article=>article.id===id);if(index===-1)return false;this.articles.splice(index,1);this.articlesMetadata.total_articles=this.articles.length;this.articlesMetadata.last_updated=new Date().toISOString();return true;}}// 用户贡献管理相关方法\nasync getAllUserContributions(){try{const contributions=await apiService.userContribution.getAllContributions();// 转换为前端格式\nconst frontendContributions=contributions.map(contribution=>this.convertDbContributionToFrontend(contribution));// 更新本地缓存\nthis.userContributions=frontendContributions;this.userContributionsMetadata.total_contributions=frontendContributions.length;this.userContributionsMetadata.last_updated=new Date().toISOString();return frontendContributions;}catch(error){console.error('获取用户贡献列表失败:',error);return this.userContributions;}}async addUserContribution(contribution){try{// 转换为数据库格式\nconst contributionData=this.convertFrontendContributionToDb(contribution);const newContribution=await apiService.userContribution.createContribution(contributionData);// 转换回前端格式\nconst frontendContribution=this.convertDbContributionToFrontend(newContribution);// 更新本地缓存\nthis.userContributions.push(frontendContribution);this.userContributionsMetadata.total_contributions=this.userContributions.length;this.userContributionsMetadata.last_updated=new Date().toISOString();return frontendContribution;}catch(error){console.error('创建用户贡献失败:',error);// 降级到本地处理\nconst newContribution=_objectSpread(_objectSpread({},contribution),{},{id:\"contrib_\".concat((this.userContributions.length+1).toString().padStart(5,'0')),created_at:new Date().toISOString(),status:'待审核',audit_time:null,auditor_id:null});this.userContributions.push(newContribution);this.userContributionsMetadata.total_contributions=this.userContributions.length;this.userContributionsMetadata.last_updated=new Date().toISOString();return newContribution;}}async updateUserContributionStatus(id,status,auditorId){try{await apiService.userContribution.updateContributionStatus(id,status,auditorId);// 更新本地缓存\nconst index=this.userContributions.findIndex(contribution=>contribution.id===id);if(index!==-1){this.userContributions[index]=_objectSpread(_objectSpread({},this.userContributions[index]),{},{status,audit_time:new Date().toISOString(),auditor_id:auditorId});this.userContributionsMetadata.last_updated=new Date().toISOString();}return true;}catch(error){console.error(\"\\u66F4\\u65B0\\u8D21\\u732E\\u72B6\\u6001\\u5931\\u8D25:\",error);// 降级到本地处理\nconst index=this.userContributions.findIndex(contribution=>contribution.id===id);if(index===-1)return false;this.userContributions[index]=_objectSpread(_objectSpread({},this.userContributions[index]),{},{status,audit_time:new Date().toISOString(),auditor_id:auditorId});this.userContributionsMetadata.last_updated=new Date().toISOString();return true;}}async getUserContributionsByStatus(status){const contributions=await this.getAllUserContributions();if(!status)return contributions;return contributions.filter(contribution=>contribution.status===status);}async getUserContributionsByUser(userId){const contributions=await this.getAllUserContributions();return contributions.filter(contribution=>contribution.user_id===userId);}async getUserContributionsByLocation(locationId){const contributions=await this.getAllUserContributions();return contributions.filter(contribution=>contribution.location_id===locationId);}// 媒体管理相关方法\ngetAllMedia(){return this.media;}getMediaById(id){return this.media.find(media=>media.id===id);}getMediaByType(type){if(!type)return this.media;return this.media.filter(media=>media.type===type);}getMediaByFolder(folderId){return this.media.filter(media=>media.folder_id===folderId);}addMedia(media){const newMedia=_objectSpread(_objectSpread({},media),{},{id:\"media_\".concat((this.media.length+1).toString().padStart(4,'0')),uploaded_at:new Date().toISOString(),size:media.size||0});this.media.push(newMedia);this.mediaMetadata.total_files=this.media.length;this.mediaMetadata.last_updated=new Date().toISOString();return newMedia;}deleteMedia(id){const index=this.media.findIndex(media=>media.id===id);if(index===-1)return false;this.media.splice(index,1);this.mediaMetadata.total_files=this.media.length;this.mediaMetadata.last_updated=new Date().toISOString();return true;}getAllMediaFolders(){return this.mediaFolders;}addMediaFolder(folder){const newFolder=_objectSpread(_objectSpread({},folder),{},{id:\"folder_\".concat((this.mediaFolders.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString()});this.mediaFolders.push(newFolder);return newFolder;}deleteMediaFolder(id){// 检查文件夹是否为空\nconst hasMedia=this.media.some(media=>media.folder_id===id);if(hasMedia)return false;const index=this.mediaFolders.findIndex(folder=>folder.id===id);if(index===-1)return false;this.mediaFolders.splice(index,1);return true;}// 分类管理相关方法\ngetAllCategories(){return this.categories;}getCategoryById(id){return this.categories.find(category=>category.id===id);}getCategoriesByParent(parentId){return this.categories.filter(category=>category.parent_id===parentId);}addCategory(category){const newCategory=_objectSpread(_objectSpread({},category),{},{id:\"cat_\".concat((this.categories.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});this.categories.push(newCategory);this.categoriesMetadata.total_categories=this.categories.length;return newCategory;}updateCategory(id,updates){const index=this.categories.findIndex(category=>category.id===id);if(index===-1)return null;this.categories[index]=_objectSpread(_objectSpread(_objectSpread({},this.categories[index]),updates),{},{updated_at:new Date().toISOString()});return this.categories[index];}deleteCategory(id){// 检查是否有文章属于该分类\nconst hasArticles=this.articles.some(article=>article.category_id===id);if(hasArticles)return false;// 检查是否有子分类\nconst hasChildren=this.categories.some(category=>category.parent_id===id);if(hasChildren)return false;const index=this.categories.findIndex(category=>category.id===id);if(index===-1)return false;this.categories.splice(index,1);this.categoriesMetadata.total_categories=this.categories.length;return true;}// 标签管理相关方法\ngetAllTags(){return this.tags;}getTagById(id){return this.tags.find(tag=>tag.id===id);}addTag(tag){const newTag=_objectSpread(_objectSpread({},tag),{},{id:\"tag_\".concat((this.tags.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString(),article_count:0});this.tags.push(newTag);return newTag;}updateTag(id,updates){const index=this.tags.findIndex(tag=>tag.id===id);if(index===-1)return null;this.tags[index]=_objectSpread(_objectSpread({},this.tags[index]),updates);return this.tags[index];}deleteTag(id){const index=this.tags.findIndex(tag=>tag.id===id);if(index===-1)return false;// 从所有文章中移除该标签\nthis.articles.forEach(article=>{if(article.tags&&article.tags.includes(id)){article.tags=article.tags.filter(tagId=>tagId!==id);}});this.tags.splice(index,1);return true;}// 用户管理相关方法\nasync getAllUsers(){try{const users=await apiService.user.getAllUsers();// 更新本地缓存\nthis.users=users;this.usersMetadata.total_users=users.length;return users;}catch(error){console.error('获取用户列表失败:',error);return this.users;}}async getUserById(id){try{const user=await apiService.user.getUserById(id);return user;}catch(error){console.error(\"\\u83B7\\u53D6\\u7528\\u6237 \".concat(id,\" \\u5931\\u8D25:\"),error);return this.users.find(user=>user.id===id);}}async getUserByUsername(username){try{const user=await apiService.user.getUserByUsername(username);return user;}catch(error){console.error(\"\\u83B7\\u53D6\\u7528\\u6237 \".concat(username,\" \\u5931\\u8D25:\"),error);return this.users.find(user=>user.username===username);}}async addUser(user){try{const newUser=await apiService.user.createUser(user);// 更新本地缓存\nthis.users.push(newUser);this.usersMetadata.total_users=this.users.length;return newUser;}catch(error){console.error('创建用户失败:',error);// 降级到本地处理\nconst newUser=_objectSpread(_objectSpread({},user),{},{id:\"user_\".concat((this.users.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString(),status:'active'});this.users.push(newUser);this.usersMetadata.total_users=this.users.length;return newUser;}}async updateUser(id,updates){try{const updatedUser=await apiService.user.updateUser(id,updates);// 更新本地缓存\nconst index=this.users.findIndex(user=>user.id===id);if(index!==-1){this.users[index]=updatedUser;}return updatedUser;}catch(error){console.error(\"\\u66F4\\u65B0\\u7528\\u6237 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.users.findIndex(user=>user.id===id);if(index===-1)return null;this.users[index]=_objectSpread(_objectSpread(_objectSpread({},this.users[index]),updates),{},{updated_at:new Date().toISOString()});return this.users[index];}}async deleteUser(id){try{const success=await apiService.user.deleteUser(id);// 更新本地缓存\nif(success){const index=this.users.findIndex(user=>user.id===id);if(index!==-1){this.users.splice(index,1);this.usersMetadata.total_users=this.users.length;}}return success;}catch(error){console.error(\"\\u5220\\u9664\\u7528\\u6237 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.users.findIndex(user=>user.id===id);if(index===-1)return false;this.users.splice(index,1);this.usersMetadata.total_users=this.users.length;return true;}}// 权限管理相关方法\nasync getAllRoles(){try{const roles=await apiService.rolePermission.getAllRoles();// 更新本地缓存\nthis.roles=roles;return roles;}catch(error){console.error('获取角色列表失败:',error);return this.roles;}}async getRoleById(id){try{// 先从本地缓存查找\nconst role=this.roles.find(role=>role.id===id);if(role)return role;// 如果本地没有，从API获取\nreturn await apiService.rolePermission.getRoleById(id);}catch(error){console.error(\"\\u83B7\\u53D6\\u89D2\\u8272 \".concat(id,\" \\u5931\\u8D25:\"),error);return this.roles.find(role=>role.id===id);}}async addRole(role){try{const newRole=await apiService.rolePermission.createRole(role);// 更新本地缓存\nthis.roles.push(newRole);return newRole;}catch(error){console.error('创建角色失败:',error);// 降级到本地处理\nconst newRole=_objectSpread(_objectSpread({},role),{},{id:\"role_\".concat((this.roles.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString()});this.roles.push(newRole);return newRole;}}async deleteRole(id){try{// 检查是否为超级管理员角色\nif(id==='role_001')return false;// 检查是否有用户关联到该角色\nconst users=await this.getAllUsers();const hasUsers=users.some(user=>user.role_id===id);if(hasUsers)return false;const success=await apiService.rolePermission.deleteRole(id);// 更新本地缓存\nif(success){const index=this.roles.findIndex(role=>role.id===id);if(index!==-1){this.roles.splice(index,1);}// 删除相关的权限关联\nthis.rolePermissions=this.rolePermissions.filter(rp=>rp.role_id!==id);}return success;}catch(error){console.error(\"\\u5220\\u9664\\u89D2\\u8272 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\n// 检查是否为超级管理员角色\nif(id==='role_001')return false;// 检查是否有用户关联到该角色\nconst hasUsers=this.users.some(user=>user.role_id===id);if(hasUsers)return false;const index=this.roles.findIndex(role=>role.id===id);if(index===-1)return false;// 删除相关的权限关联\nthis.rolePermissions=this.rolePermissions.filter(rp=>rp.role_id!==id);this.roles.splice(index,1);return true;}}async updateRole(id,updates){try{const updatedRole=await apiService.rolePermission.updateRole(id,updates);// 更新本地缓存\nconst index=this.roles.findIndex(role=>role.id===id);if(index!==-1){this.roles[index]=updatedRole;}return updatedRole;}catch(error){console.error(\"\\u66F4\\u65B0\\u89D2\\u8272 \".concat(id,\" \\u5931\\u8D25:\"),error);// 降级到本地处理\nconst index=this.roles.findIndex(role=>role.id===id);if(index===-1)return null;this.roles[index]=_objectSpread(_objectSpread(_objectSpread({},this.roles[index]),updates),{},{updated_at:new Date().toISOString()});return this.roles[index];}}async getAllRolePermissions(){return this.rolePermissions;}async updateRolePermissions(roleId,permissionIds){try{const success=await apiService.rolePermission.updateRolePermissions(roleId,permissionIds);// 更新本地缓存\nif(success){// 删除该角色的所有现有权限\nthis.rolePermissions=this.rolePermissions.filter(rp=>rp.role_id!==roleId);// 添加新的权限关联\npermissionIds.forEach(permissionId=>{this.rolePermissions.push({role_id:roleId,permission_id:permissionId});});}return success;}catch(error){console.error(\"\\u66F4\\u65B0\\u89D2\\u8272 \".concat(roleId,\" \\u6743\\u9650\\u5931\\u8D25:\"),error);// 降级到本地处理\n// 删除该角色的所有现有权限\nthis.rolePermissions=this.rolePermissions.filter(rp=>rp.role_id!==roleId);// 添加新的权限关联\npermissionIds.forEach(permissionId=>{this.rolePermissions.push({role_id:roleId,permission_id:permissionId});});return true;}}async getAllPermissions(){try{const permissions=await apiService.rolePermission.getAllPermissions();// 更新本地缓存\nthis.permissions=permissions;return permissions;}catch(error){console.error('获取权限列表失败:',error);return this.permissions;}}async getPermissionsByRole(roleId){try{const permissionIds=await apiService.rolePermission.getRolePermissions(roleId);const allPermissions=await this.getAllPermissions();return allPermissions.filter(permission=>permissionIds.includes(permission.id));}catch(error){console.error(\"\\u83B7\\u53D6\\u89D2\\u8272 \".concat(roleId,\" \\u6743\\u9650\\u5931\\u8D25:\"),error);// 降级到本地处理\nconst rolePermissionIds=this.rolePermissions.filter(rp=>rp.role_id===roleId).map(rp=>rp.permission_id);return this.permissions.filter(permission=>rolePermissionIds.includes(permission.id));}}async assignPermission(roleId,permissionId){try{// 检查是否已存在该关联\nconst existingPermissions=await this.getPermissionsByRole(roleId);const exists=existingPermissions.some(permission=>permission.id===permissionId);if(exists)return false;// 更新权限列表\nconst newPermissions=[...existingPermissions.map(p=>p.id),permissionId];return await this.updateRolePermissions(roleId,newPermissions);}catch(error){console.error(\"\\u5206\\u914D\\u6743\\u9650\\u5931\\u8D25:\",error);// 降级到本地处理\n// 检查是否已存在该关联\nconst exists=this.rolePermissions.some(rp=>rp.role_id===roleId&&rp.permission_id===permissionId);if(exists)return false;this.rolePermissions.push({role_id:roleId,permission_id:permissionId});return true;}}async removePermission(roleId,permissionId){try{// 获取当前权限列表\nconst existingPermissions=await this.getPermissionsByRole(roleId);// 过滤掉要移除的权限\nconst newPermissions=existingPermissions.map(p=>p.id).filter(id=>id!==permissionId);// 更新权限列表\nreturn await this.updateRolePermissions(roleId,newPermissions);}catch(error){console.error(\"\\u79FB\\u9664\\u6743\\u9650\\u5931\\u8D25:\",error);// 降级到本地处理\nconst index=this.rolePermissions.findIndex(rp=>rp.role_id===roleId&&rp.permission_id===permissionId);if(index===-1)return false;this.rolePermissions.splice(index,1);return true;}}// 系统设置相关方法\ngetWebsiteSettings(){return this.websiteSettings;}updateWebsiteSettings(updates){this.websiteSettings=_objectSpread(_objectSpread({},this.websiteSettings),updates);return this.websiteSettings;}getEmailSettings(){return this.emailSettings;}updateEmailSettings(updates){this.emailSettings=_objectSpread(_objectSpread({},this.emailSettings),updates);return this.emailSettings;}getSEOSettings(){return this.seoSettings;}updateSEOSettings(updates){this.seoSettings=_objectSpread(_objectSpread({},this.seoSettings),updates);return this.seoSettings;}getSecuritySettings(){return this.securitySettings;}updateSecuritySettings(updates){this.securitySettings=_objectSpread(_objectSpread({},this.securitySettings),updates);return this.securitySettings;}// 日志管理相关方法\ngetAllOperationLogs(){return this.operationLogs;}addOperationLog(log){const newLog=_objectSpread(_objectSpread({},log),{},{id:\"log_\".concat((this.operationLogs.length+1).toString().padStart(5,'0')),timestamp:new Date().toISOString()});this.operationLogs.push(newLog);return newLog;}getAllErrorLogs(){return this.errorLogs;}addErrorLog(log){const newLog=_objectSpread(_objectSpread({},log),{},{id:\"error_\".concat((this.errorLogs.length+1).toString().padStart(5,'0')),timestamp:new Date().toISOString()});this.errorLogs.push(newLog);return newLog;}// 更新日志（清空日志）\nclearOperationLogs(){this.operationLogs=[];return true;}clearErrorLogs(){this.errorLogs=[];return true;}}// 导出单例实例\nconst dataManager=new DataManager();export default dataManager;","map":{"version":3,"names":["apiService","DataManager","constructor","locations","locationsMetadata","articles","articlesMetadata","media","mediaFolders","mediaMetadata","categories","categoriesMetadata","tags","tagsMetadata","users","roles","permissions","rolePermissions","usersMetadata","userContributions","userContributionsMetadata","total_contributions","last_updated","Date","toISOString","websiteSettings","emailSettings","seoSettings","securitySettings","operationLogs","errorLogs","settingsMetadata","init","locationsData","getAllRegions","articlesData","getAllTopics","mediaData","getAllMedia","categoriesData","getAllCategories","tagsData","getAllTags","usersData","getAllUsers","rolesData","getAllRoles","map","convertDbRegionToFrontend","bind","convertDbTopicToFrontend","console","log","error","loadLocalData","default","settingsData","metadata","folders","role_permissions","website_settings","email_settings","seo_settings","security_settings","logs","operation_logs","error_logs","region","coordinates","lng","lat","location","match","parseFloat","id","region_id","name","zh","region_name","description","population","language","layer","type","created_at","updated_at","convertFrontendRegionToDb","parent_id","concat","getAllLocations","regions","total_locations","length","getLocationsByLayer","filter","getLocationById","getRegionById","find","getLocationsByTag","tag","includes","getLocationsByType","searchLocations","query","arguments","undefined","lowerQuery","toLowerCase","some","addLocation","regionData","newRegion","createRegion","newLocation","push","_objectSpread","toString","padStart","updateLocation","updates","currentLocation","updatedLocation","updatedRegion","updateRegion","finalLocation","index","findIndex","deleteLocation","success","deleteRegion","splice","getMetadata","getLayers","layers","Set","sort","getTypes","types","topic","topic_id","title","cover_image","cover_url","content","location_id","author_id","status","create_time","update_time","category_id","convertFrontendArticleToDb","article","convertDbContributionToFrontend","contribution","contribution_id","user_id","content_type","media_url","audit_time","auditor_id","convertFrontendContributionToDb","getAllArticles","topics","total_articles","getArticleById","getTopicById","getArticlesByStatus","getArticlesByAuthor","authorId","getArticlesByCategory","categoryId","getArticlesByTag","tagId","searchArticles","addArticle","topicData","newTopic","createTopic","newArticle","updateArticle","currentArticle","updatedArticle","updatedTopic","updateTopic","finalArticle","deleteArticle","deleteTopic","getAllUserContributions","contributions","userContribution","getAllContributions","frontendContributions","addUserContribution","contributionData","newContribution","createContribution","frontendContribution","updateUserContributionStatus","auditorId","updateContributionStatus","getUserContributionsByStatus","getUserContributionsByUser","userId","getUserContributionsByLocation","locationId","getMediaById","getMediaByType","getMediaByFolder","folderId","folder_id","addMedia","newMedia","uploaded_at","size","total_files","deleteMedia","getAllMediaFolders","addMediaFolder","folder","newFolder","deleteMediaFolder","hasMedia","getCategoryById","category","getCategoriesByParent","parentId","addCategory","newCategory","total_categories","updateCategory","deleteCategory","hasArticles","hasChildren","getTagById","addTag","newTag","article_count","updateTag","deleteTag","forEach","user","total_users","getUserById","getUserByUsername","username","addUser","newUser","createUser","updateUser","updatedUser","deleteUser","rolePermission","getRoleById","role","addRole","newRole","createRole","deleteRole","hasUsers","role_id","rp","updateRole","updatedRole","getAllRolePermissions","updateRolePermissions","roleId","permissionIds","permissionId","permission_id","getAllPermissions","getPermissionsByRole","getRolePermissions","allPermissions","permission","rolePermissionIds","assignPermission","existingPermissions","exists","newPermissions","p","removePermission","getWebsiteSettings","updateWebsiteSettings","getEmailSettings","updateEmailSettings","getSEOSettings","updateSEOSettings","getSecuritySettings","updateSecuritySettings","getAllOperationLogs","addOperationLog","newLog","timestamp","getAllErrorLogs","addErrorLog","clearOperationLogs","clearErrorLogs","dataManager"],"sources":["/Volumes/ZHITTAI/xiangmu/renwendil/src/data/dataManager.js"],"sourcesContent":["// JSON file imports using ES modules\nimport apiService from '../services/apiService.js';\n\nclass DataManager {\n  constructor() {\n    // Initialize with empty arrays\n    this.locations = [];\n    this.locationsMetadata = {};\n    \n    // 文章数据\n    this.articles = [];\n    this.articlesMetadata = {};\n    \n    // 媒体数据\n    this.media = [];\n    this.mediaFolders = [];\n    this.mediaMetadata = {};\n    \n    // 分类与标签\n    this.categories = [];\n    this.categoriesMetadata = {};\n    this.tags = [];\n    this.tagsMetadata = {};\n    \n    // 用户与权限\n    this.users = [];\n    this.roles = [];\n    this.permissions = [];\n    this.rolePermissions = [];\n    this.usersMetadata = {};\n    \n    // 用户贡献数据\n    this.userContributions = [];\n    this.userContributionsMetadata = { total_contributions: 0, last_updated: new Date().toISOString() };\n    \n    // 系统设置\n    this.websiteSettings = {};\n    this.emailSettings = {};\n    this.seoSettings = {};\n    this.securitySettings = {};\n    this.operationLogs = [];\n    this.errorLogs = [];\n    this.settingsMetadata = {};\n    \n    // Initialize data from API\n    this.init();\n  }\n  \n  async init() {\n    try {\n      // Load all data from API services\n      const locationsData = await apiService.getAllRegions();\n      const articlesData = await apiService.getAllTopics();\n      const mediaData = await apiService.getAllMedia();\n      const categoriesData = await apiService.getAllCategories();\n      const tagsData = await apiService.getAllTags();\n      const usersData = await apiService.getAllUsers();\n      const rolesData = await apiService.getAllRoles();\n      \n      // Map API data to internal structure\n      this.locations = locationsData.map(this.convertDbRegionToFrontend.bind(this));\n      this.articles = articlesData.map(this.convertDbTopicToFrontend.bind(this));\n      this.media = mediaData;\n      this.categories = categoriesData;\n      this.tags = tagsData;\n      this.users = usersData;\n      this.roles = rolesData;\n      \n      console.log('Data initialized successfully from API');\n    } catch (error) {\n      console.error('Failed to initialize data from API, using local JSON as fallback:', error);\n      // Fallback to local JSON if API fails\n      await this.loadLocalData();\n    }\n  }\n  \n  async loadLocalData() {\n    try {\n      // Load JSON files using dynamic imports\n      const locationsData = (await import('./locations.json')).default;\n      const articlesData = (await import('./articles.json')).default;\n      const mediaData = (await import('./media.json')).default;\n      const categoriesData = (await import('./categories.json')).default;\n      const tagsData = (await import('./tags.json')).default;\n      const usersData = (await import('./users.json')).default;\n      const settingsData = (await import('./settings.json')).default;\n      \n      this.locations = locationsData.locations;\n      this.locationsMetadata = locationsData.metadata;\n      \n      this.articles = articlesData.articles;\n      this.articlesMetadata = articlesData.metadata;\n      \n      this.media = mediaData.media;\n      this.mediaFolders = mediaData.folders;\n      this.mediaMetadata = mediaData.metadata;\n      \n      this.categories = categoriesData.categories;\n      this.categoriesMetadata = categoriesData.metadata;\n      this.tags = tagsData.tags;\n      this.tagsMetadata = tagsData.metadata;\n      \n      this.users = usersData.users;\n      this.roles = usersData.roles;\n      this.permissions = usersData.permissions;\n      this.rolePermissions = usersData.role_permissions;\n      this.usersMetadata = usersData.metadata;\n      \n      this.websiteSettings = settingsData.website_settings;\n      this.emailSettings = settingsData.email_settings;\n      this.seoSettings = settingsData.seo_settings;\n      this.securitySettings = settingsData.security_settings;\n      this.operationLogs = settingsData.logs.operation_logs;\n      this.errorLogs = settingsData.logs.error_logs;\n      this.settingsMetadata = settingsData.metadata;\n      \n      console.log('Local data loaded successfully as fallback');\n    } catch (error) {\n      console.error('Failed to load local data:', error);\n    }\n  }\n\n  // 辅助方法：将数据库格式的地域转换为前端格式\n  convertDbRegionToFrontend(region) {\n    if (!region) return null;\n    \n    // 解析经纬度\n    let coordinates = { lng: 0, lat: 0 };\n    if (region.location) {\n      const match = region.location.match(/POINT\\((\\d+\\.?\\d*) (\\d+\\.?\\d*)\\)/);\n      if (match) {\n        coordinates = { lng: parseFloat(match[1]), lat: parseFloat(match[2]) };\n      }\n    }\n    \n    return {\n      id: region.region_id,\n      name: { zh: region.region_name },\n      description: { zh: region.description || '' },\n      coordinates: coordinates,\n      population: region.population || null,\n      language: region.language || null,\n      layer: 'country', // 默认值，可根据需要扩展\n      type: 'country', // 默认值，可根据需要扩展\n      tags: [], // 默认值，可根据需要扩展\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n  }\n\n  // 辅助方法：将前端格式的地域转换为数据库格式\n  convertFrontendRegionToDb(location) {\n    return {\n      region_name: location.name.zh,\n      parent_id: location.parent_id || null,\n      location: `POINT(${location.coordinates.lng} ${location.coordinates.lat})`,\n      population: location.population || null,\n      language: location.language || null,\n      description: location.description.zh || ''\n    };\n  }\n\n  // 获取所有地点\n  async getAllLocations() {\n    try {\n      const regions = await apiService.region.getAllRegions();\n      // 转换为前端需要的格式\n      const locations = regions.map(region => this.convertDbRegionToFrontend(region));\n      // 更新本地缓存\n      this.locations = locations;\n      this.locationsMetadata.total_locations = locations.length;\n      return locations;\n    } catch (error) {\n      console.error('获取所有地点失败:', error);\n      return this.locations;\n    }\n  }\n\n  // 根据图层获取地点\n  async getLocationsByLayer(layer) {\n    const locations = await this.getAllLocations();\n    if (!layer || layer === 'all') {\n      return locations;\n    }\n    return locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  async getLocationById(id) {\n    try {\n      const region = await apiService.region.getRegionById(id);\n      if (region) {\n        return this.convertDbRegionToFrontend(region);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取地点 ${id} 失败:`, error);\n      return this.locations.find(location => location.id === id);\n    }\n  }\n\n  // 根据标签获取地点\n  async getLocationsByTag(tag) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  async getLocationsByType(type) {\n    const locations = await this.getAllLocations();\n    return locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  async searchLocations(query, language = 'zh') {\n    const locations = await this.getAllLocations();\n    const lowerQuery = query.toLowerCase();\n    return locations.filter(location => \n      location.name[language].toLowerCase().includes(lowerQuery) ||\n      location.description[language].toLowerCase().includes(lowerQuery) ||\n      (location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)))\n    );\n  }\n\n  // 添加地点\n  async addLocation(location) {\n    try {\n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(location);\n      const newRegion = await apiService.region.createRegion(regionData);\n      // 转换回前端格式\n      const newLocation = this.convertDbRegionToFrontend(newRegion);\n      // 更新本地缓存\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    } catch (error) {\n      console.error('添加地点失败:', error);\n      // 降级到本地处理\n      const newLocation = {\n        ...location,\n        id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      };\n      this.locations.push(newLocation);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return newLocation;\n    }\n  }\n\n  // 更新地点\n  async updateLocation(id, updates) {\n    try {\n      // 获取当前地点\n      const currentLocation = await this.getLocationById(id);\n      if (!currentLocation) return null;\n      \n      // 合并更新\n      const updatedLocation = {\n        ...currentLocation,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      // 转换为数据库格式\n      const regionData = this.convertFrontendRegionToDb(updatedLocation);\n      const updatedRegion = await apiService.region.updateRegion(id, regionData);\n      \n      // 转换回前端格式\n      const finalLocation = this.convertDbRegionToFrontend(updatedRegion);\n      \n      // 更新本地缓存\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index !== -1) {\n        this.locations[index] = finalLocation;\n      }\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      \n      return finalLocation;\n    } catch (error) {\n      console.error(`更新地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return null;\n      \n      this.locations[index] = {\n        ...this.locations[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return this.locations[index];\n    }\n  }\n\n  // 删除地点\n  async deleteLocation(id) {\n    try {\n      const success = await apiService.region.deleteRegion(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.locations.findIndex(location => location.id === id);\n        if (index !== -1) {\n          this.locations.splice(index, 1);\n        }\n        this.locationsMetadata.total_locations = this.locations.length;\n        this.locationsMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除地点 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.locations.findIndex(location => location.id === id);\n      if (index === -1) return false;\n      \n      this.locations.splice(index, 1);\n      this.locationsMetadata.total_locations = this.locations.length;\n      this.locationsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.locationsMetadata;\n  }\n\n  // 获取所有图层类型\n  async getLayers() {\n    const locations = await this.getAllLocations();\n    const layers = [...new Set(locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  async getTypes() {\n    const locations = await this.getAllLocations();\n    const types = [...new Set(locations.map(location => location.type))];\n    return types.sort();\n  }\n\n\n\n  // 辅助方法：将数据库格式的专题转换为前端格式\n  convertDbTopicToFrontend(topic) {\n    if (!topic) return null;\n    \n    return {\n      id: topic.topic_id,\n      title: { zh: topic.title },\n      cover_image: topic.cover_url || '',\n      content: { zh: topic.content },\n      location_id: topic.region_id,\n      author_id: topic.author_id,\n      status: topic.status || '草稿',\n      created_at: topic.create_time || new Date().toISOString(),\n      updated_at: topic.update_time || new Date().toISOString(),\n      tags: [], // 默认值，可根据需要扩展\n      category_id: null // 默认值，可根据需要扩展\n    };\n  }\n\n  // 辅助方法：将前端格式的文章转换为数据库格式\n  convertFrontendArticleToDb(article) {\n    return {\n      title: article.title.zh,\n      cover_url: article.cover_image || '',\n      content: article.content.zh || '',\n      region_id: article.location_id || null,\n      author_id: article.author_id,\n      status: article.status || 'draft'\n    };\n  }\n\n  // 辅助方法：将数据库格式的用户贡献转换为前端格式\n  convertDbContributionToFrontend(contribution) {\n    if (!contribution) return null;\n    \n    return {\n      id: contribution.contribution_id,\n      user_id: contribution.user_id,\n      location_id: contribution.region_id,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || '',\n      status: contribution.status || '待审核',\n      created_at: contribution.create_time || new Date().toISOString(),\n      audit_time: contribution.audit_time || null,\n      auditor_id: contribution.auditor_id || null\n    };\n  }\n\n  // 辅助方法：将前端格式的用户贡献转换为数据库格式\n  convertFrontendContributionToDb(contribution) {\n    return {\n      user_id: contribution.user_id,\n      region_id: contribution.location_id || null,\n      content_type: contribution.content_type,\n      content: contribution.content || '',\n      media_url: contribution.media_url || ''\n    };\n  }\n\n  // 文章管理相关方法\n  async getAllArticles() {\n    try {\n      const topics = await apiService.topic.getAllTopics();\n      // 转换为前端需要的格式\n      const articles = topics.map(topic => this.convertDbTopicToFrontend(topic));\n      // 更新本地缓存\n      this.articles = articles;\n      this.articlesMetadata.total_articles = articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return articles;\n    } catch (error) {\n      console.error('获取所有文章失败:', error);\n      return this.articles;\n    }\n  }\n\n  async getArticleById(id) {\n    try {\n      const topic = await apiService.topic.getTopicById(id);\n      if (topic) {\n        return this.convertDbTopicToFrontend(topic);\n      }\n      return null;\n    } catch (error) {\n      console.error(`获取文章 ${id} 失败:`, error);\n      return this.articles.find(article => article.id === id);\n    }\n  }\n\n  async getArticlesByStatus(status) {\n    const articles = await this.getAllArticles();\n    if (!status) return articles;\n    return articles.filter(article => article.status === status);\n  }\n\n  async getArticlesByAuthor(authorId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.author_id === authorId);\n  }\n\n  async getArticlesByCategory(categoryId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.category_id === categoryId);\n  }\n\n  async getArticlesByTag(tagId) {\n    const articles = await this.getAllArticles();\n    return articles.filter(article => article.tags && article.tags.includes(tagId));\n  }\n\n  async searchArticles(query, language = 'zh') {\n    const articles = await this.getAllArticles();\n    const lowerQuery = query.toLowerCase();\n    return articles.filter(article => \n      article.title[language].toLowerCase().includes(lowerQuery) ||\n      article.content[language].toLowerCase().includes(lowerQuery)\n    );\n  }\n\n  async addArticle(article) {\n    try {\n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(article);\n      const newTopic = await apiService.topic.createTopic(topicData);\n      // 转换回前端格式\n      const newArticle = this.convertDbTopicToFrontend(newTopic);\n      // 更新本地缓存\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    } catch (error) {\n      console.error('添加文章失败:', error);\n      // 降级到本地处理\n      const newArticle = {\n        ...article,\n        id: `article_${(this.articles.length + 1).toString().padStart(4, '0')}`,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString(),\n        status: 'draft'\n      };\n      this.articles.push(newArticle);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return newArticle;\n    }\n  }\n\n  async updateArticle(id, updates) {\n    try {\n      // 获取当前文章\n      const currentArticle = await this.getArticleById(id);\n      if (!currentArticle) return null;\n      \n      // 合并更新\n      const updatedArticle = {\n        ...currentArticle,\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      // 转换为数据库格式\n      const topicData = this.convertFrontendArticleToDb(updatedArticle);\n      const updatedTopic = await apiService.topic.updateTopic(id, topicData);\n      \n      // 转换回前端格式\n      const finalArticle = this.convertDbTopicToFrontend(updatedTopic);\n      \n      // 更新本地缓存\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index !== -1) {\n        this.articles[index] = finalArticle;\n      }\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      \n      return finalArticle;\n    } catch (error) {\n      console.error(`更新文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return null;\n      \n      this.articles[index] = {\n        ...this.articles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return this.articles[index];\n    }\n  }\n\n  async deleteArticle(id) {\n    try {\n      const success = await apiService.topic.deleteTopic(id);\n      if (success) {\n        // 更新本地缓存\n        const index = this.articles.findIndex(article => article.id === id);\n        if (index !== -1) {\n          this.articles.splice(index, 1);\n        }\n        this.articlesMetadata.total_articles = this.articles.length;\n        this.articlesMetadata.last_updated = new Date().toISOString();\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除文章 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.articles.findIndex(article => article.id === id);\n      if (index === -1) return false;\n      \n      this.articles.splice(index, 1);\n      this.articlesMetadata.total_articles = this.articles.length;\n      this.articlesMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  // 用户贡献管理相关方法\n  async getAllUserContributions() {\n    try {\n      const contributions = await apiService.userContribution.getAllContributions();\n      // 转换为前端格式\n      const frontendContributions = contributions.map(contribution => this.convertDbContributionToFrontend(contribution));\n      // 更新本地缓存\n      this.userContributions = frontendContributions;\n      this.userContributionsMetadata.total_contributions = frontendContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContributions;\n    } catch (error) {\n      console.error('获取用户贡献列表失败:', error);\n      return this.userContributions;\n    }\n  }\n\n  async addUserContribution(contribution) {\n    try {\n      // 转换为数据库格式\n      const contributionData = this.convertFrontendContributionToDb(contribution);\n      const newContribution = await apiService.userContribution.createContribution(contributionData);\n      // 转换回前端格式\n      const frontendContribution = this.convertDbContributionToFrontend(newContribution);\n      // 更新本地缓存\n      this.userContributions.push(frontendContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return frontendContribution;\n    } catch (error) {\n      console.error('创建用户贡献失败:', error);\n      // 降级到本地处理\n      const newContribution = {\n        ...contribution,\n        id: `contrib_${(this.userContributions.length + 1).toString().padStart(5, '0')}`,\n        created_at: new Date().toISOString(),\n        status: '待审核',\n        audit_time: null,\n        auditor_id: null\n      };\n      this.userContributions.push(newContribution);\n      this.userContributionsMetadata.total_contributions = this.userContributions.length;\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return newContribution;\n    }\n  }\n\n  async updateUserContributionStatus(id, status, auditorId) {\n    try {\n      await apiService.userContribution.updateContributionStatus(id, status, auditorId);\n      // 更新本地缓存\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index !== -1) {\n        this.userContributions[index] = {\n          ...this.userContributions[index],\n          status,\n          audit_time: new Date().toISOString(),\n          auditor_id: auditorId\n        };\n        this.userContributionsMetadata.last_updated = new Date().toISOString();\n      }\n      return true;\n    } catch (error) {\n      console.error(`更新贡献状态失败:`, error);\n      // 降级到本地处理\n      const index = this.userContributions.findIndex(contribution => contribution.id === id);\n      if (index === -1) return false;\n      \n      this.userContributions[index] = {\n        ...this.userContributions[index],\n        status,\n        audit_time: new Date().toISOString(),\n        auditor_id: auditorId\n      };\n      this.userContributionsMetadata.last_updated = new Date().toISOString();\n      return true;\n    }\n  }\n\n  async getUserContributionsByStatus(status) {\n    const contributions = await this.getAllUserContributions();\n    if (!status) return contributions;\n    return contributions.filter(contribution => contribution.status === status);\n  }\n\n  async getUserContributionsByUser(userId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.user_id === userId);\n  }\n\n  async getUserContributionsByLocation(locationId) {\n    const contributions = await this.getAllUserContributions();\n    return contributions.filter(contribution => contribution.location_id === locationId);\n  }\n\n  // 媒体管理相关方法\n  getAllMedia() {\n    return this.media;\n  }\n\n  getMediaById(id) {\n    return this.media.find(media => media.id === id);\n  }\n\n  getMediaByType(type) {\n    if (!type) return this.media;\n    return this.media.filter(media => media.type === type);\n  }\n\n  getMediaByFolder(folderId) {\n    return this.media.filter(media => media.folder_id === folderId);\n  }\n\n  addMedia(media) {\n    const newMedia = {\n      ...media,\n      id: `media_${(this.media.length + 1).toString().padStart(4, '0')}`,\n      uploaded_at: new Date().toISOString(),\n      size: media.size || 0\n    };\n    this.media.push(newMedia);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return newMedia;\n  }\n\n  deleteMedia(id) {\n    const index = this.media.findIndex(media => media.id === id);\n    if (index === -1) return false;\n    \n    this.media.splice(index, 1);\n    this.mediaMetadata.total_files = this.media.length;\n    this.mediaMetadata.last_updated = new Date().toISOString();\n    return true;\n  }\n\n  getAllMediaFolders() {\n    return this.mediaFolders;\n  }\n\n  addMediaFolder(folder) {\n    const newFolder = {\n      ...folder,\n      id: `folder_${(this.mediaFolders.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString()\n    };\n    this.mediaFolders.push(newFolder);\n    return newFolder;\n  }\n\n  deleteMediaFolder(id) {\n    // 检查文件夹是否为空\n    const hasMedia = this.media.some(media => media.folder_id === id);\n    if (hasMedia) return false;\n    \n    const index = this.mediaFolders.findIndex(folder => folder.id === id);\n    if (index === -1) return false;\n    \n    this.mediaFolders.splice(index, 1);\n    return true;\n  }\n\n  // 分类管理相关方法\n  getAllCategories() {\n    return this.categories;\n  }\n\n  getCategoryById(id) {\n    return this.categories.find(category => category.id === id);\n  }\n\n  getCategoriesByParent(parentId) {\n    return this.categories.filter(category => category.parent_id === parentId);\n  }\n\n  addCategory(category) {\n    const newCategory = {\n      ...category,\n      id: `cat_${(this.categories.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.categories.push(newCategory);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return newCategory;\n  }\n\n  updateCategory(id, updates) {\n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return null;\n    \n    this.categories[index] = {\n      ...this.categories[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    \n    return this.categories[index];\n  }\n\n  deleteCategory(id) {\n    // 检查是否有文章属于该分类\n    const hasArticles = this.articles.some(article => article.category_id === id);\n    if (hasArticles) return false;\n    \n    // 检查是否有子分类\n    const hasChildren = this.categories.some(category => category.parent_id === id);\n    if (hasChildren) return false;\n    \n    const index = this.categories.findIndex(category => category.id === id);\n    if (index === -1) return false;\n    \n    this.categories.splice(index, 1);\n    this.categoriesMetadata.total_categories = this.categories.length;\n    return true;\n  }\n\n  // 标签管理相关方法\n  getAllTags() {\n    return this.tags;\n  }\n\n  getTagById(id) {\n    return this.tags.find(tag => tag.id === id);\n  }\n\n  addTag(tag) {\n    const newTag = {\n      ...tag,\n      id: `tag_${(this.tags.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      article_count: 0\n    };\n    this.tags.push(newTag);\n    return newTag;\n  }\n\n  updateTag(id, updates) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return null;\n    \n    this.tags[index] = {\n      ...this.tags[index],\n      ...updates\n    };\n    \n    return this.tags[index];\n  }\n\n  deleteTag(id) {\n    const index = this.tags.findIndex(tag => tag.id === id);\n    if (index === -1) return false;\n    \n    // 从所有文章中移除该标签\n    this.articles.forEach(article => {\n      if (article.tags && article.tags.includes(id)) {\n        article.tags = article.tags.filter(tagId => tagId !== id);\n      }\n    });\n    \n    this.tags.splice(index, 1);\n    return true;\n  }\n\n  // 用户管理相关方法\n  async getAllUsers() {\n    try {\n      const users = await apiService.user.getAllUsers();\n      // 更新本地缓存\n      this.users = users;\n      this.usersMetadata.total_users = users.length;\n      return users;\n    } catch (error) {\n      console.error('获取用户列表失败:', error);\n      return this.users;\n    }\n  }\n\n  async getUserById(id) {\n    try {\n      const user = await apiService.user.getUserById(id);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${id} 失败:`, error);\n      return this.users.find(user => user.id === id);\n    }\n  }\n\n  async getUserByUsername(username) {\n    try {\n      const user = await apiService.user.getUserByUsername(username);\n      return user;\n    } catch (error) {\n      console.error(`获取用户 ${username} 失败:`, error);\n      return this.users.find(user => user.username === username);\n    }\n  }\n\n  async addUser(user) {\n    try {\n      const newUser = await apiService.user.createUser(user);\n      // 更新本地缓存\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    } catch (error) {\n      console.error('创建用户失败:', error);\n      // 降级到本地处理\n      const newUser = {\n        ...user,\n        id: `user_${(this.users.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString(),\n        status: 'active'\n      };\n      this.users.push(newUser);\n      this.usersMetadata.total_users = this.users.length;\n      return newUser;\n    }\n  }\n\n  async updateUser(id, updates) {\n    try {\n      const updatedUser = await apiService.user.updateUser(id, updates);\n      // 更新本地缓存\n      const index = this.users.findIndex(user => user.id === id);\n      if (index !== -1) {\n        this.users[index] = updatedUser;\n      }\n      return updatedUser;\n    } catch (error) {\n      console.error(`更新用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return null;\n      \n      this.users[index] = {\n        ...this.users[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      return this.users[index];\n    }\n  }\n\n  async deleteUser(id) {\n    try {\n      const success = await apiService.user.deleteUser(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.users.findIndex(user => user.id === id);\n        if (index !== -1) {\n          this.users.splice(index, 1);\n          this.usersMetadata.total_users = this.users.length;\n        }\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除用户 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.users.findIndex(user => user.id === id);\n      if (index === -1) return false;\n      \n      this.users.splice(index, 1);\n      this.usersMetadata.total_users = this.users.length;\n      return true;\n    }\n  }\n\n  // 权限管理相关方法\n  async getAllRoles() {\n    try {\n      const roles = await apiService.rolePermission.getAllRoles();\n      // 更新本地缓存\n      this.roles = roles;\n      return roles;\n    } catch (error) {\n      console.error('获取角色列表失败:', error);\n      return this.roles;\n    }\n  }\n\n  async getRoleById(id) {\n    try {\n      // 先从本地缓存查找\n      const role = this.roles.find(role => role.id === id);\n      if (role) return role;\n      \n      // 如果本地没有，从API获取\n      return await apiService.rolePermission.getRoleById(id);\n    } catch (error) {\n      console.error(`获取角色 ${id} 失败:`, error);\n      return this.roles.find(role => role.id === id);\n    }\n  }\n\n  async addRole(role) {\n    try {\n      const newRole = await apiService.rolePermission.createRole(role);\n      // 更新本地缓存\n      this.roles.push(newRole);\n      return newRole;\n    } catch (error) {\n      console.error('创建角色失败:', error);\n      // 降级到本地处理\n      const newRole = {\n        ...role,\n        id: `role_${(this.roles.length + 1).toString().padStart(3, '0')}`,\n        created_at: new Date().toISOString()\n      };\n      this.roles.push(newRole);\n      return newRole;\n    }\n  }\n\n  async deleteRole(id) {\n    try {\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n      \n      // 检查是否有用户关联到该角色\n      const users = await this.getAllUsers();\n      const hasUsers = users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      \n      const success = await apiService.rolePermission.deleteRole(id);\n      // 更新本地缓存\n      if (success) {\n        const index = this.roles.findIndex(role => role.id === id);\n        if (index !== -1) {\n          this.roles.splice(index, 1);\n        }\n        // 删除相关的权限关联\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      }\n      return success;\n    } catch (error) {\n      console.error(`删除角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      // 检查是否为超级管理员角色\n      if (id === 'role_001') return false;\n      \n      // 检查是否有用户关联到该角色\n      const hasUsers = this.users.some(user => user.role_id === id);\n      if (hasUsers) return false;\n      \n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return false;\n      \n      // 删除相关的权限关联\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== id);\n      \n      this.roles.splice(index, 1);\n      return true;\n    }\n  }\n\n  async updateRole(id, updates) {\n    try {\n      const updatedRole = await apiService.rolePermission.updateRole(id, updates);\n      // 更新本地缓存\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index !== -1) {\n        this.roles[index] = updatedRole;\n      }\n      return updatedRole;\n    } catch (error) {\n      console.error(`更新角色 ${id} 失败:`, error);\n      // 降级到本地处理\n      const index = this.roles.findIndex(role => role.id === id);\n      if (index === -1) return null;\n      \n      this.roles[index] = {\n        ...this.roles[index],\n        ...updates,\n        updated_at: new Date().toISOString()\n      };\n      \n      return this.roles[index];\n    }\n  }\n\n  async getAllRolePermissions() {\n    return this.rolePermissions;\n  }\n\n  async updateRolePermissions(roleId, permissionIds) {\n    try {\n      const success = await apiService.rolePermission.updateRolePermissions(roleId, permissionIds);\n      // 更新本地缓存\n      if (success) {\n        // 删除该角色的所有现有权限\n        this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n        \n        // 添加新的权限关联\n        permissionIds.forEach(permissionId => {\n          this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n        });\n      }\n      return success;\n    } catch (error) {\n      console.error(`更新角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      // 删除该角色的所有现有权限\n      this.rolePermissions = this.rolePermissions.filter(rp => rp.role_id !== roleId);\n      \n      // 添加新的权限关联\n      permissionIds.forEach(permissionId => {\n        this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n      });\n      \n      return true;\n    }\n  }\n\n  async getAllPermissions() {\n    try {\n      const permissions = await apiService.rolePermission.getAllPermissions();\n      // 更新本地缓存\n      this.permissions = permissions;\n      return permissions;\n    } catch (error) {\n      console.error('获取权限列表失败:', error);\n      return this.permissions;\n    }\n  }\n\n  async getPermissionsByRole(roleId) {\n    try {\n      const permissionIds = await apiService.rolePermission.getRolePermissions(roleId);\n      const allPermissions = await this.getAllPermissions();\n      return allPermissions.filter(permission => permissionIds.includes(permission.id));\n    } catch (error) {\n      console.error(`获取角色 ${roleId} 权限失败:`, error);\n      // 降级到本地处理\n      const rolePermissionIds = this.rolePermissions.filter(rp => rp.role_id === roleId).map(rp => rp.permission_id);\n      return this.permissions.filter(permission => rolePermissionIds.includes(permission.id));\n    }\n  }\n\n  async assignPermission(roleId, permissionId) {\n    try {\n      // 检查是否已存在该关联\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      const exists = existingPermissions.some(permission => permission.id === permissionId);\n      if (exists) return false;\n      \n      // 更新权限列表\n      const newPermissions = [...existingPermissions.map(p => p.id), permissionId];\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`分配权限失败:`, error);\n      // 降级到本地处理\n      // 检查是否已存在该关联\n      const exists = this.rolePermissions.some(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (exists) return false;\n      \n      this.rolePermissions.push({ role_id: roleId, permission_id: permissionId });\n      return true;\n    }\n  }\n\n  async removePermission(roleId, permissionId) {\n    try {\n      // 获取当前权限列表\n      const existingPermissions = await this.getPermissionsByRole(roleId);\n      // 过滤掉要移除的权限\n      const newPermissions = existingPermissions.map(p => p.id).filter(id => id !== permissionId);\n      // 更新权限列表\n      return await this.updateRolePermissions(roleId, newPermissions);\n    } catch (error) {\n      console.error(`移除权限失败:`, error);\n      // 降级到本地处理\n      const index = this.rolePermissions.findIndex(rp => rp.role_id === roleId && rp.permission_id === permissionId);\n      if (index === -1) return false;\n      \n      this.rolePermissions.splice(index, 1);\n      return true;\n    }\n  }\n\n  // 系统设置相关方法\n  getWebsiteSettings() {\n    return this.websiteSettings;\n  }\n\n  updateWebsiteSettings(updates) {\n    this.websiteSettings = {\n      ...this.websiteSettings,\n      ...updates\n    };\n    return this.websiteSettings;\n  }\n\n  getEmailSettings() {\n    return this.emailSettings;\n  }\n\n  updateEmailSettings(updates) {\n    this.emailSettings = {\n      ...this.emailSettings,\n      ...updates\n    };\n    return this.emailSettings;\n  }\n\n  getSEOSettings() {\n    return this.seoSettings;\n  }\n\n  updateSEOSettings(updates) {\n    this.seoSettings = {\n      ...this.seoSettings,\n      ...updates\n    };\n    return this.seoSettings;\n  }\n\n  getSecuritySettings() {\n    return this.securitySettings;\n  }\n\n  updateSecuritySettings(updates) {\n    this.securitySettings = {\n      ...this.securitySettings,\n      ...updates\n    };\n    return this.securitySettings;\n  }\n\n  // 日志管理相关方法\n  getAllOperationLogs() {\n    return this.operationLogs;\n  }\n\n  addOperationLog(log) {\n    const newLog = {\n      ...log,\n      id: `log_${(this.operationLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.operationLogs.push(newLog);\n    return newLog;\n  }\n\n  getAllErrorLogs() {\n    return this.errorLogs;\n  }\n\n  addErrorLog(log) {\n    const newLog = {\n      ...log,\n      id: `error_${(this.errorLogs.length + 1).toString().padStart(5, '0')}`,\n      timestamp: new Date().toISOString()\n    };\n    this.errorLogs.push(newLog);\n    return newLog;\n  }\n\n  // 更新日志（清空日志）\n  clearOperationLogs() {\n    this.operationLogs = [];\n    return true;\n  }\n\n  clearErrorLogs() {\n    this.errorLogs = [];\n    return true;\n  }\n}\n\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;\n"],"mappings":"uHAAA;AACA,MAAO,CAAAA,UAAU,KAAM,2BAA2B,CAElD,KAAM,CAAAC,WAAY,CAChBC,WAAWA,CAAA,CAAG,CACZ;AACA,IAAI,CAACC,SAAS,CAAG,EAAE,CACnB,IAAI,CAACC,iBAAiB,CAAG,CAAC,CAAC,CAE3B;AACA,IAAI,CAACC,QAAQ,CAAG,EAAE,CAClB,IAAI,CAACC,gBAAgB,CAAG,CAAC,CAAC,CAE1B;AACA,IAAI,CAACC,KAAK,CAAG,EAAE,CACf,IAAI,CAACC,YAAY,CAAG,EAAE,CACtB,IAAI,CAACC,aAAa,CAAG,CAAC,CAAC,CAEvB;AACA,IAAI,CAACC,UAAU,CAAG,EAAE,CACpB,IAAI,CAACC,kBAAkB,CAAG,CAAC,CAAC,CAC5B,IAAI,CAACC,IAAI,CAAG,EAAE,CACd,IAAI,CAACC,YAAY,CAAG,CAAC,CAAC,CAEtB;AACA,IAAI,CAACC,KAAK,CAAG,EAAE,CACf,IAAI,CAACC,KAAK,CAAG,EAAE,CACf,IAAI,CAACC,WAAW,CAAG,EAAE,CACrB,IAAI,CAACC,eAAe,CAAG,EAAE,CACzB,IAAI,CAACC,aAAa,CAAG,CAAC,CAAC,CAEvB;AACA,IAAI,CAACC,iBAAiB,CAAG,EAAE,CAC3B,IAAI,CAACC,yBAAyB,CAAG,CAAEC,mBAAmB,CAAE,CAAC,CAAEC,YAAY,CAAE,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAE,CAAC,CAEnG;AACA,IAAI,CAACC,eAAe,CAAG,CAAC,CAAC,CACzB,IAAI,CAACC,aAAa,CAAG,CAAC,CAAC,CACvB,IAAI,CAACC,WAAW,CAAG,CAAC,CAAC,CACrB,IAAI,CAACC,gBAAgB,CAAG,CAAC,CAAC,CAC1B,IAAI,CAACC,aAAa,CAAG,EAAE,CACvB,IAAI,CAACC,SAAS,CAAG,EAAE,CACnB,IAAI,CAACC,gBAAgB,CAAG,CAAC,CAAC,CAE1B;AACA,IAAI,CAACC,IAAI,CAAC,CAAC,CACb,CAEA,KAAM,CAAAA,IAAIA,CAAA,CAAG,CACX,GAAI,CACF;AACA,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAAjC,UAAU,CAACkC,aAAa,CAAC,CAAC,CACtD,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAnC,UAAU,CAACoC,YAAY,CAAC,CAAC,CACpD,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAArC,UAAU,CAACsC,WAAW,CAAC,CAAC,CAChD,KAAM,CAAAC,cAAc,CAAG,KAAM,CAAAvC,UAAU,CAACwC,gBAAgB,CAAC,CAAC,CAC1D,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAzC,UAAU,CAAC0C,UAAU,CAAC,CAAC,CAC9C,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAA3C,UAAU,CAAC4C,WAAW,CAAC,CAAC,CAChD,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAA7C,UAAU,CAAC8C,WAAW,CAAC,CAAC,CAEhD;AACA,IAAI,CAAC3C,SAAS,CAAG8B,aAAa,CAACc,GAAG,CAAC,IAAI,CAACC,yBAAyB,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC,CAC7E,IAAI,CAAC5C,QAAQ,CAAG8B,YAAY,CAACY,GAAG,CAAC,IAAI,CAACG,wBAAwB,CAACD,IAAI,CAAC,IAAI,CAAC,CAAC,CAC1E,IAAI,CAAC1C,KAAK,CAAG8B,SAAS,CACtB,IAAI,CAAC3B,UAAU,CAAG6B,cAAc,CAChC,IAAI,CAAC3B,IAAI,CAAG6B,QAAQ,CACpB,IAAI,CAAC3B,KAAK,CAAG6B,SAAS,CACtB,IAAI,CAAC5B,KAAK,CAAG8B,SAAS,CAEtBM,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC,CACvD,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,mEAAmE,CAAEA,KAAK,CAAC,CACzF;AACA,KAAM,KAAI,CAACC,aAAa,CAAC,CAAC,CAC5B,CACF,CAEA,KAAM,CAAAA,aAAaA,CAAA,CAAG,CACpB,GAAI,CACF;AACA,KAAM,CAAArB,aAAa,CAAG,CAAC,KAAM,OAAM,CAAC,kBAAkB,CAAC,EAAEsB,OAAO,CAChE,KAAM,CAAApB,YAAY,CAAG,CAAC,KAAM,OAAM,CAAC,iBAAiB,CAAC,EAAEoB,OAAO,CAC9D,KAAM,CAAAlB,SAAS,CAAG,CAAC,KAAM,OAAM,CAAC,cAAc,CAAC,EAAEkB,OAAO,CACxD,KAAM,CAAAhB,cAAc,CAAG,CAAC,KAAM,OAAM,CAAC,mBAAmB,CAAC,EAAEgB,OAAO,CAClE,KAAM,CAAAd,QAAQ,CAAG,CAAC,KAAM,OAAM,CAAC,aAAa,CAAC,EAAEc,OAAO,CACtD,KAAM,CAAAZ,SAAS,CAAG,CAAC,KAAM,OAAM,CAAC,cAAc,CAAC,EAAEY,OAAO,CACxD,KAAM,CAAAC,YAAY,CAAG,CAAC,KAAM,OAAM,CAAC,iBAAiB,CAAC,EAAED,OAAO,CAE9D,IAAI,CAACpD,SAAS,CAAG8B,aAAa,CAAC9B,SAAS,CACxC,IAAI,CAACC,iBAAiB,CAAG6B,aAAa,CAACwB,QAAQ,CAE/C,IAAI,CAACpD,QAAQ,CAAG8B,YAAY,CAAC9B,QAAQ,CACrC,IAAI,CAACC,gBAAgB,CAAG6B,YAAY,CAACsB,QAAQ,CAE7C,IAAI,CAAClD,KAAK,CAAG8B,SAAS,CAAC9B,KAAK,CAC5B,IAAI,CAACC,YAAY,CAAG6B,SAAS,CAACqB,OAAO,CACrC,IAAI,CAACjD,aAAa,CAAG4B,SAAS,CAACoB,QAAQ,CAEvC,IAAI,CAAC/C,UAAU,CAAG6B,cAAc,CAAC7B,UAAU,CAC3C,IAAI,CAACC,kBAAkB,CAAG4B,cAAc,CAACkB,QAAQ,CACjD,IAAI,CAAC7C,IAAI,CAAG6B,QAAQ,CAAC7B,IAAI,CACzB,IAAI,CAACC,YAAY,CAAG4B,QAAQ,CAACgB,QAAQ,CAErC,IAAI,CAAC3C,KAAK,CAAG6B,SAAS,CAAC7B,KAAK,CAC5B,IAAI,CAACC,KAAK,CAAG4B,SAAS,CAAC5B,KAAK,CAC5B,IAAI,CAACC,WAAW,CAAG2B,SAAS,CAAC3B,WAAW,CACxC,IAAI,CAACC,eAAe,CAAG0B,SAAS,CAACgB,gBAAgB,CACjD,IAAI,CAACzC,aAAa,CAAGyB,SAAS,CAACc,QAAQ,CAEvC,IAAI,CAAChC,eAAe,CAAG+B,YAAY,CAACI,gBAAgB,CACpD,IAAI,CAAClC,aAAa,CAAG8B,YAAY,CAACK,cAAc,CAChD,IAAI,CAAClC,WAAW,CAAG6B,YAAY,CAACM,YAAY,CAC5C,IAAI,CAAClC,gBAAgB,CAAG4B,YAAY,CAACO,iBAAiB,CACtD,IAAI,CAAClC,aAAa,CAAG2B,YAAY,CAACQ,IAAI,CAACC,cAAc,CACrD,IAAI,CAACnC,SAAS,CAAG0B,YAAY,CAACQ,IAAI,CAACE,UAAU,CAC7C,IAAI,CAACnC,gBAAgB,CAAGyB,YAAY,CAACC,QAAQ,CAE7CN,OAAO,CAACC,GAAG,CAAC,4CAA4C,CAAC,CAC3D,CAAE,MAAOC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,4BAA4B,CAAEA,KAAK,CAAC,CACpD,CACF,CAEA;AACAL,yBAAyBA,CAACmB,MAAM,CAAE,CAChC,GAAI,CAACA,MAAM,CAAE,MAAO,KAAI,CAExB;AACA,GAAI,CAAAC,WAAW,CAAG,CAAEC,GAAG,CAAE,CAAC,CAAEC,GAAG,CAAE,CAAE,CAAC,CACpC,GAAIH,MAAM,CAACI,QAAQ,CAAE,CACnB,KAAM,CAAAC,KAAK,CAAGL,MAAM,CAACI,QAAQ,CAACC,KAAK,CAAC,kCAAkC,CAAC,CACvE,GAAIA,KAAK,CAAE,CACTJ,WAAW,CAAG,CAAEC,GAAG,CAAEI,UAAU,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC,CAAEF,GAAG,CAAEG,UAAU,CAACD,KAAK,CAAC,CAAC,CAAC,CAAE,CAAC,CACxE,CACF,CAEA,MAAO,CACLE,EAAE,CAAEP,MAAM,CAACQ,SAAS,CACpBC,IAAI,CAAE,CAAEC,EAAE,CAAEV,MAAM,CAACW,WAAY,CAAC,CAChCC,WAAW,CAAE,CAAEF,EAAE,CAAEV,MAAM,CAACY,WAAW,EAAI,EAAG,CAAC,CAC7CX,WAAW,CAAEA,WAAW,CACxBY,UAAU,CAAEb,MAAM,CAACa,UAAU,EAAI,IAAI,CACrCC,QAAQ,CAAEd,MAAM,CAACc,QAAQ,EAAI,IAAI,CACjCC,KAAK,CAAE,SAAS,CAAE;AAClBC,IAAI,CAAE,SAAS,CAAE;AACjBvE,IAAI,CAAE,EAAE,CAAE;AACVwE,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC6D,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CACrC,CAAC,CACH,CAEA;AACA8D,yBAAyBA,CAACf,QAAQ,CAAE,CAClC,MAAO,CACLO,WAAW,CAAEP,QAAQ,CAACK,IAAI,CAACC,EAAE,CAC7BU,SAAS,CAAEhB,QAAQ,CAACgB,SAAS,EAAI,IAAI,CACrChB,QAAQ,UAAAiB,MAAA,CAAWjB,QAAQ,CAACH,WAAW,CAACC,GAAG,MAAAmB,MAAA,CAAIjB,QAAQ,CAACH,WAAW,CAACE,GAAG,KAAG,CAC1EU,UAAU,CAAET,QAAQ,CAACS,UAAU,EAAI,IAAI,CACvCC,QAAQ,CAAEV,QAAQ,CAACU,QAAQ,EAAI,IAAI,CACnCF,WAAW,CAAER,QAAQ,CAACQ,WAAW,CAACF,EAAE,EAAI,EAC1C,CAAC,CACH,CAEA;AACA,KAAM,CAAAY,eAAeA,CAAA,CAAG,CACtB,GAAI,CACF,KAAM,CAAAC,OAAO,CAAG,KAAM,CAAA1F,UAAU,CAACmE,MAAM,CAACjC,aAAa,CAAC,CAAC,CACvD;AACA,KAAM,CAAA/B,SAAS,CAAGuF,OAAO,CAAC3C,GAAG,CAACoB,MAAM,EAAI,IAAI,CAACnB,yBAAyB,CAACmB,MAAM,CAAC,CAAC,CAC/E;AACA,IAAI,CAAChE,SAAS,CAAGA,SAAS,CAC1B,IAAI,CAACC,iBAAiB,CAACuF,eAAe,CAAGxF,SAAS,CAACyF,MAAM,CACzD,MAAO,CAAAzF,SAAS,CAClB,CAAE,MAAOkD,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,MAAO,KAAI,CAAClD,SAAS,CACvB,CACF,CAEA;AACA,KAAM,CAAA0F,mBAAmBA,CAACX,KAAK,CAAE,CAC/B,KAAM,CAAA/E,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,GAAI,CAACP,KAAK,EAAIA,KAAK,GAAK,KAAK,CAAE,CAC7B,MAAO,CAAA/E,SAAS,CAClB,CACA,MAAO,CAAAA,SAAS,CAAC2F,MAAM,CAACvB,QAAQ,EAAIA,QAAQ,CAACW,KAAK,GAAKA,KAAK,CAAC,CAC/D,CAEA;AACA,KAAM,CAAAa,eAAeA,CAACrB,EAAE,CAAE,CACxB,GAAI,CACF,KAAM,CAAAP,MAAM,CAAG,KAAM,CAAAnE,UAAU,CAACmE,MAAM,CAAC6B,aAAa,CAACtB,EAAE,CAAC,CACxD,GAAIP,MAAM,CAAE,CACV,MAAO,KAAI,CAACnB,yBAAyB,CAACmB,MAAM,CAAC,CAC/C,CACA,MAAO,KAAI,CACb,CAAE,MAAOd,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC,MAAO,KAAI,CAAClD,SAAS,CAAC8F,IAAI,CAAC1B,QAAQ,EAAIA,QAAQ,CAACG,EAAE,GAAKA,EAAE,CAAC,CAC5D,CACF,CAEA;AACA,KAAM,CAAAwB,iBAAiBA,CAACC,GAAG,CAAE,CAC3B,KAAM,CAAAhG,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,MAAO,CAAAtF,SAAS,CAAC2F,MAAM,CAACvB,QAAQ,EAAIA,QAAQ,CAAC3D,IAAI,EAAI2D,QAAQ,CAAC3D,IAAI,CAACwF,QAAQ,CAACD,GAAG,CAAC,CAAC,CACnF,CAEA;AACA,KAAM,CAAAE,kBAAkBA,CAAClB,IAAI,CAAE,CAC7B,KAAM,CAAAhF,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,MAAO,CAAAtF,SAAS,CAAC2F,MAAM,CAACvB,QAAQ,EAAIA,QAAQ,CAACY,IAAI,GAAKA,IAAI,CAAC,CAC7D,CAEA;AACA,KAAM,CAAAmB,eAAeA,CAACC,KAAK,CAAmB,IAAjB,CAAAtB,QAAQ,CAAAuB,SAAA,CAAAZ,MAAA,IAAAY,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,IAAI,CAC1C,KAAM,CAAArG,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,KAAM,CAAAiB,UAAU,CAAGH,KAAK,CAACI,WAAW,CAAC,CAAC,CACtC,MAAO,CAAAxG,SAAS,CAAC2F,MAAM,CAACvB,QAAQ,EAC9BA,QAAQ,CAACK,IAAI,CAACK,QAAQ,CAAC,CAAC0B,WAAW,CAAC,CAAC,CAACP,QAAQ,CAACM,UAAU,CAAC,EAC1DnC,QAAQ,CAACQ,WAAW,CAACE,QAAQ,CAAC,CAAC0B,WAAW,CAAC,CAAC,CAACP,QAAQ,CAACM,UAAU,CAAC,EAChEnC,QAAQ,CAAC3D,IAAI,EAAI2D,QAAQ,CAAC3D,IAAI,CAACgG,IAAI,CAACT,GAAG,EAAIA,GAAG,CAACQ,WAAW,CAAC,CAAC,CAACP,QAAQ,CAACM,UAAU,CAAC,CACpF,CAAC,CACH,CAEA;AACA,KAAM,CAAAG,WAAWA,CAACtC,QAAQ,CAAE,CAC1B,GAAI,CACF;AACA,KAAM,CAAAuC,UAAU,CAAG,IAAI,CAACxB,yBAAyB,CAACf,QAAQ,CAAC,CAC3D,KAAM,CAAAwC,SAAS,CAAG,KAAM,CAAA/G,UAAU,CAACmE,MAAM,CAAC6C,YAAY,CAACF,UAAU,CAAC,CAClE;AACA,KAAM,CAAAG,WAAW,CAAG,IAAI,CAACjE,yBAAyB,CAAC+D,SAAS,CAAC,CAC7D;AACA,IAAI,CAAC5G,SAAS,CAAC+G,IAAI,CAACD,WAAW,CAAC,CAChC,IAAI,CAAC7G,iBAAiB,CAACuF,eAAe,CAAG,IAAI,CAACxF,SAAS,CAACyF,MAAM,CAC9D,IAAI,CAACxF,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9D,MAAO,CAAAyF,WAAW,CACpB,CAAE,MAAO5D,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/B;AACA,KAAM,CAAA4D,WAAW,CAAAE,aAAA,CAAAA,aAAA,IACZ5C,QAAQ,MACXG,EAAE,QAAAc,MAAA,CAAS,CAAC,IAAI,CAACrF,SAAS,CAACyF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACpEjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC6D,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CACD,IAAI,CAACrB,SAAS,CAAC+G,IAAI,CAACD,WAAW,CAAC,CAChC,IAAI,CAAC7G,iBAAiB,CAACuF,eAAe,CAAG,IAAI,CAACxF,SAAS,CAACyF,MAAM,CAC9D,IAAI,CAACxF,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9D,MAAO,CAAAyF,WAAW,CACpB,CACF,CAEA;AACA,KAAM,CAAAK,cAAcA,CAAC5C,EAAE,CAAE6C,OAAO,CAAE,CAChC,GAAI,CACF;AACA,KAAM,CAAAC,eAAe,CAAG,KAAM,KAAI,CAACzB,eAAe,CAACrB,EAAE,CAAC,CACtD,GAAI,CAAC8C,eAAe,CAAE,MAAO,KAAI,CAEjC;AACA,KAAM,CAAAC,eAAe,CAAAN,aAAA,CAAAA,aAAA,CAAAA,aAAA,IAChBK,eAAe,EACfD,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED;AACA,KAAM,CAAAsF,UAAU,CAAG,IAAI,CAACxB,yBAAyB,CAACmC,eAAe,CAAC,CAClE,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAA1H,UAAU,CAACmE,MAAM,CAACwD,YAAY,CAACjD,EAAE,CAAEoC,UAAU,CAAC,CAE1E;AACA,KAAM,CAAAc,aAAa,CAAG,IAAI,CAAC5E,yBAAyB,CAAC0E,aAAa,CAAC,CAEnE;AACA,KAAM,CAAAG,KAAK,CAAG,IAAI,CAAC1H,SAAS,CAAC2H,SAAS,CAACvD,QAAQ,EAAIA,QAAQ,CAACG,EAAE,GAAKA,EAAE,CAAC,CACtE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC1H,SAAS,CAAC0H,KAAK,CAAC,CAAGD,aAAa,CACvC,CACA,IAAI,CAACxH,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAE9D,MAAO,CAAAoG,aAAa,CACtB,CAAE,MAAOvE,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC1H,SAAS,CAAC2H,SAAS,CAACvD,QAAQ,EAAIA,QAAQ,CAACG,EAAE,GAAKA,EAAE,CAAC,CACtE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAAC1H,SAAS,CAAC0H,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,CAAAA,aAAA,IAChB,IAAI,CAAChH,SAAS,CAAC0H,KAAK,CAAC,EACrBN,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED,IAAI,CAACpB,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9D,MAAO,KAAI,CAACrB,SAAS,CAAC0H,KAAK,CAAC,CAC9B,CACF,CAEA;AACA,KAAM,CAAAE,cAAcA,CAACrD,EAAE,CAAE,CACvB,GAAI,CACF,KAAM,CAAAsD,OAAO,CAAG,KAAM,CAAAhI,UAAU,CAACmE,MAAM,CAAC8D,YAAY,CAACvD,EAAE,CAAC,CACxD,GAAIsD,OAAO,CAAE,CACX;AACA,KAAM,CAAAH,KAAK,CAAG,IAAI,CAAC1H,SAAS,CAAC2H,SAAS,CAACvD,QAAQ,EAAIA,QAAQ,CAACG,EAAE,GAAKA,EAAE,CAAC,CACtE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC1H,SAAS,CAAC+H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CACjC,CACA,IAAI,CAACzH,iBAAiB,CAACuF,eAAe,CAAG,IAAI,CAACxF,SAAS,CAACyF,MAAM,CAC9D,IAAI,CAACxF,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAChE,CACA,MAAO,CAAAwG,OAAO,CAChB,CAAE,MAAO3E,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC1H,SAAS,CAAC2H,SAAS,CAACvD,QAAQ,EAAIA,QAAQ,CAACG,EAAE,GAAKA,EAAE,CAAC,CACtE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAAC1H,SAAS,CAAC+H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC/B,IAAI,CAACzH,iBAAiB,CAACuF,eAAe,CAAG,IAAI,CAACxF,SAAS,CAACyF,MAAM,CAC9D,IAAI,CAACxF,iBAAiB,CAACkB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC9D,MAAO,KAAI,CACb,CACF,CAEA;AACA2G,WAAWA,CAAA,CAAG,CACZ,MAAO,KAAI,CAAC/H,iBAAiB,CAC/B,CAEA;AACA,KAAM,CAAAgI,SAASA,CAAA,CAAG,CAChB,KAAM,CAAAjI,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,KAAM,CAAA4C,MAAM,CAAG,CAAC,GAAG,GAAI,CAAAC,GAAG,CAACnI,SAAS,CAAC4C,GAAG,CAACwB,QAAQ,EAAIA,QAAQ,CAACW,KAAK,CAAC,CAAC,CAAC,CACtE,MAAO,CAAAmD,MAAM,CAACE,IAAI,CAAC,CAAC,CACtB,CAEA;AACA,KAAM,CAAAC,QAAQA,CAAA,CAAG,CACf,KAAM,CAAArI,SAAS,CAAG,KAAM,KAAI,CAACsF,eAAe,CAAC,CAAC,CAC9C,KAAM,CAAAgD,KAAK,CAAG,CAAC,GAAG,GAAI,CAAAH,GAAG,CAACnI,SAAS,CAAC4C,GAAG,CAACwB,QAAQ,EAAIA,QAAQ,CAACY,IAAI,CAAC,CAAC,CAAC,CACpE,MAAO,CAAAsD,KAAK,CAACF,IAAI,CAAC,CAAC,CACrB,CAIA;AACArF,wBAAwBA,CAACwF,KAAK,CAAE,CAC9B,GAAI,CAACA,KAAK,CAAE,MAAO,KAAI,CAEvB,MAAO,CACLhE,EAAE,CAAEgE,KAAK,CAACC,QAAQ,CAClBC,KAAK,CAAE,CAAE/D,EAAE,CAAE6D,KAAK,CAACE,KAAM,CAAC,CAC1BC,WAAW,CAAEH,KAAK,CAACI,SAAS,EAAI,EAAE,CAClCC,OAAO,CAAE,CAAElE,EAAE,CAAE6D,KAAK,CAACK,OAAQ,CAAC,CAC9BC,WAAW,CAAEN,KAAK,CAAC/D,SAAS,CAC5BsE,SAAS,CAAEP,KAAK,CAACO,SAAS,CAC1BC,MAAM,CAAER,KAAK,CAACQ,MAAM,EAAI,IAAI,CAC5B9D,UAAU,CAAEsD,KAAK,CAACS,WAAW,EAAI,GAAI,CAAA5H,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACzD6D,UAAU,CAAEqD,KAAK,CAACU,WAAW,EAAI,GAAI,CAAA7H,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACzDZ,IAAI,CAAE,EAAE,CAAE;AACVyI,WAAW,CAAE,IAAK;AACpB,CAAC,CACH,CAEA;AACAC,0BAA0BA,CAACC,OAAO,CAAE,CAClC,MAAO,CACLX,KAAK,CAAEW,OAAO,CAACX,KAAK,CAAC/D,EAAE,CACvBiE,SAAS,CAAES,OAAO,CAACV,WAAW,EAAI,EAAE,CACpCE,OAAO,CAAEQ,OAAO,CAACR,OAAO,CAAClE,EAAE,EAAI,EAAE,CACjCF,SAAS,CAAE4E,OAAO,CAACP,WAAW,EAAI,IAAI,CACtCC,SAAS,CAAEM,OAAO,CAACN,SAAS,CAC5BC,MAAM,CAAEK,OAAO,CAACL,MAAM,EAAI,OAC5B,CAAC,CACH,CAEA;AACAM,+BAA+BA,CAACC,YAAY,CAAE,CAC5C,GAAI,CAACA,YAAY,CAAE,MAAO,KAAI,CAE9B,MAAO,CACL/E,EAAE,CAAE+E,YAAY,CAACC,eAAe,CAChCC,OAAO,CAAEF,YAAY,CAACE,OAAO,CAC7BX,WAAW,CAAES,YAAY,CAAC9E,SAAS,CACnCiF,YAAY,CAAEH,YAAY,CAACG,YAAY,CACvCb,OAAO,CAAEU,YAAY,CAACV,OAAO,EAAI,EAAE,CACnCc,SAAS,CAAEJ,YAAY,CAACI,SAAS,EAAI,EAAE,CACvCX,MAAM,CAAEO,YAAY,CAACP,MAAM,EAAI,KAAK,CACpC9D,UAAU,CAAEqE,YAAY,CAACN,WAAW,EAAI,GAAI,CAAA5H,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAChEsI,UAAU,CAAEL,YAAY,CAACK,UAAU,EAAI,IAAI,CAC3CC,UAAU,CAAEN,YAAY,CAACM,UAAU,EAAI,IACzC,CAAC,CACH,CAEA;AACAC,+BAA+BA,CAACP,YAAY,CAAE,CAC5C,MAAO,CACLE,OAAO,CAAEF,YAAY,CAACE,OAAO,CAC7BhF,SAAS,CAAE8E,YAAY,CAACT,WAAW,EAAI,IAAI,CAC3CY,YAAY,CAAEH,YAAY,CAACG,YAAY,CACvCb,OAAO,CAAEU,YAAY,CAACV,OAAO,EAAI,EAAE,CACnCc,SAAS,CAAEJ,YAAY,CAACI,SAAS,EAAI,EACvC,CAAC,CACH,CAEA;AACA,KAAM,CAAAI,cAAcA,CAAA,CAAG,CACrB,GAAI,CACF,KAAM,CAAAC,MAAM,CAAG,KAAM,CAAAlK,UAAU,CAAC0I,KAAK,CAACtG,YAAY,CAAC,CAAC,CACpD;AACA,KAAM,CAAA/B,QAAQ,CAAG6J,MAAM,CAACnH,GAAG,CAAC2F,KAAK,EAAI,IAAI,CAACxF,wBAAwB,CAACwF,KAAK,CAAC,CAAC,CAC1E;AACA,IAAI,CAACrI,QAAQ,CAAGA,QAAQ,CACxB,IAAI,CAACC,gBAAgB,CAAC6J,cAAc,CAAG9J,QAAQ,CAACuF,MAAM,CACtD,IAAI,CAACtF,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7D,MAAO,CAAAnB,QAAQ,CACjB,CAAE,MAAOgD,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,MAAO,KAAI,CAAChD,QAAQ,CACtB,CACF,CAEA,KAAM,CAAA+J,cAAcA,CAAC1F,EAAE,CAAE,CACvB,GAAI,CACF,KAAM,CAAAgE,KAAK,CAAG,KAAM,CAAA1I,UAAU,CAAC0I,KAAK,CAAC2B,YAAY,CAAC3F,EAAE,CAAC,CACrD,GAAIgE,KAAK,CAAE,CACT,MAAO,KAAI,CAACxF,wBAAwB,CAACwF,KAAK,CAAC,CAC7C,CACA,MAAO,KAAI,CACb,CAAE,MAAOrF,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC,MAAO,KAAI,CAAChD,QAAQ,CAAC4F,IAAI,CAACsD,OAAO,EAAIA,OAAO,CAAC7E,EAAE,GAAKA,EAAE,CAAC,CACzD,CACF,CAEA,KAAM,CAAA4F,mBAAmBA,CAACpB,MAAM,CAAE,CAChC,KAAM,CAAA7I,QAAQ,CAAG,KAAM,KAAI,CAAC4J,cAAc,CAAC,CAAC,CAC5C,GAAI,CAACf,MAAM,CAAE,MAAO,CAAA7I,QAAQ,CAC5B,MAAO,CAAAA,QAAQ,CAACyF,MAAM,CAACyD,OAAO,EAAIA,OAAO,CAACL,MAAM,GAAKA,MAAM,CAAC,CAC9D,CAEA,KAAM,CAAAqB,mBAAmBA,CAACC,QAAQ,CAAE,CAClC,KAAM,CAAAnK,QAAQ,CAAG,KAAM,KAAI,CAAC4J,cAAc,CAAC,CAAC,CAC5C,MAAO,CAAA5J,QAAQ,CAACyF,MAAM,CAACyD,OAAO,EAAIA,OAAO,CAACN,SAAS,GAAKuB,QAAQ,CAAC,CACnE,CAEA,KAAM,CAAAC,qBAAqBA,CAACC,UAAU,CAAE,CACtC,KAAM,CAAArK,QAAQ,CAAG,KAAM,KAAI,CAAC4J,cAAc,CAAC,CAAC,CAC5C,MAAO,CAAA5J,QAAQ,CAACyF,MAAM,CAACyD,OAAO,EAAIA,OAAO,CAACF,WAAW,GAAKqB,UAAU,CAAC,CACvE,CAEA,KAAM,CAAAC,gBAAgBA,CAACC,KAAK,CAAE,CAC5B,KAAM,CAAAvK,QAAQ,CAAG,KAAM,KAAI,CAAC4J,cAAc,CAAC,CAAC,CAC5C,MAAO,CAAA5J,QAAQ,CAACyF,MAAM,CAACyD,OAAO,EAAIA,OAAO,CAAC3I,IAAI,EAAI2I,OAAO,CAAC3I,IAAI,CAACwF,QAAQ,CAACwE,KAAK,CAAC,CAAC,CACjF,CAEA,KAAM,CAAAC,cAAcA,CAACtE,KAAK,CAAmB,IAAjB,CAAAtB,QAAQ,CAAAuB,SAAA,CAAAZ,MAAA,IAAAY,SAAA,MAAAC,SAAA,CAAAD,SAAA,IAAG,IAAI,CACzC,KAAM,CAAAnG,QAAQ,CAAG,KAAM,KAAI,CAAC4J,cAAc,CAAC,CAAC,CAC5C,KAAM,CAAAvD,UAAU,CAAGH,KAAK,CAACI,WAAW,CAAC,CAAC,CACtC,MAAO,CAAAtG,QAAQ,CAACyF,MAAM,CAACyD,OAAO,EAC5BA,OAAO,CAACX,KAAK,CAAC3D,QAAQ,CAAC,CAAC0B,WAAW,CAAC,CAAC,CAACP,QAAQ,CAACM,UAAU,CAAC,EAC1D6C,OAAO,CAACR,OAAO,CAAC9D,QAAQ,CAAC,CAAC0B,WAAW,CAAC,CAAC,CAACP,QAAQ,CAACM,UAAU,CAC7D,CAAC,CACH,CAEA,KAAM,CAAAoE,UAAUA,CAACvB,OAAO,CAAE,CACxB,GAAI,CACF;AACA,KAAM,CAAAwB,SAAS,CAAG,IAAI,CAACzB,0BAA0B,CAACC,OAAO,CAAC,CAC1D,KAAM,CAAAyB,QAAQ,CAAG,KAAM,CAAAhL,UAAU,CAAC0I,KAAK,CAACuC,WAAW,CAACF,SAAS,CAAC,CAC9D;AACA,KAAM,CAAAG,UAAU,CAAG,IAAI,CAAChI,wBAAwB,CAAC8H,QAAQ,CAAC,CAC1D;AACA,IAAI,CAAC3K,QAAQ,CAAC6G,IAAI,CAACgE,UAAU,CAAC,CAC9B,IAAI,CAAC5K,gBAAgB,CAAC6J,cAAc,CAAG,IAAI,CAAC9J,QAAQ,CAACuF,MAAM,CAC3D,IAAI,CAACtF,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7D,MAAO,CAAA0J,UAAU,CACnB,CAAE,MAAO7H,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/B;AACA,KAAM,CAAA6H,UAAU,CAAA/D,aAAA,CAAAA,aAAA,IACXoC,OAAO,MACV7E,EAAE,YAAAc,MAAA,CAAa,CAAC,IAAI,CAACnF,QAAQ,CAACuF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACvEjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC6D,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC0H,MAAM,CAAE,OAAO,EAChB,CACD,IAAI,CAAC7I,QAAQ,CAAC6G,IAAI,CAACgE,UAAU,CAAC,CAC9B,IAAI,CAAC5K,gBAAgB,CAAC6J,cAAc,CAAG,IAAI,CAAC9J,QAAQ,CAACuF,MAAM,CAC3D,IAAI,CAACtF,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7D,MAAO,CAAA0J,UAAU,CACnB,CACF,CAEA,KAAM,CAAAC,aAAaA,CAACzG,EAAE,CAAE6C,OAAO,CAAE,CAC/B,GAAI,CACF;AACA,KAAM,CAAA6D,cAAc,CAAG,KAAM,KAAI,CAAChB,cAAc,CAAC1F,EAAE,CAAC,CACpD,GAAI,CAAC0G,cAAc,CAAE,MAAO,KAAI,CAEhC;AACA,KAAM,CAAAC,cAAc,CAAAlE,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACfiE,cAAc,EACd7D,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED;AACA,KAAM,CAAAuJ,SAAS,CAAG,IAAI,CAACzB,0BAA0B,CAAC+B,cAAc,CAAC,CACjE,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAtL,UAAU,CAAC0I,KAAK,CAAC6C,WAAW,CAAC7G,EAAE,CAAEqG,SAAS,CAAC,CAEtE;AACA,KAAM,CAAAS,YAAY,CAAG,IAAI,CAACtI,wBAAwB,CAACoI,YAAY,CAAC,CAEhE;AACA,KAAM,CAAAzD,KAAK,CAAG,IAAI,CAACxH,QAAQ,CAACyH,SAAS,CAACyB,OAAO,EAAIA,OAAO,CAAC7E,EAAE,GAAKA,EAAE,CAAC,CACnE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAACxH,QAAQ,CAACwH,KAAK,CAAC,CAAG2D,YAAY,CACrC,CACA,IAAI,CAAClL,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAE7D,MAAO,CAAAgK,YAAY,CACrB,CAAE,MAAOnI,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAACxH,QAAQ,CAACyH,SAAS,CAACyB,OAAO,EAAIA,OAAO,CAAC7E,EAAE,GAAKA,EAAE,CAAC,CACnE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAACxH,QAAQ,CAACwH,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACf,IAAI,CAAC9G,QAAQ,CAACwH,KAAK,CAAC,EACpBN,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED,IAAI,CAAClB,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7D,MAAO,KAAI,CAACnB,QAAQ,CAACwH,KAAK,CAAC,CAC7B,CACF,CAEA,KAAM,CAAA4D,aAAaA,CAAC/G,EAAE,CAAE,CACtB,GAAI,CACF,KAAM,CAAAsD,OAAO,CAAG,KAAM,CAAAhI,UAAU,CAAC0I,KAAK,CAACgD,WAAW,CAAChH,EAAE,CAAC,CACtD,GAAIsD,OAAO,CAAE,CACX;AACA,KAAM,CAAAH,KAAK,CAAG,IAAI,CAACxH,QAAQ,CAACyH,SAAS,CAACyB,OAAO,EAAIA,OAAO,CAAC7E,EAAE,GAAKA,EAAE,CAAC,CACnE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAACxH,QAAQ,CAAC6H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAChC,CACA,IAAI,CAACvH,gBAAgB,CAAC6J,cAAc,CAAG,IAAI,CAAC9J,QAAQ,CAACuF,MAAM,CAC3D,IAAI,CAACtF,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC/D,CACA,MAAO,CAAAwG,OAAO,CAChB,CAAE,MAAO3E,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAACxH,QAAQ,CAACyH,SAAS,CAACyB,OAAO,EAAIA,OAAO,CAAC7E,EAAE,GAAKA,EAAE,CAAC,CACnE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAACxH,QAAQ,CAAC6H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC9B,IAAI,CAACvH,gBAAgB,CAAC6J,cAAc,CAAG,IAAI,CAAC9J,QAAQ,CAACuF,MAAM,CAC3D,IAAI,CAACtF,gBAAgB,CAACgB,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC7D,MAAO,KAAI,CACb,CACF,CAEA;AACA,KAAM,CAAAmK,uBAAuBA,CAAA,CAAG,CAC9B,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAA5L,UAAU,CAAC6L,gBAAgB,CAACC,mBAAmB,CAAC,CAAC,CAC7E;AACA,KAAM,CAAAC,qBAAqB,CAAGH,aAAa,CAAC7I,GAAG,CAAC0G,YAAY,EAAI,IAAI,CAACD,+BAA+B,CAACC,YAAY,CAAC,CAAC,CACnH;AACA,IAAI,CAACtI,iBAAiB,CAAG4K,qBAAqB,CAC9C,IAAI,CAAC3K,yBAAyB,CAACC,mBAAmB,CAAG0K,qBAAqB,CAACnG,MAAM,CACjF,IAAI,CAACxE,yBAAyB,CAACE,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACtE,MAAO,CAAAuK,qBAAqB,CAC9B,CAAE,MAAO1I,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,aAAa,CAAEA,KAAK,CAAC,CACnC,MAAO,KAAI,CAAClC,iBAAiB,CAC/B,CACF,CAEA,KAAM,CAAA6K,mBAAmBA,CAACvC,YAAY,CAAE,CACtC,GAAI,CACF;AACA,KAAM,CAAAwC,gBAAgB,CAAG,IAAI,CAACjC,+BAA+B,CAACP,YAAY,CAAC,CAC3E,KAAM,CAAAyC,eAAe,CAAG,KAAM,CAAAlM,UAAU,CAAC6L,gBAAgB,CAACM,kBAAkB,CAACF,gBAAgB,CAAC,CAC9F;AACA,KAAM,CAAAG,oBAAoB,CAAG,IAAI,CAAC5C,+BAA+B,CAAC0C,eAAe,CAAC,CAClF;AACA,IAAI,CAAC/K,iBAAiB,CAAC+F,IAAI,CAACkF,oBAAoB,CAAC,CACjD,IAAI,CAAChL,yBAAyB,CAACC,mBAAmB,CAAG,IAAI,CAACF,iBAAiB,CAACyE,MAAM,CAClF,IAAI,CAACxE,yBAAyB,CAACE,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACtE,MAAO,CAAA4K,oBAAoB,CAC7B,CAAE,MAAO/I,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC;AACA,KAAM,CAAA6I,eAAe,CAAA/E,aAAA,CAAAA,aAAA,IAChBsC,YAAY,MACf/E,EAAE,YAAAc,MAAA,CAAa,CAAC,IAAI,CAACrE,iBAAiB,CAACyE,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAChFjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC0H,MAAM,CAAE,KAAK,CACbY,UAAU,CAAE,IAAI,CAChBC,UAAU,CAAE,IAAI,EACjB,CACD,IAAI,CAAC5I,iBAAiB,CAAC+F,IAAI,CAACgF,eAAe,CAAC,CAC5C,IAAI,CAAC9K,yBAAyB,CAACC,mBAAmB,CAAG,IAAI,CAACF,iBAAiB,CAACyE,MAAM,CAClF,IAAI,CAACxE,yBAAyB,CAACE,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACtE,MAAO,CAAA0K,eAAe,CACxB,CACF,CAEA,KAAM,CAAAG,4BAA4BA,CAAC3H,EAAE,CAAEwE,MAAM,CAAEoD,SAAS,CAAE,CACxD,GAAI,CACF,KAAM,CAAAtM,UAAU,CAAC6L,gBAAgB,CAACU,wBAAwB,CAAC7H,EAAE,CAAEwE,MAAM,CAAEoD,SAAS,CAAC,CACjF;AACA,KAAM,CAAAzE,KAAK,CAAG,IAAI,CAAC1G,iBAAiB,CAAC2G,SAAS,CAAC2B,YAAY,EAAIA,YAAY,CAAC/E,EAAE,GAAKA,EAAE,CAAC,CACtF,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC1G,iBAAiB,CAAC0G,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,IACxB,IAAI,CAAChG,iBAAiB,CAAC0G,KAAK,CAAC,MAChCqB,MAAM,CACNY,UAAU,CAAE,GAAI,CAAAvI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpCuI,UAAU,CAAEuC,SAAS,EACtB,CACD,IAAI,CAAClL,yBAAyB,CAACE,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACxE,CACA,MAAO,KAAI,CACb,CAAE,MAAO6B,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,qDAAcA,KAAK,CAAC,CACjC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC1G,iBAAiB,CAAC2G,SAAS,CAAC2B,YAAY,EAAIA,YAAY,CAAC/E,EAAE,GAAKA,EAAE,CAAC,CACtF,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAAC1G,iBAAiB,CAAC0G,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,IACxB,IAAI,CAAChG,iBAAiB,CAAC0G,KAAK,CAAC,MAChCqB,MAAM,CACNY,UAAU,CAAE,GAAI,CAAAvI,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpCuI,UAAU,CAAEuC,SAAS,EACtB,CACD,IAAI,CAAClL,yBAAyB,CAACE,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACtE,MAAO,KAAI,CACb,CACF,CAEA,KAAM,CAAAgL,4BAA4BA,CAACtD,MAAM,CAAE,CACzC,KAAM,CAAA0C,aAAa,CAAG,KAAM,KAAI,CAACD,uBAAuB,CAAC,CAAC,CAC1D,GAAI,CAACzC,MAAM,CAAE,MAAO,CAAA0C,aAAa,CACjC,MAAO,CAAAA,aAAa,CAAC9F,MAAM,CAAC2D,YAAY,EAAIA,YAAY,CAACP,MAAM,GAAKA,MAAM,CAAC,CAC7E,CAEA,KAAM,CAAAuD,0BAA0BA,CAACC,MAAM,CAAE,CACvC,KAAM,CAAAd,aAAa,CAAG,KAAM,KAAI,CAACD,uBAAuB,CAAC,CAAC,CAC1D,MAAO,CAAAC,aAAa,CAAC9F,MAAM,CAAC2D,YAAY,EAAIA,YAAY,CAACE,OAAO,GAAK+C,MAAM,CAAC,CAC9E,CAEA,KAAM,CAAAC,8BAA8BA,CAACC,UAAU,CAAE,CAC/C,KAAM,CAAAhB,aAAa,CAAG,KAAM,KAAI,CAACD,uBAAuB,CAAC,CAAC,CAC1D,MAAO,CAAAC,aAAa,CAAC9F,MAAM,CAAC2D,YAAY,EAAIA,YAAY,CAACT,WAAW,GAAK4D,UAAU,CAAC,CACtF,CAEA;AACAtK,WAAWA,CAAA,CAAG,CACZ,MAAO,KAAI,CAAC/B,KAAK,CACnB,CAEAsM,YAAYA,CAACnI,EAAE,CAAE,CACf,MAAO,KAAI,CAACnE,KAAK,CAAC0F,IAAI,CAAC1F,KAAK,EAAIA,KAAK,CAACmE,EAAE,GAAKA,EAAE,CAAC,CAClD,CAEAoI,cAAcA,CAAC3H,IAAI,CAAE,CACnB,GAAI,CAACA,IAAI,CAAE,MAAO,KAAI,CAAC5E,KAAK,CAC5B,MAAO,KAAI,CAACA,KAAK,CAACuF,MAAM,CAACvF,KAAK,EAAIA,KAAK,CAAC4E,IAAI,GAAKA,IAAI,CAAC,CACxD,CAEA4H,gBAAgBA,CAACC,QAAQ,CAAE,CACzB,MAAO,KAAI,CAACzM,KAAK,CAACuF,MAAM,CAACvF,KAAK,EAAIA,KAAK,CAAC0M,SAAS,GAAKD,QAAQ,CAAC,CACjE,CAEAE,QAAQA,CAAC3M,KAAK,CAAE,CACd,KAAM,CAAA4M,QAAQ,CAAAhG,aAAA,CAAAA,aAAA,IACT5G,KAAK,MACRmE,EAAE,UAAAc,MAAA,CAAW,CAAC,IAAI,CAACjF,KAAK,CAACqF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAClE+F,WAAW,CAAE,GAAI,CAAA7L,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACrC6L,IAAI,CAAE9M,KAAK,CAAC8M,IAAI,EAAI,CAAC,EACtB,CACD,IAAI,CAAC9M,KAAK,CAAC2G,IAAI,CAACiG,QAAQ,CAAC,CACzB,IAAI,CAAC1M,aAAa,CAAC6M,WAAW,CAAG,IAAI,CAAC/M,KAAK,CAACqF,MAAM,CAClD,IAAI,CAACnF,aAAa,CAACa,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC1D,MAAO,CAAA2L,QAAQ,CACjB,CAEAI,WAAWA,CAAC7I,EAAE,CAAE,CACd,KAAM,CAAAmD,KAAK,CAAG,IAAI,CAACtH,KAAK,CAACuH,SAAS,CAACvH,KAAK,EAAIA,KAAK,CAACmE,EAAE,GAAKA,EAAE,CAAC,CAC5D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAACtH,KAAK,CAAC2H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC3B,IAAI,CAACpH,aAAa,CAAC6M,WAAW,CAAG,IAAI,CAAC/M,KAAK,CAACqF,MAAM,CAClD,IAAI,CAACnF,aAAa,CAACa,YAAY,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAC1D,MAAO,KAAI,CACb,CAEAgM,kBAAkBA,CAAA,CAAG,CACnB,MAAO,KAAI,CAAChN,YAAY,CAC1B,CAEAiN,cAAcA,CAACC,MAAM,CAAE,CACrB,KAAM,CAAAC,SAAS,CAAAxG,aAAA,CAAAA,aAAA,IACVuG,MAAM,MACThJ,EAAE,WAAAc,MAAA,CAAY,CAAC,IAAI,CAAChF,YAAY,CAACoF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAC1EjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CACD,IAAI,CAAChB,YAAY,CAAC0G,IAAI,CAACyG,SAAS,CAAC,CACjC,MAAO,CAAAA,SAAS,CAClB,CAEAC,iBAAiBA,CAAClJ,EAAE,CAAE,CACpB;AACA,KAAM,CAAAmJ,QAAQ,CAAG,IAAI,CAACtN,KAAK,CAACqG,IAAI,CAACrG,KAAK,EAAIA,KAAK,CAAC0M,SAAS,GAAKvI,EAAE,CAAC,CACjE,GAAImJ,QAAQ,CAAE,MAAO,MAAK,CAE1B,KAAM,CAAAhG,KAAK,CAAG,IAAI,CAACrH,YAAY,CAACsH,SAAS,CAAC4F,MAAM,EAAIA,MAAM,CAAChJ,EAAE,GAAKA,EAAE,CAAC,CACrE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAACrH,YAAY,CAAC0H,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAClC,MAAO,KAAI,CACb,CAEA;AACArF,gBAAgBA,CAAA,CAAG,CACjB,MAAO,KAAI,CAAC9B,UAAU,CACxB,CAEAoN,eAAeA,CAACpJ,EAAE,CAAE,CAClB,MAAO,KAAI,CAAChE,UAAU,CAACuF,IAAI,CAAC8H,QAAQ,EAAIA,QAAQ,CAACrJ,EAAE,GAAKA,EAAE,CAAC,CAC7D,CAEAsJ,qBAAqBA,CAACC,QAAQ,CAAE,CAC9B,MAAO,KAAI,CAACvN,UAAU,CAACoF,MAAM,CAACiI,QAAQ,EAAIA,QAAQ,CAACxI,SAAS,GAAK0I,QAAQ,CAAC,CAC5E,CAEAC,WAAWA,CAACH,QAAQ,CAAE,CACpB,KAAM,CAAAI,WAAW,CAAAhH,aAAA,CAAAA,aAAA,IACZ4G,QAAQ,MACXrJ,EAAE,QAAAc,MAAA,CAAS,CAAC,IAAI,CAAC9E,UAAU,CAACkF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACrEjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC6D,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CACD,IAAI,CAACd,UAAU,CAACwG,IAAI,CAACiH,WAAW,CAAC,CACjC,IAAI,CAACxN,kBAAkB,CAACyN,gBAAgB,CAAG,IAAI,CAAC1N,UAAU,CAACkF,MAAM,CACjE,MAAO,CAAAuI,WAAW,CACpB,CAEAE,cAAcA,CAAC3J,EAAE,CAAE6C,OAAO,CAAE,CAC1B,KAAM,CAAAM,KAAK,CAAG,IAAI,CAACnH,UAAU,CAACoH,SAAS,CAACiG,QAAQ,EAAIA,QAAQ,CAACrJ,EAAE,GAAKA,EAAE,CAAC,CACvE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAACnH,UAAU,CAACmH,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACjB,IAAI,CAACzG,UAAU,CAACmH,KAAK,CAAC,EACtBN,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED,MAAO,KAAI,CAACd,UAAU,CAACmH,KAAK,CAAC,CAC/B,CAEAyG,cAAcA,CAAC5J,EAAE,CAAE,CACjB;AACA,KAAM,CAAA6J,WAAW,CAAG,IAAI,CAAClO,QAAQ,CAACuG,IAAI,CAAC2C,OAAO,EAAIA,OAAO,CAACF,WAAW,GAAK3E,EAAE,CAAC,CAC7E,GAAI6J,WAAW,CAAE,MAAO,MAAK,CAE7B;AACA,KAAM,CAAAC,WAAW,CAAG,IAAI,CAAC9N,UAAU,CAACkG,IAAI,CAACmH,QAAQ,EAAIA,QAAQ,CAACxI,SAAS,GAAKb,EAAE,CAAC,CAC/E,GAAI8J,WAAW,CAAE,MAAO,MAAK,CAE7B,KAAM,CAAA3G,KAAK,CAAG,IAAI,CAACnH,UAAU,CAACoH,SAAS,CAACiG,QAAQ,EAAIA,QAAQ,CAACrJ,EAAE,GAAKA,EAAE,CAAC,CACvE,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAACnH,UAAU,CAACwH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAChC,IAAI,CAAClH,kBAAkB,CAACyN,gBAAgB,CAAG,IAAI,CAAC1N,UAAU,CAACkF,MAAM,CACjE,MAAO,KAAI,CACb,CAEA;AACAlD,UAAUA,CAAA,CAAG,CACX,MAAO,KAAI,CAAC9B,IAAI,CAClB,CAEA6N,UAAUA,CAAC/J,EAAE,CAAE,CACb,MAAO,KAAI,CAAC9D,IAAI,CAACqF,IAAI,CAACE,GAAG,EAAIA,GAAG,CAACzB,EAAE,GAAKA,EAAE,CAAC,CAC7C,CAEAgK,MAAMA,CAACvI,GAAG,CAAE,CACV,KAAM,CAAAwI,MAAM,CAAAxH,aAAA,CAAAA,aAAA,IACPhB,GAAG,MACNzB,EAAE,QAAAc,MAAA,CAAS,CAAC,IAAI,CAAC5E,IAAI,CAACgF,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CAC/DjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpCoN,aAAa,CAAE,CAAC,EACjB,CACD,IAAI,CAAChO,IAAI,CAACsG,IAAI,CAACyH,MAAM,CAAC,CACtB,MAAO,CAAAA,MAAM,CACf,CAEAE,SAASA,CAACnK,EAAE,CAAE6C,OAAO,CAAE,CACrB,KAAM,CAAAM,KAAK,CAAG,IAAI,CAACjH,IAAI,CAACkH,SAAS,CAAC3B,GAAG,EAAIA,GAAG,CAACzB,EAAE,GAAKA,EAAE,CAAC,CACvD,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAACjH,IAAI,CAACiH,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,IACX,IAAI,CAACvG,IAAI,CAACiH,KAAK,CAAC,EAChBN,OAAO,CACX,CAED,MAAO,KAAI,CAAC3G,IAAI,CAACiH,KAAK,CAAC,CACzB,CAEAiH,SAASA,CAACpK,EAAE,CAAE,CACZ,KAAM,CAAAmD,KAAK,CAAG,IAAI,CAACjH,IAAI,CAACkH,SAAS,CAAC3B,GAAG,EAAIA,GAAG,CAACzB,EAAE,GAAKA,EAAE,CAAC,CACvD,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B;AACA,IAAI,CAACxH,QAAQ,CAAC0O,OAAO,CAACxF,OAAO,EAAI,CAC/B,GAAIA,OAAO,CAAC3I,IAAI,EAAI2I,OAAO,CAAC3I,IAAI,CAACwF,QAAQ,CAAC1B,EAAE,CAAC,CAAE,CAC7C6E,OAAO,CAAC3I,IAAI,CAAG2I,OAAO,CAAC3I,IAAI,CAACkF,MAAM,CAAC8E,KAAK,EAAIA,KAAK,GAAKlG,EAAE,CAAC,CAC3D,CACF,CAAC,CAAC,CAEF,IAAI,CAAC9D,IAAI,CAACsH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC1B,MAAO,KAAI,CACb,CAEA;AACA,KAAM,CAAAjF,WAAWA,CAAA,CAAG,CAClB,GAAI,CACF,KAAM,CAAA9B,KAAK,CAAG,KAAM,CAAAd,UAAU,CAACgP,IAAI,CAACpM,WAAW,CAAC,CAAC,CACjD;AACA,IAAI,CAAC9B,KAAK,CAAGA,KAAK,CAClB,IAAI,CAACI,aAAa,CAAC+N,WAAW,CAAGnO,KAAK,CAAC8E,MAAM,CAC7C,MAAO,CAAA9E,KAAK,CACd,CAAE,MAAOuC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,MAAO,KAAI,CAACvC,KAAK,CACnB,CACF,CAEA,KAAM,CAAAoO,WAAWA,CAACxK,EAAE,CAAE,CACpB,GAAI,CACF,KAAM,CAAAsK,IAAI,CAAG,KAAM,CAAAhP,UAAU,CAACgP,IAAI,CAACE,WAAW,CAACxK,EAAE,CAAC,CAClD,MAAO,CAAAsK,IAAI,CACb,CAAE,MAAO3L,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC,MAAO,KAAI,CAACvC,KAAK,CAACmF,IAAI,CAAC+I,IAAI,EAAIA,IAAI,CAACtK,EAAE,GAAKA,EAAE,CAAC,CAChD,CACF,CAEA,KAAM,CAAAyK,iBAAiBA,CAACC,QAAQ,CAAE,CAChC,GAAI,CACF,KAAM,CAAAJ,IAAI,CAAG,KAAM,CAAAhP,UAAU,CAACgP,IAAI,CAACG,iBAAiB,CAACC,QAAQ,CAAC,CAC9D,MAAO,CAAAJ,IAAI,CACb,CAAE,MAAO3L,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAAS4J,QAAQ,mBAAQ/L,KAAK,CAAC,CAC5C,MAAO,KAAI,CAACvC,KAAK,CAACmF,IAAI,CAAC+I,IAAI,EAAIA,IAAI,CAACI,QAAQ,GAAKA,QAAQ,CAAC,CAC5D,CACF,CAEA,KAAM,CAAAC,OAAOA,CAACL,IAAI,CAAE,CAClB,GAAI,CACF,KAAM,CAAAM,OAAO,CAAG,KAAM,CAAAtP,UAAU,CAACgP,IAAI,CAACO,UAAU,CAACP,IAAI,CAAC,CACtD;AACA,IAAI,CAAClO,KAAK,CAACoG,IAAI,CAACoI,OAAO,CAAC,CACxB,IAAI,CAACpO,aAAa,CAAC+N,WAAW,CAAG,IAAI,CAACnO,KAAK,CAAC8E,MAAM,CAClD,MAAO,CAAA0J,OAAO,CAChB,CAAE,MAAOjM,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/B;AACA,KAAM,CAAAiM,OAAO,CAAAnI,aAAA,CAAAA,aAAA,IACR6H,IAAI,MACPtK,EAAE,SAAAc,MAAA,CAAU,CAAC,IAAI,CAAC1E,KAAK,CAAC8E,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACjEjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CACpC0H,MAAM,CAAE,QAAQ,EACjB,CACD,IAAI,CAACpI,KAAK,CAACoG,IAAI,CAACoI,OAAO,CAAC,CACxB,IAAI,CAACpO,aAAa,CAAC+N,WAAW,CAAG,IAAI,CAACnO,KAAK,CAAC8E,MAAM,CAClD,MAAO,CAAA0J,OAAO,CAChB,CACF,CAEA,KAAM,CAAAE,UAAUA,CAAC9K,EAAE,CAAE6C,OAAO,CAAE,CAC5B,GAAI,CACF,KAAM,CAAAkI,WAAW,CAAG,KAAM,CAAAzP,UAAU,CAACgP,IAAI,CAACQ,UAAU,CAAC9K,EAAE,CAAE6C,OAAO,CAAC,CACjE;AACA,KAAM,CAAAM,KAAK,CAAG,IAAI,CAAC/G,KAAK,CAACgH,SAAS,CAACkH,IAAI,EAAIA,IAAI,CAACtK,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC/G,KAAK,CAAC+G,KAAK,CAAC,CAAG4H,WAAW,CACjC,CACA,MAAO,CAAAA,WAAW,CACpB,CAAE,MAAOpM,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC/G,KAAK,CAACgH,SAAS,CAACkH,IAAI,EAAIA,IAAI,CAACtK,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAAC/G,KAAK,CAAC+G,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACZ,IAAI,CAACrG,KAAK,CAAC+G,KAAK,CAAC,EACjBN,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED,MAAO,KAAI,CAACV,KAAK,CAAC+G,KAAK,CAAC,CAC1B,CACF,CAEA,KAAM,CAAA6H,UAAUA,CAAChL,EAAE,CAAE,CACnB,GAAI,CACF,KAAM,CAAAsD,OAAO,CAAG,KAAM,CAAAhI,UAAU,CAACgP,IAAI,CAACU,UAAU,CAAChL,EAAE,CAAC,CACpD;AACA,GAAIsD,OAAO,CAAE,CACX,KAAM,CAAAH,KAAK,CAAG,IAAI,CAAC/G,KAAK,CAACgH,SAAS,CAACkH,IAAI,EAAIA,IAAI,CAACtK,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC/G,KAAK,CAACoH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC3B,IAAI,CAAC3G,aAAa,CAAC+N,WAAW,CAAG,IAAI,CAACnO,KAAK,CAAC8E,MAAM,CACpD,CACF,CACA,MAAO,CAAAoC,OAAO,CAChB,CAAE,MAAO3E,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC/G,KAAK,CAACgH,SAAS,CAACkH,IAAI,EAAIA,IAAI,CAACtK,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAAC/G,KAAK,CAACoH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC3B,IAAI,CAAC3G,aAAa,CAAC+N,WAAW,CAAG,IAAI,CAACnO,KAAK,CAAC8E,MAAM,CAClD,MAAO,KAAI,CACb,CACF,CAEA;AACA,KAAM,CAAA9C,WAAWA,CAAA,CAAG,CAClB,GAAI,CACF,KAAM,CAAA/B,KAAK,CAAG,KAAM,CAAAf,UAAU,CAAC2P,cAAc,CAAC7M,WAAW,CAAC,CAAC,CAC3D;AACA,IAAI,CAAC/B,KAAK,CAAGA,KAAK,CAClB,MAAO,CAAAA,KAAK,CACd,CAAE,MAAOsC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,MAAO,KAAI,CAACtC,KAAK,CACnB,CACF,CAEA,KAAM,CAAA6O,WAAWA,CAAClL,EAAE,CAAE,CACpB,GAAI,CACF;AACA,KAAM,CAAAmL,IAAI,CAAG,IAAI,CAAC9O,KAAK,CAACkF,IAAI,CAAC4J,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CACpD,GAAImL,IAAI,CAAE,MAAO,CAAAA,IAAI,CAErB;AACA,MAAO,MAAM,CAAA7P,UAAU,CAAC2P,cAAc,CAACC,WAAW,CAAClL,EAAE,CAAC,CACxD,CAAE,MAAOrB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC,MAAO,KAAI,CAACtC,KAAK,CAACkF,IAAI,CAAC4J,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CAChD,CACF,CAEA,KAAM,CAAAoL,OAAOA,CAACD,IAAI,CAAE,CAClB,GAAI,CACF,KAAM,CAAAE,OAAO,CAAG,KAAM,CAAA/P,UAAU,CAAC2P,cAAc,CAACK,UAAU,CAACH,IAAI,CAAC,CAChE;AACA,IAAI,CAAC9O,KAAK,CAACmG,IAAI,CAAC6I,OAAO,CAAC,CACxB,MAAO,CAAAA,OAAO,CAChB,CAAE,MAAO1M,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,SAAS,CAAEA,KAAK,CAAC,CAC/B;AACA,KAAM,CAAA0M,OAAO,CAAA5I,aAAA,CAAAA,aAAA,IACR0I,IAAI,MACPnL,EAAE,SAAAc,MAAA,CAAU,CAAC,IAAI,CAACzE,KAAK,CAAC6E,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACjEjC,UAAU,CAAE,GAAI,CAAA7D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CACD,IAAI,CAACT,KAAK,CAACmG,IAAI,CAAC6I,OAAO,CAAC,CACxB,MAAO,CAAAA,OAAO,CAChB,CACF,CAEA,KAAM,CAAAE,UAAUA,CAACvL,EAAE,CAAE,CACnB,GAAI,CACF;AACA,GAAIA,EAAE,GAAK,UAAU,CAAE,MAAO,MAAK,CAEnC;AACA,KAAM,CAAA5D,KAAK,CAAG,KAAM,KAAI,CAAC8B,WAAW,CAAC,CAAC,CACtC,KAAM,CAAAsN,QAAQ,CAAGpP,KAAK,CAAC8F,IAAI,CAACoI,IAAI,EAAIA,IAAI,CAACmB,OAAO,GAAKzL,EAAE,CAAC,CACxD,GAAIwL,QAAQ,CAAE,MAAO,MAAK,CAE1B,KAAM,CAAAlI,OAAO,CAAG,KAAM,CAAAhI,UAAU,CAAC2P,cAAc,CAACM,UAAU,CAACvL,EAAE,CAAC,CAC9D;AACA,GAAIsD,OAAO,CAAE,CACX,KAAM,CAAAH,KAAK,CAAG,IAAI,CAAC9G,KAAK,CAAC+G,SAAS,CAAC+H,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC9G,KAAK,CAACmH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC7B,CACA;AACA,IAAI,CAAC5G,eAAe,CAAG,IAAI,CAACA,eAAe,CAAC6E,MAAM,CAACsK,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKzL,EAAE,CAAC,CAC7E,CACA,MAAO,CAAAsD,OAAO,CAChB,CAAE,MAAO3E,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA;AACA,GAAIqB,EAAE,GAAK,UAAU,CAAE,MAAO,MAAK,CAEnC;AACA,KAAM,CAAAwL,QAAQ,CAAG,IAAI,CAACpP,KAAK,CAAC8F,IAAI,CAACoI,IAAI,EAAIA,IAAI,CAACmB,OAAO,GAAKzL,EAAE,CAAC,CAC7D,GAAIwL,QAAQ,CAAE,MAAO,MAAK,CAE1B,KAAM,CAAArI,KAAK,CAAG,IAAI,CAAC9G,KAAK,CAAC+G,SAAS,CAAC+H,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B;AACA,IAAI,CAAC5G,eAAe,CAAG,IAAI,CAACA,eAAe,CAAC6E,MAAM,CAACsK,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKzL,EAAE,CAAC,CAE3E,IAAI,CAAC3D,KAAK,CAACmH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CAC3B,MAAO,KAAI,CACb,CACF,CAEA,KAAM,CAAAwI,UAAUA,CAAC3L,EAAE,CAAE6C,OAAO,CAAE,CAC5B,GAAI,CACF,KAAM,CAAA+I,WAAW,CAAG,KAAM,CAAAtQ,UAAU,CAAC2P,cAAc,CAACU,UAAU,CAAC3L,EAAE,CAAE6C,OAAO,CAAC,CAC3E;AACA,KAAM,CAAAM,KAAK,CAAG,IAAI,CAAC9G,KAAK,CAAC+G,SAAS,CAAC+H,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,CAChB,IAAI,CAAC9G,KAAK,CAAC8G,KAAK,CAAC,CAAGyI,WAAW,CACjC,CACA,MAAO,CAAAA,WAAW,CACpB,CAAE,MAAOjN,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASd,EAAE,mBAAQrB,KAAK,CAAC,CACtC;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC9G,KAAK,CAAC+G,SAAS,CAAC+H,IAAI,EAAIA,IAAI,CAACnL,EAAE,GAAKA,EAAE,CAAC,CAC1D,GAAImD,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,KAAI,CAE7B,IAAI,CAAC9G,KAAK,CAAC8G,KAAK,CAAC,CAAAV,aAAA,CAAAA,aAAA,CAAAA,aAAA,IACZ,IAAI,CAACpG,KAAK,CAAC8G,KAAK,CAAC,EACjBN,OAAO,MACVlC,UAAU,CAAE,GAAI,CAAA9D,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACrC,CAED,MAAO,KAAI,CAACT,KAAK,CAAC8G,KAAK,CAAC,CAC1B,CACF,CAEA,KAAM,CAAA0I,qBAAqBA,CAAA,CAAG,CAC5B,MAAO,KAAI,CAACtP,eAAe,CAC7B,CAEA,KAAM,CAAAuP,qBAAqBA,CAACC,MAAM,CAAEC,aAAa,CAAE,CACjD,GAAI,CACF,KAAM,CAAA1I,OAAO,CAAG,KAAM,CAAAhI,UAAU,CAAC2P,cAAc,CAACa,qBAAqB,CAACC,MAAM,CAAEC,aAAa,CAAC,CAC5F;AACA,GAAI1I,OAAO,CAAE,CACX;AACA,IAAI,CAAC/G,eAAe,CAAG,IAAI,CAACA,eAAe,CAAC6E,MAAM,CAACsK,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKM,MAAM,CAAC,CAE/E;AACAC,aAAa,CAAC3B,OAAO,CAAC4B,YAAY,EAAI,CACpC,IAAI,CAAC1P,eAAe,CAACiG,IAAI,CAAC,CAAEiJ,OAAO,CAAEM,MAAM,CAAEG,aAAa,CAAED,YAAa,CAAC,CAAC,CAC7E,CAAC,CAAC,CACJ,CACA,MAAO,CAAA3I,OAAO,CAChB,CAAE,MAAO3E,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASiL,MAAM,+BAAUpN,KAAK,CAAC,CAC5C;AACA;AACA,IAAI,CAACpC,eAAe,CAAG,IAAI,CAACA,eAAe,CAAC6E,MAAM,CAACsK,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKM,MAAM,CAAC,CAE/E;AACAC,aAAa,CAAC3B,OAAO,CAAC4B,YAAY,EAAI,CACpC,IAAI,CAAC1P,eAAe,CAACiG,IAAI,CAAC,CAAEiJ,OAAO,CAAEM,MAAM,CAAEG,aAAa,CAAED,YAAa,CAAC,CAAC,CAC7E,CAAC,CAAC,CAEF,MAAO,KAAI,CACb,CACF,CAEA,KAAM,CAAAE,iBAAiBA,CAAA,CAAG,CACxB,GAAI,CACF,KAAM,CAAA7P,WAAW,CAAG,KAAM,CAAAhB,UAAU,CAAC2P,cAAc,CAACkB,iBAAiB,CAAC,CAAC,CACvE;AACA,IAAI,CAAC7P,WAAW,CAAGA,WAAW,CAC9B,MAAO,CAAAA,WAAW,CACpB,CAAE,MAAOqC,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,WAAW,CAAEA,KAAK,CAAC,CACjC,MAAO,KAAI,CAACrC,WAAW,CACzB,CACF,CAEA,KAAM,CAAA8P,oBAAoBA,CAACL,MAAM,CAAE,CACjC,GAAI,CACF,KAAM,CAAAC,aAAa,CAAG,KAAM,CAAA1Q,UAAU,CAAC2P,cAAc,CAACoB,kBAAkB,CAACN,MAAM,CAAC,CAChF,KAAM,CAAAO,cAAc,CAAG,KAAM,KAAI,CAACH,iBAAiB,CAAC,CAAC,CACrD,MAAO,CAAAG,cAAc,CAAClL,MAAM,CAACmL,UAAU,EAAIP,aAAa,CAACtK,QAAQ,CAAC6K,UAAU,CAACvM,EAAE,CAAC,CAAC,CACnF,CAAE,MAAOrB,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,6BAAAmC,MAAA,CAASiL,MAAM,+BAAUpN,KAAK,CAAC,CAC5C;AACA,KAAM,CAAA6N,iBAAiB,CAAG,IAAI,CAACjQ,eAAe,CAAC6E,MAAM,CAACsK,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKM,MAAM,CAAC,CAAC1N,GAAG,CAACqN,EAAE,EAAIA,EAAE,CAACQ,aAAa,CAAC,CAC9G,MAAO,KAAI,CAAC5P,WAAW,CAAC8E,MAAM,CAACmL,UAAU,EAAIC,iBAAiB,CAAC9K,QAAQ,CAAC6K,UAAU,CAACvM,EAAE,CAAC,CAAC,CACzF,CACF,CAEA,KAAM,CAAAyM,gBAAgBA,CAACV,MAAM,CAAEE,YAAY,CAAE,CAC3C,GAAI,CACF;AACA,KAAM,CAAAS,mBAAmB,CAAG,KAAM,KAAI,CAACN,oBAAoB,CAACL,MAAM,CAAC,CACnE,KAAM,CAAAY,MAAM,CAAGD,mBAAmB,CAACxK,IAAI,CAACqK,UAAU,EAAIA,UAAU,CAACvM,EAAE,GAAKiM,YAAY,CAAC,CACrF,GAAIU,MAAM,CAAE,MAAO,MAAK,CAExB;AACA,KAAM,CAAAC,cAAc,CAAG,CAAC,GAAGF,mBAAmB,CAACrO,GAAG,CAACwO,CAAC,EAAIA,CAAC,CAAC7M,EAAE,CAAC,CAAEiM,YAAY,CAAC,CAC5E,MAAO,MAAM,KAAI,CAACH,qBAAqB,CAACC,MAAM,CAAEa,cAAc,CAAC,CACjE,CAAE,MAAOjO,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,yCAAYA,KAAK,CAAC,CAC/B;AACA;AACA,KAAM,CAAAgO,MAAM,CAAG,IAAI,CAACpQ,eAAe,CAAC2F,IAAI,CAACwJ,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKM,MAAM,EAAIL,EAAE,CAACQ,aAAa,GAAKD,YAAY,CAAC,CAC1G,GAAIU,MAAM,CAAE,MAAO,MAAK,CAExB,IAAI,CAACpQ,eAAe,CAACiG,IAAI,CAAC,CAAEiJ,OAAO,CAAEM,MAAM,CAAEG,aAAa,CAAED,YAAa,CAAC,CAAC,CAC3E,MAAO,KAAI,CACb,CACF,CAEA,KAAM,CAAAa,gBAAgBA,CAACf,MAAM,CAAEE,YAAY,CAAE,CAC3C,GAAI,CACF;AACA,KAAM,CAAAS,mBAAmB,CAAG,KAAM,KAAI,CAACN,oBAAoB,CAACL,MAAM,CAAC,CACnE;AACA,KAAM,CAAAa,cAAc,CAAGF,mBAAmB,CAACrO,GAAG,CAACwO,CAAC,EAAIA,CAAC,CAAC7M,EAAE,CAAC,CAACoB,MAAM,CAACpB,EAAE,EAAIA,EAAE,GAAKiM,YAAY,CAAC,CAC3F;AACA,MAAO,MAAM,KAAI,CAACH,qBAAqB,CAACC,MAAM,CAAEa,cAAc,CAAC,CACjE,CAAE,MAAOjO,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,yCAAYA,KAAK,CAAC,CAC/B;AACA,KAAM,CAAAwE,KAAK,CAAG,IAAI,CAAC5G,eAAe,CAAC6G,SAAS,CAACsI,EAAE,EAAIA,EAAE,CAACD,OAAO,GAAKM,MAAM,EAAIL,EAAE,CAACQ,aAAa,GAAKD,YAAY,CAAC,CAC9G,GAAI9I,KAAK,GAAK,CAAC,CAAC,CAAE,MAAO,MAAK,CAE9B,IAAI,CAAC5G,eAAe,CAACiH,MAAM,CAACL,KAAK,CAAE,CAAC,CAAC,CACrC,MAAO,KAAI,CACb,CACF,CAEA;AACA4J,kBAAkBA,CAAA,CAAG,CACnB,MAAO,KAAI,CAAChQ,eAAe,CAC7B,CAEAiQ,qBAAqBA,CAACnK,OAAO,CAAE,CAC7B,IAAI,CAAC9F,eAAe,CAAA0F,aAAA,CAAAA,aAAA,IACf,IAAI,CAAC1F,eAAe,EACpB8F,OAAO,CACX,CACD,MAAO,KAAI,CAAC9F,eAAe,CAC7B,CAEAkQ,gBAAgBA,CAAA,CAAG,CACjB,MAAO,KAAI,CAACjQ,aAAa,CAC3B,CAEAkQ,mBAAmBA,CAACrK,OAAO,CAAE,CAC3B,IAAI,CAAC7F,aAAa,CAAAyF,aAAA,CAAAA,aAAA,IACb,IAAI,CAACzF,aAAa,EAClB6F,OAAO,CACX,CACD,MAAO,KAAI,CAAC7F,aAAa,CAC3B,CAEAmQ,cAAcA,CAAA,CAAG,CACf,MAAO,KAAI,CAAClQ,WAAW,CACzB,CAEAmQ,iBAAiBA,CAACvK,OAAO,CAAE,CACzB,IAAI,CAAC5F,WAAW,CAAAwF,aAAA,CAAAA,aAAA,IACX,IAAI,CAACxF,WAAW,EAChB4F,OAAO,CACX,CACD,MAAO,KAAI,CAAC5F,WAAW,CACzB,CAEAoQ,mBAAmBA,CAAA,CAAG,CACpB,MAAO,KAAI,CAACnQ,gBAAgB,CAC9B,CAEAoQ,sBAAsBA,CAACzK,OAAO,CAAE,CAC9B,IAAI,CAAC3F,gBAAgB,CAAAuF,aAAA,CAAAA,aAAA,IAChB,IAAI,CAACvF,gBAAgB,EACrB2F,OAAO,CACX,CACD,MAAO,KAAI,CAAC3F,gBAAgB,CAC9B,CAEA;AACAqQ,mBAAmBA,CAAA,CAAG,CACpB,MAAO,KAAI,CAACpQ,aAAa,CAC3B,CAEAqQ,eAAeA,CAAC9O,GAAG,CAAE,CACnB,KAAM,CAAA+O,MAAM,CAAAhL,aAAA,CAAAA,aAAA,IACP/D,GAAG,MACNsB,EAAE,QAAAc,MAAA,CAAS,CAAC,IAAI,CAAC3D,aAAa,CAAC+D,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACxE+K,SAAS,CAAE,GAAI,CAAA7Q,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACpC,CACD,IAAI,CAACK,aAAa,CAACqF,IAAI,CAACiL,MAAM,CAAC,CAC/B,MAAO,CAAAA,MAAM,CACf,CAEAE,eAAeA,CAAA,CAAG,CAChB,MAAO,KAAI,CAACvQ,SAAS,CACvB,CAEAwQ,WAAWA,CAAClP,GAAG,CAAE,CACf,KAAM,CAAA+O,MAAM,CAAAhL,aAAA,CAAAA,aAAA,IACP/D,GAAG,MACNsB,EAAE,UAAAc,MAAA,CAAW,CAAC,IAAI,CAAC1D,SAAS,CAAC8D,MAAM,CAAG,CAAC,EAAEwB,QAAQ,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAE,CACtE+K,SAAS,CAAE,GAAI,CAAA7Q,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,EACpC,CACD,IAAI,CAACM,SAAS,CAACoF,IAAI,CAACiL,MAAM,CAAC,CAC3B,MAAO,CAAAA,MAAM,CACf,CAEA;AACAI,kBAAkBA,CAAA,CAAG,CACnB,IAAI,CAAC1Q,aAAa,CAAG,EAAE,CACvB,MAAO,KAAI,CACb,CAEA2Q,cAAcA,CAAA,CAAG,CACf,IAAI,CAAC1Q,SAAS,CAAG,EAAE,CACnB,MAAO,KAAI,CACb,CACF,CAGA;AACA,KAAM,CAAA2Q,WAAW,CAAG,GAAI,CAAAxS,WAAW,CAAC,CAAC,CACrC,cAAe,CAAAwS,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}