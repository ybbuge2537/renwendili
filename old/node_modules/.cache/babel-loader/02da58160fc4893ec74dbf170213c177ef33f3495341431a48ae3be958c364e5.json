{"ast":null,"code":"import _objectSpread from\"/Volumes/ZHITTAI/xiangmu/renwendil/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import locationsData from'./locations.json';class DataManager{constructor(){this.locations=locationsData.locations;this.metadata=locationsData.metadata;}// 获取所有地点\ngetAllLocations(){return this.locations;}// 根据图层获取地点\ngetLocationsByLayer(layer){if(!layer||layer==='all'){return this.locations;}return this.locations.filter(location=>location.layer===layer);}// 根据ID获取地点\ngetLocationById(id){return this.locations.find(location=>location.id===id);}// 根据标签获取地点\ngetLocationsByTag(tag){return this.locations.filter(location=>location.tags&&location.tags.includes(tag));}// 根据类型获取地点\ngetLocationsByType(type){return this.locations.filter(location=>location.type===type);}// 搜索地点\nsearchLocations(query){let language=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'zh';const lowerQuery=query.toLowerCase();return this.locations.filter(location=>location.name[language].toLowerCase().includes(lowerQuery)||location.description[language].toLowerCase().includes(lowerQuery)||location.tags&&location.tags.some(tag=>tag.toLowerCase().includes(lowerQuery)));}// 添加地点\naddLocation(location){const newLocation=_objectSpread(_objectSpread({},location),{},{id:\"loc_\".concat((this.locations.length+1).toString().padStart(3,'0')),created_at:new Date().toISOString(),updated_at:new Date().toISOString()});this.locations.push(newLocation);this.metadata.total_locations=this.locations.length;this.metadata.last_updated=new Date().toISOString();return newLocation;}// 更新地点\nupdateLocation(id,updates){const index=this.locations.findIndex(location=>location.id===id);if(index===-1)return null;this.locations[index]=_objectSpread(_objectSpread(_objectSpread({},this.locations[index]),updates),{},{updated_at:new Date().toISOString()});this.metadata.last_updated=new Date().toISOString();return this.locations[index];}// 删除地点\ndeleteLocation(id){const index=this.locations.findIndex(location=>location.id===id);if(index===-1)return false;this.locations.splice(index,1);this.metadata.total_locations=this.locations.length;this.metadata.last_updated=new Date().toISOString();return true;}// 获取元数据\ngetMetadata(){return this.metadata;}// 获取所有图层类型\ngetLayers(){const layers=[...new Set(this.locations.map(location=>location.layer))];return layers.sort();}// 获取所有地点类型\ngetTypes(){const types=[...new Set(this.locations.map(location=>location.type))];return types.sort();}// 获取所有标签\ngetAllTags(){const tags=new Set();this.locations.forEach(location=>{if(location.tags){location.tags.forEach(tag=>tags.add(tag));}});return Array.from(tags).sort();}}// 导出单例实例\nconst dataManager=new DataManager();export default dataManager;","map":{"version":3,"names":["locationsData","DataManager","constructor","locations","metadata","getAllLocations","getLocationsByLayer","layer","filter","location","getLocationById","id","find","getLocationsByTag","tag","tags","includes","getLocationsByType","type","searchLocations","query","language","arguments","length","undefined","lowerQuery","toLowerCase","name","description","some","addLocation","newLocation","_objectSpread","concat","toString","padStart","created_at","Date","toISOString","updated_at","push","total_locations","last_updated","updateLocation","updates","index","findIndex","deleteLocation","splice","getMetadata","getLayers","layers","Set","map","sort","getTypes","types","getAllTags","forEach","add","Array","from","dataManager"],"sources":["/Volumes/ZHITTAI/xiangmu/renwendil/src/data/dataManager.js"],"sourcesContent":["import locationsData from './locations.json';\n\nclass DataManager {\n  constructor() {\n    this.locations = locationsData.locations;\n    this.metadata = locationsData.metadata;\n  }\n\n  // 获取所有地点\n  getAllLocations() {\n    return this.locations;\n  }\n\n  // 根据图层获取地点\n  getLocationsByLayer(layer) {\n    if (!layer || layer === 'all') {\n      return this.locations;\n    }\n    return this.locations.filter(location => location.layer === layer);\n  }\n\n  // 根据ID获取地点\n  getLocationById(id) {\n    return this.locations.find(location => location.id === id);\n  }\n\n  // 根据标签获取地点\n  getLocationsByTag(tag) {\n    return this.locations.filter(location => location.tags && location.tags.includes(tag));\n  }\n\n  // 根据类型获取地点\n  getLocationsByType(type) {\n    return this.locations.filter(location => location.type === type);\n  }\n\n  // 搜索地点\n  searchLocations(query, language = 'zh') {\n    const lowerQuery = query.toLowerCase();\n    return this.locations.filter(location => \n      location.name[language].toLowerCase().includes(lowerQuery) ||\n      location.description[language].toLowerCase().includes(lowerQuery) ||\n      (location.tags && location.tags.some(tag => tag.toLowerCase().includes(lowerQuery)))\n    );\n  }\n\n  // 添加地点\n  addLocation(location) {\n    const newLocation = {\n      ...location,\n      id: `loc_${(this.locations.length + 1).toString().padStart(3, '0')}`,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString()\n    };\n    this.locations.push(newLocation);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return newLocation;\n  }\n\n  // 更新地点\n  updateLocation(id, updates) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return null;\n    \n    this.locations[index] = {\n      ...this.locations[index],\n      ...updates,\n      updated_at: new Date().toISOString()\n    };\n    \n    this.metadata.last_updated = new Date().toISOString();\n    return this.locations[index];\n  }\n\n  // 删除地点\n  deleteLocation(id) {\n    const index = this.locations.findIndex(location => location.id === id);\n    if (index === -1) return false;\n    \n    this.locations.splice(index, 1);\n    this.metadata.total_locations = this.locations.length;\n    this.metadata.last_updated = new Date().toISOString();\n    return true;\n  }\n\n  // 获取元数据\n  getMetadata() {\n    return this.metadata;\n  }\n\n  // 获取所有图层类型\n  getLayers() {\n    const layers = [...new Set(this.locations.map(location => location.layer))];\n    return layers.sort();\n  }\n\n  // 获取所有地点类型\n  getTypes() {\n    const types = [...new Set(this.locations.map(location => location.type))];\n    return types.sort();\n  }\n\n  // 获取所有标签\n  getAllTags() {\n    const tags = new Set();\n    this.locations.forEach(location => {\n      if (location.tags) {\n        location.tags.forEach(tag => tags.add(tag));\n      }\n    });\n    return Array.from(tags).sort();\n  }\n}\n\n// 导出单例实例\nconst dataManager = new DataManager();\nexport default dataManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}