<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文舆世界 - 开发进度可视化</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 0;
            text-align: center;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .section {
            background-color: white;
            padding: 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .section h2 {
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .section h3 {
            color: #555;
            margin-bottom: 15px;
        }
        
        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .overview-card {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border-left: 4px solid #667eea;
        }
        
        .overview-card h4 {
            color: #555;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .overview-card .value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .progress-bar {
            width: 100%;
            height: 25px;
            background-color: #e9ecef;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .task-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .task-table th,
        .task-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }
        
        .task-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #555;
        }
        
        .task-table tr:hover {
            background-color: #f8f9fa;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-completed {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .status-in-progress {
            background-color: #cce7ff;
            color: #004085;
        }
        
        .list-group {
            list-style: none;
        }
        
        .list-group li {
            padding: 12px;
            margin-bottom: 8px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }
        
        .tech-stack {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .tech-tag {
            background-color: #667eea;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        .issue-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-left: 4px solid #dc3545;
            background-color: #f8f9fa;
        }
        
        .issue-item.resolved {
            border-left-color: #28a745;
        }
        
        .issue-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .issue-description {
            color: #666;
            margin-bottom: 5px;
        }
        
        .issue-resolution {
            color: #28a745;
            font-size: 0.9rem;
        }
        
        .todo-item {
            display: flex;
            align-items: flex-start;
            padding: 15px;
            margin-bottom: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #ffc107;
        }
        
        .todo-priority {
            margin-right: 15px;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
        }
        
        .priority-high {
            background-color: #dc3545;
            color: white;
        }
        
        .priority-medium {
            background-color: #ffc107;
            color: #333;
        }
        
        .priority-low {
            background-color: #28a745;
            color: white;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .section {
                padding: 20px;
            }
            
            .task-table {
                display: block;
                overflow-x: auto;
            }
            
            .overview-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .last-updated {
            text-align: right;
            color: #888;
            font-size: 0.9rem;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>文舆世界</h1>
            <p class="subtitle">开发进度可视化</p>
        </header>
        
        <div class="section">
            <h2>项目概览</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <h4>项目名称</h4>
                    <div class="value" id="project-name">加载中...</div>
                </div>
                <div class="overview-card">
                    <h4>前端框架</h4>
                    <div class="value" id="frontend-framework">加载中...</div>
                </div>
                <div class="overview-card">
                    <h4>地图库</h4>
                    <div class="value" id="map-library">加载中...</div>
                </div>
            </div>
            <h3>项目描述</h3>
            <p id="project-description">加载中...</p>
            <h3>技术栈</h3>
            <div class="tech-stack" id="tech-stack">加载中...</div>
        </div>
        
        <div class="section">
            <h2>进度概览</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <h4>当前阶段</h4>
                    <div class="value" id="current-phase">加载中...</div>
                </div>
                <div class="overview-card">
                    <h4>完成百分比</h4>
                    <div class="value" id="completion-percentage">加载中...</div>
                </div>
                <div class="overview-card">
                    <h4>已完成任务</h4>
                    <div class="value" id="completed-tasks">加载中...</div>
                </div>
                <div class="overview-card">
                    <h4>待完成任务</h4>
                    <div class="value" id="pending-tasks">加载中...</div>
                </div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
            <div class="last-updated">
                最后更新时间: <span id="last-updated">加载中...</span>
            </div>
        </div>
        
        <div class="section">
            <h2>任务列表</h2>
            <table class="task-table">
                <thead>
                    <tr>
                        <th>任务ID</th>
                        <th>任务名称</th>
                        <th>状态</th>
                        <th>开始日期</th>
                        <th>结束日期</th>
                        <th>完成百分比</th>
                    </tr>
                </thead>
                <tbody id="task-table-body">
                    <tr><td colspan="6" style="text-align: center; padding: 40px;">加载中...</td></tr>
                </tbody>
            </table>
        </div>
        
        <div class="section">
            <h2>已完成工作</h2>
            <ul class="list-group" id="completed-work-list">
                <li>加载中...</li>
            </ul>
        </div>
        
        <div class="section">
            <h2>待办事项</h2>
            <div id="todo-list">
                <div class="todo-item">加载中...</div>
            </div>
        </div>
        
        <div class="section">
            <h2>问题与风险</h2>
            <div id="issues-list">
                <div class="issue-item">加载中...</div>
            </div>
        </div>
    </div>
    
    <script>
        // 加载JSON数据
        fetch('progress.json')
            .then(response => response.json())
            .then(data => {
                // 渲染项目概览
                document.getElementById('project-name').textContent = data.project_overview.project_name;
                document.getElementById('frontend-framework').textContent = data.project_overview.technical_stack.frontend;
                document.getElementById('map-library').textContent = data.project_overview.technical_stack.map_library;
                document.getElementById('project-description').textContent = data.project_overview.description;
                
                // 渲染技术栈
                const techStack = document.getElementById('tech-stack');
                techStack.innerHTML = '';
                Object.entries(data.project_overview.technical_stack).forEach(([key, value]) => {
                    if (Array.isArray(value)) {
                        value.forEach(item => {
                            const tag = document.createElement('span');
                            tag.className = 'tech-tag';
                            tag.textContent = item;
                            techStack.appendChild(tag);
                        });
                    } else {
                        const tag = document.createElement('span');
                        tag.className = 'tech-tag';
                        tag.textContent = value;
                        techStack.appendChild(tag);
                    }
                });
                
                // 渲染进度概览
                document.getElementById('current-phase').textContent = data.progress_overview.current_phase;
                document.getElementById('completion-percentage').textContent = data.progress_overview.completion_percentage + '%';
                
                // 计算任务统计
                const completedTasks = data.task_list.filter(task => task.status === 'completed').length;
                const pendingTasks = data.task_list.length - completedTasks;
                document.getElementById('completed-tasks').textContent = completedTasks;
                document.getElementById('pending-tasks').textContent = pendingTasks;
                
                // 更新进度条
                const progressFill = document.getElementById('progress-fill');
                progressFill.style.width = data.progress_overview.completion_percentage + '%';
                progressFill.textContent = data.progress_overview.completion_percentage + '%';
                
                // 更新最后更新时间
                document.getElementById('last-updated').textContent = data.progress_overview.last_updated;
                
                // 渲染任务列表
                const taskTableBody = document.getElementById('task-table-body');
                taskTableBody.innerHTML = '';
                data.task_list.forEach(task => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${task.id}</td>
                        <td>${task.name}</td>
                        <td><span class="status-badge status-${task.status}">${task.status === 'completed' ? '已完成' : task.status === 'pending' ? '待开始' : '进行中'}</span></td>
                        <td>${task.start_date || '-'}</td>
                        <td>${task.end_date || '-'}</td>
                        <td>${task.completion_percentage}%</td>
                    `;
                    taskTableBody.appendChild(row);
                });
                
                // 渲染已完成工作
                const completedWorkList = document.getElementById('completed-work-list');
                completedWorkList.innerHTML = '';
                data.completed_work.forEach(work => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <strong>${work.id}:</strong> ${work.description} <br>
                        <small style="color: #888;">完成日期: ${work.completion_date}</small>
                    `;
                    completedWorkList.appendChild(li);
                });
                
                // 渲染待办事项
                const todoList = document.getElementById('todo-list');
                todoList.innerHTML = '';
                data.todo_list.forEach(todo => {
                    const todoItem = document.createElement('div');
                    todoItem.className = 'todo-item';
                    todoItem.innerHTML = `
                        <div class="todo-priority priority-${todo.priority}">
                            ${todo.priority === 'high' ? '高' : todo.priority === 'medium' ? '中' : '低'}
                        </div>
                        <div>
                            <strong>${todo.id}:</strong> ${todo.description} <br>
                            <small style="color: #888;">优先级: ${todo.priority === 'high' ? '高' : todo.priority === 'medium' ? '中' : '低'}</small>
                        </div>
                    `;
                    todoList.appendChild(todoItem);
                });
                
                // 渲染问题与风险
                const issuesList = document.getElementById('issues-list');
                issuesList.innerHTML = '';
                data.issues_and_risks.forEach(issue => {
                    const issueItem = document.createElement('div');
                    issueItem.className = `issue-item ${issue.status === 'resolved' ? 'resolved' : ''}`;
                    issueItem.innerHTML = `
                        <div class="issue-title">${issue.id}:</div>
                        <div class="issue-description">${issue.description}</div>
                        ${issue.status ? `<div class="issue-resolution">状态: ${issue.status === 'resolved' ? '已解决' : '未解决'} ${issue.resolution ? `- ${issue.resolution}` : ''}</div>` : ''}
                    `;
                    issuesList.appendChild(issueItem);
                });
            })
            .catch(error => {
                console.error('加载进度数据失败:', error);
                alert('加载进度数据失败，请检查文件路径是否正确。');
            });
    </script>
</body>
</html>